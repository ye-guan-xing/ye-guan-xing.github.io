[{"content":"ä» Vue CLI è¿ç§»åˆ° Vite çš„å®Œæ•´æŒ‡å— ğŸ“‹ è¿ç§»æ¦‚è§ˆ å°†é¡¹ç›®ä» Vue CLI è¿ç§»åˆ° Vite ç¡®å®å¦‚ä½ æ‰€è¯´ï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒæ­¥éª¤ã€‚\nğŸ—ºï¸ è¿ç§»è·¯çº¿å›¾ æ­¥éª¤ 1ï¼šå¤‡ä»½åŸæœ‰é¡¹ç›® 1 2 # åœ¨å¼€å§‹å‰ä¸€å®šè¦å¤‡ä»½ cp -r my-project my-project-backup æ­¥éª¤ 2ï¼šåˆ é™¤æ—§é…ç½®æ–‡ä»¶ 1 2 3 4 # åˆ é™¤ Vue CLI ç›¸å…³é…ç½®æ–‡ä»¶ rm vue.config.js rm babel.config.js # å¦‚æœå­˜åœ¨ rm .eslintrc.js # å¦‚æœä½¿ç”¨å•ç‹¬çš„é…ç½®æ–‡ä»¶ æ­¥éª¤ 3ï¼šæ¸…ç†é¡¹ç›®ä¾èµ– 1 2 3 # åˆ é™¤ node_modules å’Œé”æ–‡ä»¶ rm -rf node_modules rm package-lock.json # æˆ– rm yarn.lock ğŸ“ è¯¦ç»†æ­¥éª¤è¯´æ˜ 1. ä¿®æ”¹ package.json ä¸»è¦å˜åŒ–ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 { \u0026#34;type\u0026#34;: \u0026#34;module\u0026#34;, // æ–°å¢ï¼šå£°æ˜ä¸º ES æ¨¡å— \u0026#34;scripts\u0026#34;: { // Vue CLI è„šæœ¬ â†’ Vite è„šæœ¬ \u0026#34;serve\u0026#34;: \u0026#34;vue-cli-service serve\u0026#34;, // åˆ é™¤ \u0026#34;build\u0026#34;: \u0026#34;vue-cli-service build\u0026#34;, // åˆ é™¤ \u0026#34;dev\u0026#34;: \u0026#34;vite\u0026#34;, // æ–°å¢ \u0026#34;build\u0026#34;: \u0026#34;vite build\u0026#34;, // ä¿®æ”¹ \u0026#34;preview\u0026#34;: \u0026#34;vite preview\u0026#34; // æ–°å¢ }, \u0026#34;dependencies\u0026#34;: { // ç§»é™¤ Vue CLI ç‰¹å®šçš„ä¾èµ– // ä¿æŒåº”ç”¨å±‚ä¾èµ–ä¸å˜ }, \u0026#34;devDependencies\u0026#34;: { // å®Œå…¨æ›¿æ¢å¼€å‘ä¾èµ– \u0026#34;@vue/cli-*\u0026#34;: \u0026#34;~5.0.0\u0026#34;, // åˆ é™¤æ‰€æœ‰ \u0026#34;@vitejs/plugin-vue\u0026#34;: \u0026#34;^5.0.5\u0026#34;, // æ–°å¢ \u0026#34;vite\u0026#34;: \u0026#34;^5.4.8\u0026#34;, // æ–°å¢ \u0026#34;sass-embedded\u0026#34;: \u0026#34;^1.83.0\u0026#34; // æ¨èä½¿ç”¨ sass-embedded } } ä¸ºä»€ä¹ˆè¦è¿™æ ·æ”¹ï¼Ÿ\nVue CLI åŸºäº Webpackï¼Œè€Œ Vite æ˜¯å…¨æ–°çš„æ„å»ºå·¥å…· type: \u0026quot;module\u0026quot; è®© Node.js æ”¯æŒ ES6 æ¨¡å—è¯­æ³• Vite çš„å‘½ä»¤æ›´ç®€æ´ç›´è§‚ 2. é…ç½®æ–‡ä»¶è¿ç§» ä» vue.config.js åˆ° vite.config.js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 // vue.config.js (æ—§) module.exports = { devServer: { proxy: { \u0026#34;/api\u0026#34;: { target: \u0026#34;http://10.245.30.86:8080\u0026#34;, changeOrigin: true, }, }, }, }; // vite.config.js (æ–°) import { defineConfig } from \u0026#34;vite\u0026#34;; export default defineConfig({ server: { proxy: { \u0026#34;/api\u0026#34;: { target: \u0026#34;http://10.245.30.86:8080\u0026#34;, changeOrigin: true, }, }, }, }); å…³é”®å·®å¼‚ï¼š\nVite ä½¿ç”¨ ES æ¨¡å—è¯­æ³• (import/export) é…ç½®ç»“æ„æ›´æ‰å¹³ çƒ­æ›´æ–°é€Ÿåº¦æ˜¾è‘—æå‡ 3. ç¯å¢ƒå˜é‡å¤„ç† Vue CLI æ–¹å¼ï¼š\n1 2 3 4 5 6 // .env.development VUE_APP_BASE_API=/api VUE_APP_PROXY_TARGET=http://10.245.30.86:8080 // ä»£ç ä¸­ä½¿ç”¨ process.env.VUE_APP_BASE_API Vite æ–¹å¼ï¼š\n1 2 3 4 5 6 // .env.development VITE_BASE_API=/api VITE_PROXY_TARGET=http://10.245.30.86:8080 // ä»£ç ä¸­ä½¿ç”¨ import.meta.env.VITE_BASE_API æˆ–è€…ä¿ç•™ Vue å‰ç¼€ï¼š\n1 2 3 4 // vite.config.js ä¸­é…ç½® envPrefix: [\u0026#34;VUE_APP_\u0026#34;, \u0026#34;VITE_\u0026#34;], // è¿™æ ·å¯ä»¥ä½¿ç”¨ä¸¤ç§å‰ç¼€ import.meta.env.VUE_APP_BASE_API; 4. è¯·æ±‚é…ç½®æ–‡ä»¶ä¿®æ”¹ ä¿®æ”¹ src/utils/request.jsï¼ˆæˆ–ç±»ä¼¼æ–‡ä»¶ï¼‰ï¼š\n1 2 3 4 5 6 7 8 9 10 11 // åŸæ¥çš„ Vue CLI æ–¹å¼ const service = axios.create({ baseURL: process.env.VUE_APP_BASE_API || \u0026#34;/api\u0026#34;, timeout: 10000, }); // ä¿®æ”¹ä¸º Vite æ–¹å¼ const service = axios.create({ baseURL: import.meta.env.VUE_APP_BASE_API || \u0026#34;/api\u0026#34;, timeout: 10000, }); é‡è¦è¯´æ˜ï¼š\nprocess.env â†’ import.meta.env åªæœ‰ä»¥ VITE_ æˆ–é…ç½®çš„å‰ç¼€å¼€å¤´çš„å˜é‡æ‰ä¼šè¢«æš´éœ² ç¯å¢ƒå˜é‡åœ¨æ„å»ºæ—¶è¢«æ›¿æ¢ 5. HTML æ–‡ä»¶å¤„ç† Vue CLIï¼š\n1 2 3 public/ index.html src/ Viteï¼š\n1 2 3 æ ¹ç›®å½•/ index.html # ç§»åŠ¨åˆ°æ ¹ç›®å½• src/ ä¿®æ”¹ index.htmlï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 \u0026lt;!-- åŸæ¥çš„ --\u0026gt; \u0026lt;script src=\u0026#34;/js/chunk-vendors.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script src=\u0026#34;/js/app.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;!-- ç°åœ¨ï¼šåˆ é™¤æ‰€æœ‰æ˜¾å¼çš„è„šæœ¬å¼•å…¥ --\u0026gt; \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;zh-CN\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34; /\u0026gt; \u0026lt;link rel=\u0026#34;icon\u0026#34; type=\u0026#34;image/svg+xml\u0026#34; href=\u0026#34;/vite.svg\u0026#34; /\u0026gt; \u0026lt;meta name=\u0026#34;viewport\u0026#34; content=\u0026#34;width=device-width, initial-scale=1.0\u0026#34; /\u0026gt; \u0026lt;title\u0026gt;Vite App\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;div id=\u0026#34;app\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;!-- Vite ä¼šè‡ªåŠ¨æ³¨å…¥è„šæœ¬ --\u0026gt; \u0026lt;script type=\u0026#34;module\u0026#34; src=\u0026#34;/src/main.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; 6. é™æ€èµ„æºå¼•ç”¨æ–¹å¼ Vue CLIï¼š\n1 2 3 4 5 import logo from \u0026#39;@/assets/logo.png\u0026#39;; \u0026lt;img :src=\u0026#34;logo\u0026#34; /\u0026gt; // æˆ– \u0026lt;img src=\u0026#34;@/assets/logo.png\u0026#34; /\u0026gt; Viteï¼š\n1 2 3 4 5 6 7 8 9 // æ–¹å¼1ï¼šä½¿ç”¨ç›¸å¯¹æˆ–ç»å¯¹è·¯å¾„ \u0026lt;img src=\u0026#34;/src/assets/logo.png\u0026#34; /\u0026gt; // æ–¹å¼2ï¼šä½¿ç”¨ import import logoUrl from \u0026#39;@/assets/logo.png\u0026#39;; \u0026lt;img :src=\u0026#34;logoUrl\u0026#34; /\u0026gt; // æ–¹å¼3ï¼šä½¿ç”¨ public ç›®å½•ï¼ˆä¸ç»è¿‡æ„å»ºï¼‰ \u0026lt;img src=\u0026#34;/logo.png\u0026#34; /\u0026gt; // æ”¾åœ¨ public/logo.png 7. è·¯å¾„åˆ«åé…ç½® vite.config.js ä¸­é…ç½®ï¼š\n1 2 3 4 5 6 7 8 9 10 11 import path from \u0026#34;path\u0026#34;; export default defineConfig({ resolve: { alias: { \u0026#34;@\u0026#34;: path.resolve(__dirname, \u0026#34;./src\u0026#34;), // å¯ä»¥æ·»åŠ æ›´å¤šåˆ«å \u0026#34;@components\u0026#34;: path.resolve(__dirname, \u0026#34;./src/components\u0026#34;), }, }, }); ğŸ”§ å¸¸è§é—®é¢˜è§£å†³ é—®é¢˜ 1ï¼šCommonJS æ¨¡å—æŠ¥é”™ 1 2 3 4 5 // é”™è¯¯ï¼šrequire is not defined const module = require(\u0026#34;module\u0026#34;); // è§£å†³ï¼šæ”¹ä¸º ES6 å¯¼å…¥ import module from \u0026#34;module\u0026#34;; é—®é¢˜ 2ï¼šprocess å˜é‡æŠ¥é”™ 1 2 3 4 5 6 7 // é”™è¯¯ï¼šprocess is not defined if (process.env.NODE_ENV === \u0026#34;development\u0026#34;) { } // è§£å†³ï¼šä½¿ç”¨ import.meta.env if (import.meta.env.MODE === \u0026#34;development\u0026#34;) { } é—®é¢˜ 3ï¼šCSS é¢„å¤„ç†å™¨é”™è¯¯ 1 2 3 4 5 6 7 8 9 10 // vite.config.js ä¸­æ­£ç¡®é…ç½® export default defineConfig({ css: { preprocessorOptions: { scss: { additionalData: `@import \u0026#34;@/styles/variables.scss\u0026#34;;`, }, }, }, }); ğŸ“¦ å®Œæ•´è¿ç§»è„šæœ¬ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 #!/bin/bash # migrate-to-vite.sh echo \u0026#34;ğŸš€ å¼€å§‹è¿ç§» Vue CLI åˆ° Vite...\u0026#34; # 1. å¤‡ä»½ echo \u0026#34;ğŸ“¦ å¤‡ä»½åŸé¡¹ç›®...\u0026#34; cp -r ./ ./backup-$(date +%Y%m%d-%H%M%S) # 2. åˆ é™¤æ—§æ–‡ä»¶ echo \u0026#34;ğŸ—‘ï¸ åˆ é™¤æ—§é…ç½®æ–‡ä»¶...\u0026#34; rm -f vue.config.js rm -f babel.config.js # 3. æ¸…ç†ä¾èµ– echo \u0026#34;ğŸ§¹ æ¸…ç† node_modules...\u0026#34; rm -rf node_modules rm -f package-lock.json # 4. ç§»åŠ¨ HTML æ–‡ä»¶ echo \u0026#34;ğŸ“„ ç§»åŠ¨ HTML æ–‡ä»¶...\u0026#34; if [ -f \u0026#34;public/index.html\u0026#34; ]; then mv public/index.html ./ rm -rf public fi # 5. æ›´æ–° package.json echo \u0026#34;ğŸ“ æ›´æ–° package.json...\u0026#34; # è¿™é‡Œå¯ä»¥ç¼–å†™ sed å‘½ä»¤æˆ–æ‰‹åŠ¨ä¿®æ”¹ # 6. åˆ›å»º vite.config.js echo \u0026#34;âš™ï¸ åˆ›å»º Vite é…ç½®æ–‡ä»¶...\u0026#34; cat \u0026gt; vite.config.js \u0026lt;\u0026lt; \u0026#39;EOF\u0026#39; import { defineConfig } from \u0026#34;vite\u0026#34;; import vue from \u0026#34;@vitejs/plugin-vue\u0026#34;; import path from \u0026#34;path\u0026#34;; export default defineConfig({ plugins: [vue()], resolve: { alias: { \u0026#34;@\u0026#34;: path.resolve(__dirname, \u0026#34;./src\u0026#34;), }, }, server: { port: 8081, open: true, proxy: { \u0026#34;/api\u0026#34;: { target: \u0026#34;http://localhost:8080\u0026#34;, changeOrigin: true, }, }, }, }); EOF echo \u0026#34;âœ… è¿ç§»å®Œæˆï¼\u0026#34; echo \u0026#34;ğŸ“¦ è¯·è¿è¡Œ: npm install\u0026#34; echo \u0026#34;ğŸš€ ç„¶åè¿è¡Œ: npm run dev\u0026#34; ğŸ“Š è¿ç§»å‰åå¯¹æ¯” ç‰¹æ€§ Vue CLI (Webpack) Vite å¯åŠ¨é€Ÿåº¦ 20-30 ç§’ 1-3 ç§’ çƒ­æ›´æ–° 1-3 ç§’ 50-300 æ¯«ç§’ é…ç½®å¤æ‚åº¦ å¤æ‚ ç®€å• æ’ä»¶ç”Ÿæ€ æˆç†Ÿ å¿«é€Ÿå¢é•¿ æ„å»ºé€Ÿåº¦ ä¸­ç­‰ å¿«é€Ÿ ğŸ¯ è¿ç§»åçš„ä¼˜åŠ¿ æé€Ÿå¯åŠ¨ï¼šVite å¯åŠ¨é€Ÿåº¦æ¯” Vue CLI å¿« 10-100 å€ é—ªç”µçƒ­æ›´æ–°ï¼šæ— è®ºé¡¹ç›®å¤§å°ï¼Œçƒ­æ›´æ–°å‡ ä¹ç¬é—´å®Œæˆ æ›´ç®€å•é…ç½®ï¼šé…ç½®æ–‡ä»¶æ›´ç®€æ´æ˜“æ‡‚ ç°ä»£å·¥å…·é“¾ï¼šåŸç”Ÿæ”¯æŒ ES æ¨¡å—ã€TypeScript ç­‰ æ›´å¥½çš„å¼€å‘ä½“éªŒï¼šæŒ‰éœ€ç¼–è¯‘ï¼Œæ— éœ€ç­‰å¾…æ•´ä¸ªåº”ç”¨æ„å»º ğŸ“š æ€»ç»“ è¿ç§»åˆ° Vite ç¡®å®æ˜¯ä¸€ä¸ªç›¸å¯¹ç®€å•çš„è¿‡ç¨‹ï¼Œä¸»è¦å°±æ˜¯ï¼š\næ”¹é…ç½®ï¼špackage.json + vite.config.js æ”¹ä»£ç ï¼šç¯å¢ƒå˜é‡è®¿é—®æ–¹å¼ æ”¹ç»“æ„ï¼šHTML æ–‡ä»¶ä½ç½® æ”¹å¼•ç”¨ï¼šé™æ€èµ„æºå¯¼å…¥æ–¹å¼ ","date":"2025-12-14T22:36:00+08:00","permalink":"https://ye-guan-xing.github.io/p/%E5%A6%82%E4%BD%95%E5%B0%86vue-cli-%E5%86%99%E7%9A%84%E5%89%8D%E7%AB%AF%E6%96%87%E4%BB%B6%E8%BD%AC%E6%8D%A2%E4%B8%BAvite%E8%AF%A6%E7%BB%86%E6%9D%BF/","title":"å¦‚ä½•å°†vue cli å†™çš„å‰ç«¯æ–‡ä»¶è½¬æ¢ä¸ºviteï¼ˆè¯¦ç»†æ¿ï¼‰"},{"content":"Vue3å¿«é€Ÿä¸Šæ‰‹ 1.Vue3ç®€ä»‹ 2020å¹´9æœˆ18æ—¥ï¼ŒVue.jså‘å¸ƒ3.0ç‰ˆæœ¬ï¼Œä»£å·ï¼šOne Pieceï¼ˆæµ·è´¼ç‹ï¼‰ è€—æ—¶2å¹´å¤šã€2600+æ¬¡æäº¤ã€30+ä¸ªRFCã€600+æ¬¡PRã€99ä½è´¡çŒ®è€… githubä¸Šçš„tagsåœ°å€ï¼šhttps://github.com/vuejs/vue-next/releases/tag/v3.0.0 2.Vue3å¸¦æ¥äº†ä»€ä¹ˆ 1.æ€§èƒ½çš„æå‡ æ‰“åŒ…å¤§å°å‡å°‘41%\nåˆæ¬¡æ¸²æŸ“å¿«55%, æ›´æ–°æ¸²æŸ“å¿«133%\nå†…å­˜å‡å°‘54%\n\u0026hellip;\u0026hellip;\n2.æºç çš„å‡çº§ ä½¿ç”¨Proxyä»£æ›¿definePropertyå®ç°å“åº”å¼\né‡å†™è™šæ‹ŸDOMçš„å®ç°å’ŒTree-Shaking\n\u0026hellip;\u0026hellip;\n3.æ‹¥æŠ±TypeScript Vue3å¯ä»¥æ›´å¥½çš„æ”¯æŒTypeScript 4.æ–°çš„ç‰¹æ€§ Composition APIï¼ˆç»„åˆAPIï¼‰\nsetupé…ç½® refä¸reactive watchä¸watchEffect provideä¸inject \u0026hellip;\u0026hellip; æ–°çš„å†…ç½®ç»„ä»¶\nFragment Teleport Suspense å…¶ä»–æ”¹å˜\næ–°çš„ç”Ÿå‘½å‘¨æœŸé’©å­ data é€‰é¡¹åº”å§‹ç»ˆè¢«å£°æ˜ä¸ºä¸€ä¸ªå‡½æ•° ç§»é™¤keyCodeæ”¯æŒä½œä¸º v-on çš„ä¿®é¥°ç¬¦ \u0026hellip;\u0026hellip; ä¸€ã€åˆ›å»ºVue3.0å·¥ç¨‹ 1.ä½¿ç”¨ vue-cli åˆ›å»º å®˜æ–¹æ–‡æ¡£ï¼šhttps://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create\n1 2 3 4 5 6 7 8 9 ## æŸ¥çœ‹@vue/cliç‰ˆæœ¬ï¼Œç¡®ä¿@vue/cliç‰ˆæœ¬åœ¨4.5.0ä»¥ä¸Š vue --version ## å®‰è£…æˆ–è€…å‡çº§ä½ çš„@vue/cli npm install -g @vue/cli ## åˆ›å»º vue create vue_test ## å¯åŠ¨ cd vue_test npm run serve 2.ä½¿ç”¨ vite åˆ›å»º å®˜æ–¹æ–‡æ¡£ï¼šhttps://v3.cn.vuejs.org/guide/installation.html#vite\nviteå®˜ç½‘ï¼šhttps://vitejs.cn\nä»€ä¹ˆæ˜¯viteï¼Ÿâ€”â€” æ–°ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·ã€‚ ä¼˜åŠ¿å¦‚ä¸‹ï¼š å¼€å‘ç¯å¢ƒä¸­ï¼Œæ— éœ€æ‰“åŒ…æ“ä½œï¼Œå¯å¿«é€Ÿçš„å†·å¯åŠ¨ã€‚ è½»é‡å¿«é€Ÿçš„çƒ­é‡è½½ï¼ˆHMRï¼‰ã€‚ çœŸæ­£çš„æŒ‰éœ€ç¼–è¯‘ï¼Œä¸å†ç­‰å¾…æ•´ä¸ªåº”ç”¨ç¼–è¯‘å®Œæˆã€‚ ä¼ ç»Ÿæ„å»º ä¸ viteæ„å»ºå¯¹æ¯”å›¾ 1 2 3 4 5 6 7 8 ## åˆ›å»ºå·¥ç¨‹ npm init vite-app \u0026lt;project-name\u0026gt; ## è¿›å…¥å·¥ç¨‹ç›®å½• cd \u0026lt;project-name\u0026gt; ## å®‰è£…ä¾èµ– npm install ## è¿è¡Œ npm run dev äºŒã€å¸¸ç”¨ Composition API å®˜æ–¹æ–‡æ¡£: https://v3.cn.vuejs.org/guide/composition-api-introduction.html\n1.æ‹‰å¼€åºå¹•çš„setup ç†è§£ï¼šVue3.0ä¸­ä¸€ä¸ªæ–°çš„é…ç½®é¡¹ï¼Œå€¼ä¸ºä¸€ä¸ªå‡½æ•°ã€‚ setupæ˜¯æ‰€æœ‰Composition APIï¼ˆç»„åˆAPIï¼‰â€œ è¡¨æ¼”çš„èˆå° â€ã€‚ ç»„ä»¶ä¸­æ‰€ç”¨åˆ°çš„ï¼šæ•°æ®ã€æ–¹æ³•ç­‰ç­‰ï¼Œå‡è¦é…ç½®åœ¨setupä¸­ã€‚ setupå‡½æ•°çš„ä¸¤ç§è¿”å›å€¼ï¼š è‹¥è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™å¯¹è±¡ä¸­çš„å±æ€§ã€æ–¹æ³•, åœ¨æ¨¡æ¿ä¸­å‡å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚ï¼ˆé‡ç‚¹å…³æ³¨ï¼ï¼‰ è‹¥è¿”å›ä¸€ä¸ªæ¸²æŸ“å‡½æ•°ï¼šåˆ™å¯ä»¥è‡ªå®šä¹‰æ¸²æŸ“å†…å®¹ã€‚ï¼ˆäº†è§£ï¼‰ æ³¨æ„ç‚¹ï¼š å°½é‡ä¸è¦ä¸Vue2.xé…ç½®æ··ç”¨ Vue2.xé…ç½®ï¼ˆdataã€methosã€computed\u0026hellip;ï¼‰ä¸­å¯ä»¥è®¿é—®åˆ°setupä¸­çš„å±æ€§ã€æ–¹æ³•ã€‚ ä½†åœ¨setupä¸­ä¸èƒ½è®¿é—®åˆ°Vue2.xé…ç½®ï¼ˆdataã€methosã€computed\u0026hellip;ï¼‰ã€‚ å¦‚æœæœ‰é‡å, setupä¼˜å…ˆã€‚ setupä¸èƒ½æ˜¯ä¸€ä¸ªasyncå‡½æ•°ï¼Œå› ä¸ºè¿”å›å€¼ä¸å†æ˜¯returnçš„å¯¹è±¡, è€Œæ˜¯promise, æ¨¡æ¿çœ‹ä¸åˆ°returnå¯¹è±¡ä¸­çš„å±æ€§ã€‚ï¼ˆåæœŸä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ªPromiseå®ä¾‹ï¼Œä½†éœ€è¦Suspenseå’Œå¼‚æ­¥ç»„ä»¶çš„é…åˆï¼‰ 2.refå‡½æ•° ä½œç”¨: å®šä¹‰ä¸€ä¸ªå“åº”å¼çš„æ•°æ® è¯­æ³•: const xxx = ref(initValue) åˆ›å»ºä¸€ä¸ªåŒ…å«å“åº”å¼æ•°æ®çš„å¼•ç”¨å¯¹è±¡ï¼ˆreferenceå¯¹è±¡ï¼Œç®€ç§°refå¯¹è±¡ï¼‰ã€‚ JSä¸­æ“ä½œæ•°æ®ï¼š xxx.value æ¨¡æ¿ä¸­è¯»å–æ•°æ®: ä¸éœ€è¦.valueï¼Œç›´æ¥ï¼š\u0026lt;div\u0026gt;{{xxx}}\u0026lt;/div\u0026gt; å¤‡æ³¨ï¼š æ¥æ”¶çš„æ•°æ®å¯ä»¥æ˜¯ï¼šåŸºæœ¬ç±»å‹ã€ä¹Ÿå¯ä»¥æ˜¯å¯¹è±¡ç±»å‹ã€‚ åŸºæœ¬ç±»å‹çš„æ•°æ®ï¼šå“åº”å¼ä¾ç„¶æ˜¯é Object.defineProperty()çš„getä¸setå®Œæˆçš„ã€‚ å¯¹è±¡ç±»å‹çš„æ•°æ®ï¼šå†…éƒ¨ â€œ æ±‚åŠ© â€ äº†Vue3.0ä¸­çš„ä¸€ä¸ªæ–°å‡½æ•°â€”â€” reactiveå‡½æ•°ã€‚ 3.reactiveå‡½æ•° ä½œç”¨: å®šä¹‰ä¸€ä¸ªå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ï¼ˆåŸºæœ¬ç±»å‹ä¸è¦ç”¨å®ƒï¼Œè¦ç”¨refå‡½æ•°ï¼‰ è¯­æ³•ï¼šconst ä»£ç†å¯¹è±¡= reactive(æºå¯¹è±¡)æ¥æ”¶ä¸€ä¸ªå¯¹è±¡ï¼ˆæˆ–æ•°ç»„ï¼‰ï¼Œè¿”å›ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼ˆProxyçš„å®ä¾‹å¯¹è±¡ï¼Œç®€ç§°proxyå¯¹è±¡ï¼‰ reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®æ˜¯â€œæ·±å±‚æ¬¡çš„â€ã€‚ å†…éƒ¨åŸºäº ES6 çš„ Proxy å®ç°ï¼Œé€šè¿‡ä»£ç†å¯¹è±¡æ“ä½œæºå¯¹è±¡å†…éƒ¨æ•°æ®è¿›è¡Œæ“ä½œã€‚ 4.Vue3.0ä¸­çš„å“åº”å¼åŸç† vue2.xçš„å“åº”å¼ å®ç°åŸç†ï¼š\nå¯¹è±¡ç±»å‹ï¼šé€šè¿‡Object.defineProperty()å¯¹å±æ€§çš„è¯»å–ã€ä¿®æ”¹è¿›è¡Œæ‹¦æˆªï¼ˆæ•°æ®åŠ«æŒï¼‰ã€‚\næ•°ç»„ç±»å‹ï¼šé€šè¿‡é‡å†™æ›´æ–°æ•°ç»„çš„ä¸€ç³»åˆ—æ–¹æ³•æ¥å®ç°æ‹¦æˆªã€‚ï¼ˆå¯¹æ•°ç»„çš„å˜æ›´æ–¹æ³•è¿›è¡Œäº†åŒ…è£¹ï¼‰ã€‚\n1 2 3 4 Object.defineProperty(data, \u0026#39;count\u0026#39;, { get () {}, set () {} }) å­˜åœ¨é—®é¢˜ï¼š\næ–°å¢å±æ€§ã€åˆ é™¤å±æ€§, ç•Œé¢ä¸ä¼šæ›´æ–°ã€‚ ç›´æ¥é€šè¿‡ä¸‹æ ‡ä¿®æ”¹æ•°ç»„, ç•Œé¢ä¸ä¼šè‡ªåŠ¨æ›´æ–°ã€‚ Vue3.0çš„å“åº”å¼ å®ç°åŸç†: é€šè¿‡Proxyï¼ˆä»£ç†ï¼‰: æ‹¦æˆªå¯¹è±¡ä¸­ä»»æ„å±æ€§çš„å˜åŒ–, åŒ…æ‹¬ï¼šå±æ€§å€¼çš„è¯»å†™ã€å±æ€§çš„æ·»åŠ ã€å±æ€§çš„åˆ é™¤ç­‰ã€‚ é€šè¿‡Reflectï¼ˆåå°„ï¼‰: å¯¹æºå¯¹è±¡çš„å±æ€§è¿›è¡Œæ“ä½œã€‚ MDNæ–‡æ¡£ä¸­æè¿°çš„Proxyä¸Reflectï¼š Proxyï¼šhttps://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy\nReflectï¼šhttps://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 new Proxy(data, { // æ‹¦æˆªè¯»å–å±æ€§å€¼ get (target, prop) { return Reflect.get(target, prop) }, // æ‹¦æˆªè®¾ç½®å±æ€§å€¼æˆ–æ·»åŠ æ–°å±æ€§ set (target, prop, value) { return Reflect.set(target, prop, value) }, // æ‹¦æˆªåˆ é™¤å±æ€§ deleteProperty (target, prop) { return Reflect.deleteProperty(target, prop) } }) proxy.name = \u0026#39;tom\u0026#39; 5.reactiveå¯¹æ¯”ref ä»å®šä¹‰æ•°æ®è§’åº¦å¯¹æ¯”ï¼š refç”¨æ¥å®šä¹‰ï¼šåŸºæœ¬ç±»å‹æ•°æ®ã€‚ reactiveç”¨æ¥å®šä¹‰ï¼šå¯¹è±¡ï¼ˆæˆ–æ•°ç»„ï¼‰ç±»å‹æ•°æ®ã€‚ å¤‡æ³¨ï¼šrefä¹Ÿå¯ä»¥ç”¨æ¥å®šä¹‰å¯¹è±¡ï¼ˆæˆ–æ•°ç»„ï¼‰ç±»å‹æ•°æ®, å®ƒå†…éƒ¨ä¼šè‡ªåŠ¨é€šè¿‡reactiveè½¬ä¸ºä»£ç†å¯¹è±¡ã€‚ ä»åŸç†è§’åº¦å¯¹æ¯”ï¼š refé€šè¿‡Object.defineProperty()çš„getä¸setæ¥å®ç°å“åº”å¼ï¼ˆæ•°æ®åŠ«æŒï¼‰ã€‚ reactiveé€šè¿‡ä½¿ç”¨Proxyæ¥å®ç°å“åº”å¼ï¼ˆæ•°æ®åŠ«æŒï¼‰, å¹¶é€šè¿‡Reflectæ“ä½œæºå¯¹è±¡å†…éƒ¨çš„æ•°æ®ã€‚ ä»ä½¿ç”¨è§’åº¦å¯¹æ¯”ï¼š refå®šä¹‰çš„æ•°æ®ï¼šæ“ä½œæ•°æ®éœ€è¦.valueï¼Œè¯»å–æ•°æ®æ—¶æ¨¡æ¿ä¸­ç›´æ¥è¯»å–ä¸éœ€è¦.valueã€‚ reactiveå®šä¹‰çš„æ•°æ®ï¼šæ“ä½œæ•°æ®ä¸è¯»å–æ•°æ®ï¼šå‡ä¸éœ€è¦.valueã€‚ 6.setupçš„ä¸¤ä¸ªæ³¨æ„ç‚¹ setupæ‰§è¡Œçš„æ—¶æœº\nåœ¨beforeCreateä¹‹å‰æ‰§è¡Œä¸€æ¬¡ï¼Œthisæ˜¯undefinedã€‚ setupçš„å‚æ•°\npropsï¼šå€¼ä¸ºå¯¹è±¡ï¼ŒåŒ…å«ï¼šç»„ä»¶å¤–éƒ¨ä¼ é€’è¿‡æ¥ï¼Œä¸”ç»„ä»¶å†…éƒ¨å£°æ˜æ¥æ”¶äº†çš„å±æ€§ã€‚ contextï¼šä¸Šä¸‹æ–‡å¯¹è±¡ attrs: å€¼ä¸ºå¯¹è±¡ï¼ŒåŒ…å«ï¼šç»„ä»¶å¤–éƒ¨ä¼ é€’è¿‡æ¥ï¼Œä½†æ²¡æœ‰åœ¨propsé…ç½®ä¸­å£°æ˜çš„å±æ€§, ç›¸å½“äº this.$attrsã€‚ slots: æ”¶åˆ°çš„æ’æ§½å†…å®¹, ç›¸å½“äº this.$slotsã€‚ emit: åˆ†å‘è‡ªå®šä¹‰äº‹ä»¶çš„å‡½æ•°, ç›¸å½“äº this.$emitã€‚ 7.è®¡ç®—å±æ€§ä¸ç›‘è§† 1.computedå‡½æ•° ä¸Vue2.xä¸­computedé…ç½®åŠŸèƒ½ä¸€è‡´\nå†™æ³•\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 import {computed} from \u0026#39;vue\u0026#39; setup(){ ... //è®¡ç®—å±æ€§â€”â€”ç®€å†™ let fullName = computed(()=\u0026gt;{ return person.firstName + \u0026#39;-\u0026#39; + person.lastName }) //è®¡ç®—å±æ€§â€”â€”å®Œæ•´ let fullName = computed({ get(){ return person.firstName + \u0026#39;-\u0026#39; + person.lastName }, set(value){ const nameArr = value.split(\u0026#39;-\u0026#39;) person.firstName = nameArr[0] person.lastName = nameArr[1] } }) } 2.watchå‡½æ•° ä¸Vue2.xä¸­watché…ç½®åŠŸèƒ½ä¸€è‡´\nä¸¤ä¸ªå°â€œå‘â€ï¼š\nç›‘è§†reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®æ—¶ï¼šoldValueæ— æ³•æ­£ç¡®è·å–ã€å¼ºåˆ¶å¼€å¯äº†æ·±åº¦ç›‘è§†ï¼ˆdeepé…ç½®å¤±æ•ˆï¼‰ã€‚ ç›‘è§†reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ä¸­æŸä¸ªå±æ€§æ—¶ï¼šdeepé…ç½®æœ‰æ•ˆã€‚ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 //æƒ…å†µä¸€ï¼šç›‘è§†refå®šä¹‰çš„å“åº”å¼æ•°æ® watch(sum,(newValue,oldValue)=\u0026gt;{ console.log(\u0026#39;sumå˜åŒ–äº†\u0026#39;,newValue,oldValue) },{immediate:true}) //æƒ…å†µäºŒï¼šç›‘è§†å¤šä¸ªrefå®šä¹‰çš„å“åº”å¼æ•°æ® watch([sum,msg],(newValue,oldValue)=\u0026gt;{ console.log(\u0026#39;sumæˆ–msgå˜åŒ–äº†\u0026#39;,newValue,oldValue) }) /* æƒ…å†µä¸‰ï¼šç›‘è§†reactiveå®šä¹‰çš„å“åº”å¼æ•°æ® è‹¥watchç›‘è§†çš„æ˜¯reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ï¼Œåˆ™æ— æ³•æ­£ç¡®è·å¾—oldValueï¼ï¼ è‹¥watchç›‘è§†çš„æ˜¯reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ï¼Œåˆ™å¼ºåˆ¶å¼€å¯äº†æ·±åº¦ç›‘è§† */ watch(person,(newValue,oldValue)=\u0026gt;{ console.log(\u0026#39;personå˜åŒ–äº†\u0026#39;,newValue,oldValue) },{immediate:true,deep:false}) //æ­¤å¤„çš„deepé…ç½®ä¸å†å¥æ•ˆ //æƒ…å†µå››ï¼šç›‘è§†reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ä¸­çš„æŸä¸ªå±æ€§ watch(()=\u0026gt;person.job,(newValue,oldValue)=\u0026gt;{ console.log(\u0026#39;personçš„jobå˜åŒ–äº†\u0026#39;,newValue,oldValue) },{immediate:true,deep:true}) //æƒ…å†µäº”ï¼šç›‘è§†reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ä¸­çš„æŸäº›å±æ€§ watch([()=\u0026gt;person.job,()=\u0026gt;person.name],(newValue,oldValue)=\u0026gt;{ console.log(\u0026#39;personçš„jobå˜åŒ–äº†\u0026#39;,newValue,oldValue) },{immediate:true,deep:true}) //ç‰¹æ®Šæƒ…å†µ watch(()=\u0026gt;person.job,(newValue,oldValue)=\u0026gt;{ console.log(\u0026#39;personçš„jobå˜åŒ–äº†\u0026#39;,newValue,oldValue) },{deep:true}) //æ­¤å¤„ç”±äºç›‘è§†çš„æ˜¯reactiveç´ å®šä¹‰çš„å¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§ï¼Œæ‰€ä»¥deepé…ç½®æœ‰æ•ˆ 3.watchEffectå‡½æ•° watchçš„å¥—è·¯æ˜¯ï¼šæ—¢è¦æŒ‡æ˜ç›‘è§†çš„å±æ€§ï¼Œä¹Ÿè¦æŒ‡æ˜ç›‘è§†çš„å›è°ƒã€‚\nwatchEffectçš„å¥—è·¯æ˜¯ï¼šä¸ç”¨æŒ‡æ˜ç›‘è§†å“ªä¸ªå±æ€§ï¼Œç›‘è§†çš„å›è°ƒä¸­ç”¨åˆ°å“ªä¸ªå±æ€§ï¼Œé‚£å°±ç›‘è§†å“ªä¸ªå±æ€§ã€‚\nwatchEffectæœ‰ç‚¹åƒcomputedï¼š\nä½†computedæ³¨é‡çš„è®¡ç®—å‡ºæ¥çš„å€¼ï¼ˆå›è°ƒå‡½æ•°çš„è¿”å›å€¼ï¼‰ï¼Œæ‰€ä»¥å¿…é¡»è¦å†™è¿”å›å€¼ã€‚ è€ŒwatchEffectæ›´æ³¨é‡çš„æ˜¯è¿‡ç¨‹ï¼ˆå›è°ƒå‡½æ•°çš„å‡½æ•°ä½“ï¼‰ï¼Œæ‰€ä»¥ä¸ç”¨å†™è¿”å›å€¼ã€‚ 1 2 3 4 5 6 //watchEffectæ‰€æŒ‡å®šçš„å›è°ƒä¸­ç”¨åˆ°çš„æ•°æ®åªè¦å‘ç”Ÿå˜åŒ–ï¼Œåˆ™ç›´æ¥é‡æ–°æ‰§è¡Œå›è°ƒã€‚ watchEffect(()=\u0026gt;{ const x1 = sum.value const x2 = person.age console.log(\u0026#39;watchEffecté…ç½®çš„å›è°ƒæ‰§è¡Œäº†\u0026#39;) }) 8.ç”Ÿå‘½å‘¨æœŸ vue2.xçš„ç”Ÿå‘½å‘¨æœŸvue3.0çš„ç”Ÿå‘½å‘¨æœŸ 1\nVue3.0ä¸­å¯ä»¥ç»§ç»­ä½¿ç”¨Vue2.xä¸­çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œä½†æœ‰æœ‰ä¸¤ä¸ªè¢«æ›´åï¼š beforeDestroyæ”¹åä¸º beforeUnmount destroyedæ”¹åä¸º unmounted Vue3.0ä¹Ÿæä¾›äº† Composition API å½¢å¼çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œä¸Vue2.xä¸­é’©å­å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š beforeCreate===\u0026gt;setup() created=======\u0026gt;setup() beforeMount ===\u0026gt;onBeforeMount mounted=======\u0026gt;onMounted beforeUpdate===\u0026gt;onBeforeUpdate updated =======\u0026gt;onUpdated beforeUnmountÂ ==\u0026gt;onBeforeUnmount unmounted =====\u0026gt;onUnmounted 9.è‡ªå®šä¹‰hookå‡½æ•° ä»€ä¹ˆæ˜¯hookï¼Ÿâ€”â€” æœ¬è´¨æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ŒæŠŠsetupå‡½æ•°ä¸­ä½¿ç”¨çš„Composition APIè¿›è¡Œäº†å°è£…ã€‚\nç±»ä¼¼äºvue2.xä¸­çš„mixinã€‚\nè‡ªå®šä¹‰hookçš„ä¼˜åŠ¿: å¤ç”¨ä»£ç , è®©setupä¸­çš„é€»è¾‘æ›´æ¸…æ¥šæ˜“æ‡‚ã€‚\n10.toRef ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ª ref å¯¹è±¡ï¼Œå…¶valueå€¼æŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§ã€‚\nè¯­æ³•ï¼šconst name = toRef(person,'name')\nåº”ç”¨: è¦å°†å“åº”å¼å¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§å•ç‹¬æä¾›ç»™å¤–éƒ¨ä½¿ç”¨æ—¶ã€‚\næ‰©å±•ï¼štoRefs ä¸toRefåŠŸèƒ½ä¸€è‡´ï¼Œä½†å¯ä»¥æ‰¹é‡åˆ›å»ºå¤šä¸ª ref å¯¹è±¡ï¼Œè¯­æ³•ï¼štoRefs(person)\nä¸‰ã€å…¶å®ƒ Composition API 1.shallowReactive ä¸ shallowRef shallowReactiveï¼šåªå¤„ç†å¯¹è±¡æœ€å¤–å±‚å±æ€§çš„å“åº”å¼ï¼ˆæµ…å“åº”å¼ï¼‰ã€‚\nshallowRefï¼šåªå¤„ç†åŸºæœ¬æ•°æ®ç±»å‹çš„å“åº”å¼, ä¸è¿›è¡Œå¯¹è±¡çš„å“åº”å¼å¤„ç†ã€‚\nä»€ä¹ˆæ—¶å€™ä½¿ç”¨?\nå¦‚æœæœ‰ä¸€ä¸ªå¯¹è±¡æ•°æ®ï¼Œç»“æ„æ¯”è¾ƒæ·±, ä½†å˜åŒ–æ—¶åªæ˜¯å¤–å±‚å±æ€§å˜åŒ– ===\u0026gt; shallowReactiveã€‚ å¦‚æœæœ‰ä¸€ä¸ªå¯¹è±¡æ•°æ®ï¼Œåç»­åŠŸèƒ½ä¸ä¼šä¿®æ”¹è¯¥å¯¹è±¡ä¸­çš„å±æ€§ï¼Œè€Œæ˜¯ç”Ÿæ–°çš„å¯¹è±¡æ¥æ›¿æ¢ ===\u0026gt; shallowRefã€‚ 2.readonly ä¸ shallowReadonly readonly: è®©ä¸€ä¸ªå“åº”å¼æ•°æ®å˜ä¸ºåªè¯»çš„ï¼ˆæ·±åªè¯»ï¼‰ã€‚ shallowReadonlyï¼šè®©ä¸€ä¸ªå“åº”å¼æ•°æ®å˜ä¸ºåªè¯»çš„ï¼ˆæµ…åªè¯»ï¼‰ã€‚ åº”ç”¨åœºæ™¯: ä¸å¸Œæœ›æ•°æ®è¢«ä¿®æ”¹æ—¶ã€‚ 3.toRaw ä¸ markRaw toRawï¼š ä½œç”¨ï¼šå°†ä¸€ä¸ªç”±reactiveç”Ÿæˆçš„å“åº”å¼å¯¹è±¡è½¬ä¸ºæ™®é€šå¯¹è±¡ã€‚ ä½¿ç”¨åœºæ™¯ï¼šç”¨äºè¯»å–å“åº”å¼å¯¹è±¡å¯¹åº”çš„æ™®é€šå¯¹è±¡ï¼Œå¯¹è¿™ä¸ªæ™®é€šå¯¹è±¡çš„æ‰€æœ‰æ“ä½œï¼Œä¸ä¼šå¼•èµ·é¡µé¢æ›´æ–°ã€‚ markRawï¼š ä½œç”¨ï¼šæ ‡è®°ä¸€ä¸ªå¯¹è±¡ï¼Œä½¿å…¶æ°¸è¿œä¸ä¼šå†æˆä¸ºå“åº”å¼å¯¹è±¡ã€‚ åº”ç”¨åœºæ™¯: æœ‰äº›å€¼ä¸åº”è¢«è®¾ç½®ä¸ºå“åº”å¼çš„ï¼Œä¾‹å¦‚å¤æ‚çš„ç¬¬ä¸‰æ–¹ç±»åº“ç­‰ã€‚ å½“æ¸²æŸ“å…·æœ‰ä¸å¯å˜æ•°æ®æºçš„å¤§åˆ—è¡¨æ—¶ï¼Œè·³è¿‡å“åº”å¼è½¬æ¢å¯ä»¥æé«˜æ€§èƒ½ã€‚ 4.customRef ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ refï¼Œå¹¶å¯¹å…¶ä¾èµ–é¡¹è·Ÿè¸ªå’Œæ›´æ–°è§¦å‘è¿›è¡Œæ˜¾å¼æ§åˆ¶ã€‚\nå®ç°é˜²æŠ–æ•ˆæœï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 \u0026lt;template\u0026gt; \u0026lt;input type=\u0026#34;text\u0026#34; v-model=\u0026#34;keyword\u0026#34;\u0026gt; \u0026lt;h3\u0026gt;{{keyword}}\u0026lt;/h3\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;script\u0026gt; import {ref,customRef} from \u0026#39;vue\u0026#39; export default { name:\u0026#39;Demo\u0026#39;, setup(){ // let keyword = ref(\u0026#39;hello\u0026#39;) //ä½¿ç”¨Vueå‡†å¤‡å¥½çš„å†…ç½®ref //è‡ªå®šä¹‰ä¸€ä¸ªmyRef function myRef(value,delay){ let timer //é€šè¿‡customRefå»å®ç°è‡ªå®šä¹‰ return customRef((track,trigger)=\u0026gt;{ return{ get(){ track() //å‘Šè¯‰Vueè¿™ä¸ªvalueå€¼æ˜¯éœ€è¦è¢«â€œè¿½è¸ªâ€çš„ return value }, set(newValue){ clearTimeout(timer) timer = setTimeout(()=\u0026gt;{ value = newValue trigger() //å‘Šè¯‰Vueå»æ›´æ–°ç•Œé¢ },delay) } } }) } let keyword = myRef(\u0026#39;hello\u0026#39;,500) //ä½¿ç”¨ç¨‹åºå‘˜è‡ªå®šä¹‰çš„ref return { keyword } } } \u0026lt;/script\u0026gt; 5.provide ä¸ inject ä½œç”¨ï¼šå®ç°ç¥–ä¸åä»£ç»„ä»¶é—´é€šä¿¡\nå¥—è·¯ï¼šçˆ¶ç»„ä»¶æœ‰ä¸€ä¸ª provide é€‰é¡¹æ¥æä¾›æ•°æ®ï¼Œåä»£ç»„ä»¶æœ‰ä¸€ä¸ª inject é€‰é¡¹æ¥å¼€å§‹ä½¿ç”¨è¿™äº›æ•°æ®\nå…·ä½“å†™æ³•ï¼š\nç¥–ç»„ä»¶ä¸­ï¼š\n1 2 3 4 5 6 setup(){ ...... let car = reactive({name:\u0026#39;å¥”é©°\u0026#39;,price:\u0026#39;40ä¸‡\u0026#39;}) provide(\u0026#39;car\u0026#39;,car) ...... } åä»£ç»„ä»¶ä¸­ï¼š\n1 2 3 4 5 6 setup(props,context){ ...... const car = inject(\u0026#39;car\u0026#39;) return {car} ...... } 6.å“åº”å¼æ•°æ®çš„åˆ¤æ–­ isRef: æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºä¸€ä¸ª ref å¯¹è±¡ isReactive: æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± reactive åˆ›å»ºçš„å“åº”å¼ä»£ç† isReadonly: æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± readonly åˆ›å»ºçš„åªè¯»ä»£ç† isProxy: æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± reactive æˆ–è€… readonly æ–¹æ³•åˆ›å»ºçš„ä»£ç† å››ã€Composition API çš„ä¼˜åŠ¿ 1.Options API å­˜åœ¨çš„é—®é¢˜ ä½¿ç”¨ä¼ ç»ŸOptionsAPIä¸­ï¼Œæ–°å¢æˆ–è€…ä¿®æ”¹ä¸€ä¸ªéœ€æ±‚ï¼Œå°±éœ€è¦åˆ†åˆ«åœ¨dataï¼Œmethodsï¼Œcomputedé‡Œä¿®æ”¹ ã€‚\n2.Composition API çš„ä¼˜åŠ¿ æˆ‘ä»¬å¯ä»¥æ›´åŠ ä¼˜é›…çš„ç»„ç»‡æˆ‘ä»¬çš„ä»£ç ï¼Œå‡½æ•°ã€‚è®©ç›¸å…³åŠŸèƒ½çš„ä»£ç æ›´åŠ æœ‰åºçš„ç»„ç»‡åœ¨ä¸€èµ·ã€‚\näº”ã€æ–°çš„ç»„ä»¶ 1.Fragment åœ¨Vue2ä¸­: ç»„ä»¶å¿…é¡»æœ‰ä¸€ä¸ªæ ¹æ ‡ç­¾ åœ¨Vue3ä¸­: ç»„ä»¶å¯ä»¥æ²¡æœ‰æ ¹æ ‡ç­¾, å†…éƒ¨ä¼šå°†å¤šä¸ªæ ‡ç­¾åŒ…å«åœ¨ä¸€ä¸ªFragmentè™šæ‹Ÿå…ƒç´ ä¸­ å¥½å¤„: å‡å°‘æ ‡ç­¾å±‚çº§, å‡å°å†…å­˜å ç”¨ 2.Teleport ä»€ä¹ˆæ˜¯Teleportï¼Ÿâ€”â€” Teleport æ˜¯ä¸€ç§èƒ½å¤Ÿå°†æˆ‘ä»¬çš„ç»„ä»¶htmlç»“æ„ç§»åŠ¨åˆ°æŒ‡å®šä½ç½®çš„æŠ€æœ¯ã€‚\n1 2 3 4 5 6 7 8 \u0026lt;teleport to=\u0026#34;ç§»åŠ¨ä½ç½®\u0026#34;\u0026gt; \u0026lt;div v-if=\u0026#34;isShow\u0026#34; class=\u0026#34;mask\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;dialog\u0026#34;\u0026gt; \u0026lt;h3\u0026gt;æˆ‘æ˜¯ä¸€ä¸ªå¼¹çª—\u0026lt;/h3\u0026gt; \u0026lt;button @click=\u0026#34;isShow = false\u0026#34;\u0026gt;å…³é—­å¼¹çª—\u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/teleport\u0026gt; 3.Suspense ç­‰å¾…å¼‚æ­¥ç»„ä»¶æ—¶æ¸²æŸ“ä¸€äº›é¢å¤–å†…å®¹ï¼Œè®©åº”ç”¨æœ‰æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ\nä½¿ç”¨æ­¥éª¤ï¼š\nå¼‚æ­¥å¼•å…¥ç»„ä»¶\n1 2 import {defineAsyncComponent} from \u0026#39;vue\u0026#39; const Child = defineAsyncComponent(()=\u0026gt;import(\u0026#39;./components/Child.vue\u0026#39;)) ä½¿ç”¨SuspenseåŒ…è£¹ç»„ä»¶ï¼Œå¹¶é…ç½®å¥½default ä¸ fallback\n1 2 3 4 5 6 7 8 9 10 11 12 13 \u0026lt;template\u0026gt; \u0026lt;div class=\u0026#34;app\u0026#34;\u0026gt; \u0026lt;h3\u0026gt;æˆ‘æ˜¯Appç»„ä»¶\u0026lt;/h3\u0026gt; \u0026lt;Suspense\u0026gt; \u0026lt;template v-slot:default\u0026gt; \u0026lt;Child/\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;template v-slot:fallback\u0026gt; \u0026lt;h3\u0026gt;åŠ è½½ä¸­.....\u0026lt;/h3\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;/Suspense\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/template\u0026gt; å…­ã€å…¶ä»– 1.å…¨å±€APIçš„è½¬ç§» Vue 2.x æœ‰è®¸å¤šå…¨å±€ API å’Œé…ç½®ã€‚\nä¾‹å¦‚ï¼šæ³¨å†Œå…¨å±€ç»„ä»¶ã€æ³¨å†Œå…¨å±€æŒ‡ä»¤ç­‰ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 //æ³¨å†Œå…¨å±€ç»„ä»¶ Vue.component(\u0026#39;MyButton\u0026#39;, { data: () =\u0026gt; ({ count: 0 }), template: \u0026#39;\u0026lt;button @click=\u0026#34;count++\u0026#34;\u0026gt;Clicked {{ count }} times.\u0026lt;/button\u0026gt;\u0026#39; }) //æ³¨å†Œå…¨å±€æŒ‡ä»¤ Vue.directive(\u0026#39;focus\u0026#39;, { inserted: el =\u0026gt; el.focus() } Vue3.0ä¸­å¯¹è¿™äº›APIåšå‡ºäº†è°ƒæ•´ï¼š\nå°†å…¨å±€çš„APIï¼Œå³ï¼šVue.xxxè°ƒæ•´åˆ°åº”ç”¨å®ä¾‹ï¼ˆappï¼‰ä¸Š 2.x å…¨å±€ APIï¼ˆVueï¼‰ 3.x å®ä¾‹ API (app) Vue.config.xxxx app.config.xxxx Vue.config.productionTip ç§»é™¤ Vue.component app.component Vue.directive app.directive Vue.mixin app.mixin Vue.use app.use Vue.prototype app.config.globalProperties 2.å…¶ä»–æ”¹å˜ dataé€‰é¡¹åº”å§‹ç»ˆè¢«å£°æ˜ä¸ºä¸€ä¸ªå‡½æ•°ã€‚\nè¿‡åº¦ç±»åçš„æ›´æ”¹ï¼š\nVue2.xå†™æ³•\n1 2 3 4 5 6 7 8 .v-enter, .v-leave-to { opacity: 0; } .v-leave, .v-enter-to { opacity: 1; } Vue3.xå†™æ³•\n1 2 3 4 5 6 7 8 9 .v-enter-from, .v-leave-to { opacity: 0; } .v-leave-from, .v-enter-to { opacity: 1; } ç§»é™¤keyCodeä½œä¸º v-on çš„ä¿®é¥°ç¬¦ï¼ŒåŒæ—¶ä¹Ÿä¸å†æ”¯æŒconfig.keyCodes\nç§»é™¤v-on.nativeä¿®é¥°ç¬¦\nçˆ¶ç»„ä»¶ä¸­ç»‘å®šäº‹ä»¶\n1 2 3 4 \u0026lt;my-component v-on:close=\u0026#34;handleComponentEvent\u0026#34; v-on:click=\u0026#34;handleNativeClickEvent\u0026#34; /\u0026gt; å­ç»„ä»¶ä¸­å£°æ˜è‡ªå®šä¹‰äº‹ä»¶\n1 2 3 4 5 \u0026lt;script\u0026gt; export default { emits: [\u0026#39;close\u0026#39;] } \u0026lt;/script\u0026gt; ç§»é™¤è¿‡æ»¤å™¨ï¼ˆfilterï¼‰\nè¿‡æ»¤å™¨è™½ç„¶è¿™çœ‹èµ·æ¥å¾ˆæ–¹ä¾¿ï¼Œä½†å®ƒéœ€è¦ä¸€ä¸ªè‡ªå®šä¹‰è¯­æ³•ï¼Œæ‰“ç ´å¤§æ‹¬å·å†…è¡¨è¾¾å¼æ˜¯ â€œåªæ˜¯ JavaScriptâ€ çš„å‡è®¾ï¼Œè¿™ä¸ä»…æœ‰å­¦ä¹ æˆæœ¬ï¼Œè€Œä¸”æœ‰å®ç°æˆæœ¬ï¼å»ºè®®ç”¨æ–¹æ³•è°ƒç”¨æˆ–è®¡ç®—å±æ€§å»æ›¿æ¢è¿‡æ»¤å™¨ã€‚\n\u0026hellip;\u0026hellip;\n","date":"2025-12-13T22:36:00+08:00","permalink":"https://ye-guan-xing.github.io/p/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/","title":"vue3å¿«é€Ÿä¸Šæ‰‹"},{"content":"å†™ç»™å°ç™½çš„æ ¡å›­ OJ å¼€å‘è¯¦è§£ å‰è¨€ï¼šä¸ºä»€ä¹ˆéœ€è¦è¿™äº›é…ç½®ï¼Ÿ æƒ³è±¡ä¸€ä¸‹ä½ è¦å»ºä¸€åº§æˆ¿å­ ğŸ ï¼š\nvue.config.js = æˆ¿å­çš„æ–½å·¥å›¾çº¸å’Œæ–½å·¥è§„åˆ™ main.js = æˆ¿å­çš„åœ°åŸºå’Œä¸»è¦ç»“æ„ App.vue = æˆ¿å­çš„å¤–å£³æ¡†æ¶ router = æˆ¿å­çš„å¯¼èˆªç³»ç»Ÿï¼ˆæˆ¿é—´åˆ†å¸ƒå›¾ï¼‰ layout = æˆ¿å­çš„è£…ä¿®å¸ƒå±€ï¼ˆæ¯ä¸ªæˆ¿é—´çš„å›ºå®šæ‘†è®¾ï¼‰ ä¸‹é¢æˆ‘ä¸€æ­¥æ­¥æ‹†è§£ï¼Œä¿è¯ä½ èƒ½å®Œå…¨çœ‹æ‡‚ï¼\næ³¨ï¼šæœ¬æ–‡åŸºäº Vue3 å¼€å‘ï¼Œå¦‚æœä½ ç”¨çš„æ˜¯ Vue2ï¼Œè¯·è‡ªè¡Œä¿®æ”¹ã€‚ çš„æœ¬ä¸ªé¡¹ç›®çš„ä»£ç å¯ä»¥çœ‹è¿™ä¸ªä»“åº“ï¼šä»“åº“åœ°å€\nvue.config.js è¿™ä¸ªæ–‡ä»¶å‘Šè¯‰ Vue é¡¹ç›®â€œæ€ä¹ˆå¹²æ´»â€ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 // å°±åƒç»™å·¥äººè¯´ï¼šä»ç¯å¢ƒå˜é‡è¯»å–æ¥å£åœ°å€ï¼Œé»˜è®¤ç”¨\u0026#34;/api\u0026#34; const VUE_APP_BASE_API = process.env.VUE_APP_BASE_API || \u0026#34;/api\u0026#34;; module.exports = { devServer: { port: 8081, // å¼€å‘æœåŠ¡å™¨ç«¯å£ï¼ˆæˆ¿å­å»ºåœ¨8081å·åœ°çš®ï¼‰ open: true, // è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼ˆæˆ¿å­å»ºå¥½è‡ªåŠ¨å¼€é—¨ï¼‰ proxy: { // é…ç½®ä»£ç†ï¼šæŠŠæœ¬åœ°/apiå¼€å¤´çš„è¯·æ±‚è½¬å‘åˆ°çœŸæ­£çš„åç«¯æœåŠ¡å™¨ \u0026#34;/api\u0026#34;: { target: \u0026#34;http://real-backend.com\u0026#34;, // çœŸæ­£çš„åç«¯åœ°å€ changeOrigin: true, // æ”¹å˜è¯·æ±‚æºï¼ˆå‡è£…æ˜¯åŒæºçš„ï¼‰ pathRewrite: { \u0026#34;^/api\u0026#34;: \u0026#34;\u0026#34; }, // è½¬å‘æ—¶å»æ‰/apiå‰ç¼€ ws: false, // å…³é—­WebSocketä»£ç†ï¼ˆé¿å…å†²çªï¼‰ }, }, }, }; é€šä¿—ç†è§£ï¼š\nå¼€å‘æ—¶ï¼Œå‰ç«¯åœ¨localhost:8081è¿è¡Œï¼Œåç«¯å¯èƒ½åœ¨localhost:8080æˆ–å…¶ä»–åœ°æ–¹ã€‚é…ç½®ä»£ç†åï¼Œå‰ç«¯è®¿é—®/api/useræ—¶ï¼Œä¼šè‡ªåŠ¨è½¬å‘åˆ°http://real-backend.com/userï¼Œè§£å†³äº†è·¨åŸŸé—®é¢˜ã€‚\näºŒã€åœ°åŸºå»ºè®¾ï¼šmain.js è¿™æ˜¯æ•´ä¸ªåº”ç”¨çš„å¯åŠ¨å…¥å£ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 // 1. å¯¼å…¥Vueæ¡†æ¶ï¼ˆæ‹¿åˆ°å»ºæˆ¿å­çš„å·¥å…·åŒ…ï¼‰ import { createApp } from \u0026#34;vue\u0026#34;; // 2. å¯¼å…¥ä¸‰ä¸ªæ ¸å¿ƒæ¨¡å—ï¼ˆä¸‰å¤§ä»¶ï¼‰ import App from \u0026#34;./App.vue\u0026#34;; // æˆ¿å­è“å›¾ import router from \u0026#34;./router\u0026#34;; // å¯¼èˆªç³»ç»Ÿ import store from \u0026#34;./store\u0026#34;; // ä¸­å¤®ä»“åº“ï¼ˆå­˜æ•°æ®ï¼‰ // 3. å¯¼å…¥UIç»„ä»¶åº“ï¼ˆé¢„åˆ¶å¥½çš„é—¨çª—ã€å®¶å…·ï¼‰ import ElementPlus from \u0026#34;element-plus\u0026#34;; // 4. åˆ›å»ºVueåº”ç”¨å®ä¾‹ï¼ˆå¼€å§‹æ–½å·¥ï¼‰ const app = createApp(App); // 5. å®‰è£…å„ç§åŠŸèƒ½æ¨¡å— app.use(router); // å®‰è£…å¯¼èˆªç³»ç»Ÿ app.use(store); // å®‰è£…ä¸­å¤®ä»“åº“ app.use(ElementPlus); // å®‰è£…é¢„åˆ¶å®¶å…· // 6. æŒ‚è½½åˆ°é¡µé¢ï¼ˆæŠŠå»ºå¥½çš„æˆ¿å­æ”¾åˆ°#appè¿™ä¸ªåœ°å—ä¸Šï¼‰ app.mount(\u0026#34;#app\u0026#34;); ä¸€å¼ å›¾çœ‹æ‡‚ï¼š\n1 2 æµè§ˆå™¨æ‰“å¼€ â†’ main.jså¯åŠ¨ â†’ åˆ›å»ºVueå®ä¾‹ â†’ æŒ‚è½½è·¯ç”±/çŠ¶æ€ç®¡ç†/UIåº“ â†’ æ¸²æŸ“App.vue â†’ æ˜¾ç¤ºé¡µé¢ ä¸‰ã€æˆ¿å­å¤–å£³ï¼šApp.vue è¿™æ˜¯æœ€å¤–å±‚çš„å®¹å™¨ï¼Œæ‰€æœ‰é¡µé¢éƒ½è£…åœ¨è¿™é‡Œï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 \u0026lt;template\u0026gt; \u0026lt;!-- è¿™é‡Œå°±æ˜¯ä¸€ä¸ªåŠ¨æ€å±•ç¤ºåŒºï¼Œæ ¹æ®URLæ˜¾ç¤ºä¸åŒé¡µé¢ --\u0026gt; \u0026lt;router-view /\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;script setup\u0026gt; // è¿™é‡Œæ˜¯ç©ºçš„ï¼Œå› ä¸ºè¿™ä¸ªç»„ä»¶åªè´Ÿè´£\u0026#34;è£…ä¸œè¥¿\u0026#34;ï¼Œä¸å¤„ç†å…·ä½“ä¸šåŠ¡ \u0026lt;/script\u0026gt; \u0026lt;style lang=\u0026#34;scss\u0026#34;\u0026gt; /* å¯¼å…¥å…¨å±€æ ·å¼ï¼ˆå…¨æˆ¿å­é€šç”¨ï¼‰ */ @import \u0026#34;@/assets/styles/variables.scss\u0026#34;; // é¢œè‰²/å°ºå¯¸å˜é‡ @import \u0026#34;@/assets/styles/common.scss\u0026#34;; // å…¬å…±æ ·å¼ \u0026lt;/style\u0026gt; é‡è¦æ¦‚å¿µï¼š\n\u0026lt;router-view /\u0026gt; å°±åƒä¸€ä¸ªå¹»ç¯ç‰‡æŠ•å½±ä»ªï¼ŒURL å˜åŒ–æ—¶ï¼Œè‡ªåŠ¨åˆ‡æ¢æ˜¾ç¤ºçš„å†…å®¹ å…¨å±€æ ·å¼åœ¨è¿™é‡Œå¼•å…¥ï¼Œæ‰€æœ‰å­é¡µé¢éƒ½èƒ½ç”¨è¿™äº›æ ·å¼ å››ã€æˆ¿é—´å¸ƒå±€ï¼šMainLayout.vue è¿™æ˜¯é¡µé¢çš„é€šç”¨å¸ƒå±€æ¨¡æ¿ï¼ˆåƒé…’åº—çš„æ ‡å‡†é—´è£…ä¿®ï¼‰ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 \u0026lt;template\u0026gt; \u0026lt;div class=\u0026#34;main-layout\u0026#34;\u0026gt; \u0026lt;!-- é¡¶éƒ¨å¯¼èˆªæ ï¼ˆæ¯ä¸ªé¡µé¢éƒ½æœ‰ï¼‰ --\u0026gt; \u0026lt;AppNavbar /\u0026gt; \u0026lt;!-- ä¸»è¦å†…å®¹åŒºï¼ˆä¼šå˜åŒ–çš„éƒ¨åˆ†ï¼‰ --\u0026gt; \u0026lt;main class=\u0026#34;content\u0026#34;\u0026gt; \u0026lt;router-view /\u0026gt; \u0026lt;!-- è¿™é‡Œæ˜¾ç¤ºå…·ä½“é¡µé¢ --\u0026gt; \u0026lt;/main\u0026gt; \u0026lt;!-- åº•éƒ¨é¡µè„šï¼ˆæ¯ä¸ªé¡µé¢éƒ½æœ‰ï¼‰ --\u0026gt; \u0026lt;AppFooter /\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/template\u0026gt; å¸ƒå±€é€»è¾‘ï¼š\n1 2 3 4 5 6 7 8 9 10 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ å¯¼èˆªæ  Navbar â”‚ â† å›ºå®šï¼Œæ¯ä¸ªé¡µé¢éƒ½æœ‰ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”‚ \u0026lt;router-view\u0026gt; â”‚ â† åŠ¨æ€å˜åŒ–çš„éƒ¨åˆ† â”‚ (å½“å‰è·¯ç”±é¡µé¢) â”‚ â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ é¡µè„š Footer â”‚ â† å›ºå®šï¼Œæ¯ä¸ªé¡µé¢éƒ½æœ‰ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ äº”ã€å¯¼èˆªç³»ç»Ÿï¼šè·¯ç”±é…ç½® 1. è·¯ç”±è§„åˆ™ï¼ˆroutes.jsï¼‰ è¿™æ˜¯æˆ¿é—´åˆ†å¸ƒå›¾ï¼Œå‘Šè¯‰ç³»ç»Ÿæ¯ä¸ª URL å¯¹åº”å“ªä¸ªé¡µé¢ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 const routes = [ { path: \u0026#34;/\u0026#34;, // è®¿é—®è·¯å¾„ component: MainLayout, // ç”¨å“ªä¸ªå¸ƒå±€æ¨¡æ¿ redirect: \u0026#34;/home\u0026#34;, // é‡å®šå‘åˆ°é¦–é¡µ children: [ // å­è·¯ç”±ï¼ˆå¸ƒå±€å†…çš„å…·ä½“å†…å®¹ï¼‰ { path: \u0026#34;home\u0026#34;, // å®é™…è·¯å¾„ï¼š/home name: \u0026#34;Home\u0026#34;, // è·¯ç”±åå­—ï¼ˆæ–¹ä¾¿è·³è½¬ï¼‰ component: () =\u0026gt; import(\u0026#34;@/views/AppHome.vue\u0026#34;), // æ‡’åŠ è½½ç»„ä»¶ meta: { title: \u0026#34;é¦–é¡µ\u0026#34; }, // é¢å¤–ä¿¡æ¯ï¼ˆé¡µé¢æ ‡é¢˜ã€æƒé™è¦æ±‚ç­‰ï¼‰ }, { path: \u0026#34;problems\u0026#34;, name: \u0026#34;ProblemList\u0026#34;, component: () =\u0026gt; import(\u0026#34;@/views/problem/ProblemList.vue\u0026#34;), meta: { title: \u0026#34;é¢˜ç›®åˆ—è¡¨\u0026#34; }, }, ], }, { path: \u0026#34;/login\u0026#34;, // ç™»å½•é¡µä¸éœ€è¦MainLayoutå¸ƒå±€ component: () =\u0026gt; import(\u0026#34;@/views/login/AppLogin.vue\u0026#34;), meta: { title: \u0026#34;ç™»å½•\u0026#34;, requiresGuest: true }, // ä»…æ¸¸å®¢å¯è®¿é—® }, ]; è·¯ç”±ç±»å‹ï¼š\nå…¬å…±è·¯ç”±ï¼šæ‰€æœ‰äººå¯è®¿é—®ï¼ˆé¦–é¡µã€é¢˜ç›®åˆ—è¡¨ï¼‰ ç™»å½•è·¯ç”±ï¼šéœ€è¦ç™»å½•æ‰èƒ½è®¿é—®ï¼ˆä¸ªäººä¸­å¿ƒï¼‰ ç®¡ç†å‘˜è·¯ç”±ï¼šéœ€è¦ç®¡ç†å‘˜æƒé™ï¼ˆé¢˜ç›®ç®¡ç†ï¼‰ 404 è·¯ç”±ï¼šæ‰¾ä¸åˆ°é¡µé¢æ—¶æ˜¾ç¤º 2. è·¯ç”±å®ˆå«ï¼ˆindex.jsï¼‰ è¿™æ˜¯é—¨å£çš„ä¿å®‰ï¼Œæ§åˆ¶è°èƒ½è¿›å“ªä¸ªæˆ¿é—´ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 router.beforeEach(async (to, from, next) =\u0026gt; { // 1. è®¾ç½®é¡µé¢æ ‡é¢˜ if (to.meta.title) { document.title = `${to.meta.title} - OJå¹³å°`; } // 2. æ£€æŸ¥æ˜¯å¦ç™»å½•ï¼ˆçœ‹æœ‰æ²¡æœ‰tokenï¼‰ const hasToken = store.getters.token; if (hasToken) { // å·²ç™»å½•çš„æƒ…å†µ if (to.path === \u0026#34;/login\u0026#34;) { next(\u0026#34;/\u0026#34;); // å·²ç™»å½•è¿˜å»ç™»å½•é¡µï¼Ÿè·³å›é¦–é¡µï¼ } else { // æ£€æŸ¥æ˜¯å¦æ˜¯ç®¡ç†å‘˜é¡µé¢ if (to.meta.requiresAdmin \u0026amp;\u0026amp; !isAdmin) { next(\u0026#34;/\u0026#34;); // ä¸æ˜¯ç®¡ç†å‘˜ï¼Ÿæ»šå›é¦–é¡µï¼ } else { next(); // æ”¾è¡Œï¼ } } } else { // æœªç™»å½•çš„æƒ…å†µ if (ç™½åå•.includes(to.path)) { next(); // ç™»å½•é¡µå¯ä»¥è¿› } else { next(`/login?redirect=${to.path}`); // å»ç™»å½•ï¼Œè®°ä¸‹æ¥è·¯ } } }); ä¿å®‰çš„å·¥ä½œæµç¨‹ï¼š\n1 2 3 4 5 6 7 8 9 ç”¨æˆ·è®¿é—®é¡µé¢ â†’ ä¿å®‰æ‹¦æˆª â†’ â†“ åˆ¤æ–­æ˜¯å¦ç™»å½•ï¼Ÿ â”œâ”€ å·²ç™»å½• â†’ æƒ³è¿›ç™»å½•é¡µï¼Ÿâ†’ è¸¢å›é¦–é¡µ â”‚ â†’ æƒ³è¿›ç®¡ç†é¡µï¼Ÿâ†’ æ£€æŸ¥æƒé™ â†’ æ”¾è¡Œ/è¸¢å› â”‚ â†’ è¿›æ™®é€šé¡µ â†’ ç›´æ¥æ”¾è¡Œ â”‚ â””â”€ æœªç™»å½• â†’ æƒ³è¿›ç™»å½•é¡µï¼Ÿâ†’ æ”¾è¡Œ â†’ æƒ³è¿›å…¶ä»–é¡µï¼Ÿâ†’ å¸¦åˆ°ç™»å½•é¡µï¼ˆè®°ä½æƒ³å»å“ªï¼‰ å…­ã€æƒé™æ§åˆ¶é€»è¾‘ 1. è·¯ç”±å…ƒä¿¡æ¯ï¼ˆmeta å­—æ®µï¼‰ 1 2 3 4 5 6 meta: { title: \u0026#34;é¡µé¢æ ‡é¢˜\u0026#34;, requiresAuth: true, // éœ€è¦ç™»å½• requiresAdmin: true, // éœ€è¦ç®¡ç†å‘˜ requiresGuest: true // ä»…æ¸¸å®¢ï¼ˆæœªç™»å½•ï¼‰ } 2. ç”¨æˆ·è§’è‰²åˆ¤æ–­ 1 2 3 4 5 6 7 8 9 10 // ä»storeè·å–ç”¨æˆ·ä¿¡æ¯ const userInfo = store.getters.userInfo; // åˆ¤æ–­æ˜¯å¦æ˜¯ç®¡ç†å‘˜ const isAdmin = userInfo.roles?.includes(\u0026#34;admin\u0026#34;); // æ ¹æ®è§’è‰²æ˜¾ç¤ºä¸åŒèœå• \u0026lt;el-menu v-if=\u0026#34;isAdmin\u0026#34;\u0026gt; \u0026lt;el-menu-item\u0026gt;é¢˜ç›®ç®¡ç†\u0026lt;/el-menu-item\u0026gt; \u0026lt;/el-menu\u0026gt;; ä¸ƒã€å¼€å‘æµç¨‹æ€»ç»“ æ­¥éª¤ 1ï¼šç¯å¢ƒé…ç½® é…ç½®vue.config.jsï¼ˆä»£ç†ã€ç«¯å£ç­‰ï¼‰ é…ç½®ç¯å¢ƒå˜é‡ï¼ˆæ¥å£åœ°å€ç­‰ï¼‰ æ­¥éª¤ 2ï¼šé¡¹ç›®åˆå§‹åŒ– main.jså¼•å…¥æ ¸å¿ƒä¾èµ– App.vueè®¾ç½®è·¯ç”±å®¹å™¨å’Œå…¨å±€æ ·å¼ æ­¥éª¤ 3ï¼šå¸ƒå±€è®¾è®¡ åˆ›å»ºMainLayout.vueï¼ˆé€šç”¨å¸ƒå±€ï¼‰ è®¾è®¡å¯¼èˆªæ ã€é¡µè„šç­‰å…¬å…±ç»„ä»¶ æ­¥éª¤ 4ï¼šè·¯ç”±é…ç½® åœ¨routes.jså®šä¹‰æ‰€æœ‰è·¯ç”± æŒ‰éœ€è®¾ç½®æƒé™ï¼ˆpublicã€authã€adminï¼‰ åœ¨router/index.jsé…ç½®è·¯ç”±å®ˆå« æ­¥éª¤ 5ï¼šé¡µé¢å¼€å‘ åœ¨views/ç›®å½•åˆ›å»ºé¡µé¢ç»„ä»¶ æ ¹æ®è·¯ç”±é…ç½®è¿æ¥é¡µé¢ æ­¥éª¤ 6ï¼šæƒé™é›†æˆ ç™»å½•åä¿å­˜ token åˆ° store è·¯ç”±å®ˆå«æ ¹æ® token å’Œè§’è‰²æ§åˆ¶è®¿é—® é¡µé¢å†…æ ¹æ®è§’è‰²æ˜¾ç¤ºä¸åŒå†…å®¹ å¸¸è§é—®é¢˜è§£ç­” Q1ï¼šä¸ºä»€ä¹ˆéœ€è¦è·¯ç”±å®ˆå«ï¼Ÿ Aï¼šå°±åƒå­¦æ ¡å¤§é—¨ï¼Œè¦æ£€æŸ¥å­¦ç”Ÿè¯ï¼ˆç™»å½•ï¼‰ã€æƒé™å¡ï¼ˆè§’è‰²ï¼‰ï¼Œé˜²æ­¢æ— å…³äººå‘˜è¿›å…¥ã€‚\nQ2ï¼šæ‡’åŠ è½½ï¼ˆ() =\u0026gt; import()ï¼‰æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ Aï¼šæŒ‰éœ€åŠ è½½ï¼Œé¦–æ¬¡æ‰“å¼€åªä¸‹è½½é¦–é¡µä»£ç ï¼Œå…¶ä»–é¡µé¢ç‚¹åˆ°äº†å†ä¸‹è½½ï¼Œæé«˜é¦–æ¬¡åŠ è½½é€Ÿåº¦ã€‚\nQ3ï¼šä¸ºä»€ä¹ˆ token è¦å­˜ store è€Œä¸æ˜¯ localStorageï¼Ÿ Aï¼šstore æ˜¯å“åº”å¼çš„ï¼Œç»„ä»¶èƒ½å®æ—¶æ„ŸçŸ¥ç™»å½•çŠ¶æ€å˜åŒ–ï¼ŒlocalStorage éœ€è¦æ‰‹åŠ¨ç›‘å¬ã€‚\nQ4ï¼šå¦‚ä½•æ–°å¢ä¸€ä¸ªé¡µé¢ï¼Ÿ 1 2 1. åœ¨views/åˆ›å»ºç»„ä»¶ â†’ 2. åœ¨routes.jsæ·»åŠ è·¯ç”± â†’ 3. åœ¨å¯¼èˆªæ æ·»åŠ èœå•ï¼ˆå¦‚æœéœ€è¦ï¼‰ â†’ 4. æµ‹è¯•è®¿é—® æœ€åçš„å°è´´å£« é…ç½®å…ˆè¡Œï¼šå…ˆé…å¥½è·¯ç”±å’Œæƒé™ï¼Œå†å¼€å‘é¡µé¢ åˆ†æ¨¡å—å¼€å‘ï¼šç”¨æˆ·æ¨¡å—ã€é¢˜ç›®æ¨¡å—ã€æäº¤æ¨¡å—åˆ†å¼€ æƒé™ç»†åŒ–ï¼šæŒ‰é’®çº§åˆ«ä¹Ÿè¦æ§åˆ¶æƒé™ é”™è¯¯å¤„ç†ï¼š404 é¡µé¢ã€æ— æƒé™æç¤ºè¦å‹å¥½ è®°ä½è¿™ä¸ªå¼€å‘æµç¨‹ï¼Œä½ å°±èƒ½æ­å»ºä¸€ä¸ªç»“æ„æ¸…æ™°ã€æƒé™åˆ†æ˜çš„æ ¡å›­ OJ ç³»ç»Ÿäº†ï¼åŠ æ²¹ ğŸ’ª\n","date":"2025-12-06T12:36:00+08:00","permalink":"https://ye-guan-xing.github.io/p/%E6%A0%A1%E5%9B%ADoj%E5%BC%80%E5%8F%91%E4%B9%8B%E5%B8%83%E5%B1%80%E9%80%BB%E8%BE%91/","title":"æ ¡å›­OJå¼€å‘ä¹‹å¸ƒå±€é€»è¾‘"},{"content":"æ‰‹æŠŠæ‰‹æ•™ä½ ç†è§£æ ¡å›­ OJ ç™»å½•ç³»ç»Ÿï¼šä»è¾“å…¥å¯†ç åˆ°è¿›å…¥é¦–é¡µ ä¸€ã€å‰è¨€ï¼šç™»å½•ç³»ç»Ÿçš„â€œä¸‰ä»¶å¥—â€ æƒ³è±¡ä¸€ä¸‹ä½ è¦è¿›å®¿èˆæ¥¼ï¼š\né—¨ç¦å¡ï¼ˆtokenï¼‰ - è¯æ˜ä½ æ˜¯æ¥¼é‡Œçš„å­¦ç”Ÿ ä¿å®‰ï¼ˆè·¯ç”±å®ˆå«ï¼‰ - æ£€æŸ¥ä½ æœ‰æ²¡æœ‰é—¨ç¦å¡ æ¥¼é•¿ï¼ˆVuexï¼‰ - ç™»è®°ä½ çš„å…¥ä½ä¿¡æ¯ æˆ‘ä»¬çš„ç™»å½•ç³»ç»Ÿå°±æ˜¯è¿™æ ·çš„ä¸‰çº§éªŒè¯æœºåˆ¶ï¼\näºŒã€æ ¸å¿ƒæ¨¡å—è¯¦è§£ 1. Token ç®¡ç†ç³»ç»Ÿ - auth.jsï¼ˆä½ çš„ç”µå­é—¨ç¦å¡ï¼‰ è¿™ä¸ªæ–‡ä»¶ä¸“é—¨ç®¡ç†ä½ çš„â€œé—¨ç¦å¡â€ï¼ˆtokenï¼‰ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 // å°±åƒå®¿èˆæ¥¼çš„é—¨ç¦ç³»ç»Ÿ const TOKEN_KEY = \u0026#34;oj_user_token\u0026#34;; // é—¨ç¦å¡çš„ç¼–å· // è¿›é—¨æ—¶åˆ·å¡ï¼ˆè·å–tokenï¼‰ export function getToken() { return localStorage.getItem(TOKEN_KEY); } // åŠæ–°å¡ï¼ˆè®¾ç½®tokenï¼‰ export function setToken(token) { localStorage.setItem(TOKEN_KEY, token); } // å¡ä¸¢äº†/æ¯•ä¸šäº†ï¼ˆç§»é™¤tokenï¼‰ export function removeToken() { localStorage.removeItem(TOKEN_KEY); } // æ£€æŸ¥æœ‰æ²¡æœ‰å¡ï¼ˆæ˜¯å¦å·²ç™»å½•ï¼‰ export function isAuthenticated() { return !!getToken(); // !!å°±æ˜¯æŠŠä»»ä½•å€¼å˜æˆtrue/falseçš„é­”æ³• } æ¯”å–»ç†è§£ï¼š\nlocalStorage = ä½ çš„é’±åŒ…ï¼Œä¸“é—¨æ”¾é‡è¦å¡ç‰‡ TOKEN_KEY = å¡åŒ…é‡Œçš„ç‰¹å®šå¡æ§½ï¼Œåªæ”¾é—¨ç¦å¡ æ¯æ¬¡è¿›å‡ºï¼Œä¿å®‰åªçœ‹è¿™ä¸ªå¡æ§½æœ‰æ²¡æœ‰å¡ 2. é€šä¿¡ä¸“å‘˜ - request.jsï¼ˆä½ çš„ä¸“å±ä¿¡ä½¿ï¼‰ è¿™ä¸ªæ–‡ä»¶è´Ÿè´£å’Œåç«¯æœåŠ¡å™¨å¯¹è¯ï¼Œå°±åƒä½ æœ‰ä¸ªä¸“å±ä¿¡ä½¿ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 import axios from \u0026#34;axios\u0026#34;; // ä¿¡ä½¿å·¥å…·åŒ… import { getToken, removeToken } from \u0026#34;./auth\u0026#34;; // å¸¦ä¸Š/é€€å›é—¨ç¦å¡ import { ElMessage } from \u0026#34;element-plus\u0026#34;; // æ¶ˆæ¯æç¤ºå–‡å­ // æ‹›å‹Ÿä¸€ä¸ªä¸“å±ä¿¡ä½¿ const request = axios.create({ baseURL: process.env.VUE_APP_BASE_API || \u0026#34;/api\u0026#34;, // æœåŠ¡å™¨åœ°å€ timeout: 10000, // 10ç§’æ²¡å›å¤å°±ç®—è¶…æ—¶ }); // ã€å‡ºå‘å‰çš„å‡†å¤‡ã€‘è¯·æ±‚æ‹¦æˆªå™¨ - ä¿¡ä½¿å‡ºå‘å‰åšçš„äº‹ request.interceptors.request.use((config) =\u0026gt; { const token = getToken(); // ä»é’±åŒ…æ‹¿å‡ºé—¨ç¦å¡ if (token) { config.headers[\u0026#34;Authorization\u0026#34;] = `Bearer ${token}`; // æŠŠå¡æŒ‚åœ¨è„–å­ä¸Š } return config; // å¯ä»¥å‡ºå‘äº†ï¼ }); // ã€å›æ¥åçš„å¤„ç†ã€‘å“åº”æ‹¦æˆªå™¨ - ä¿¡ä½¿å›æ¥ååšçš„äº‹ request.interceptors.response.use( (response) =\u0026gt; { const res = response.data; // æ‰“å¼€ä¿¡å° if (res.code === 1) { // å¦‚æœä¿¡ä¸Šè¯´\u0026#34;ä¸€åˆ‡æ­£å¸¸\u0026#34; return res.data; // æŠŠçœŸæ­£çš„å†…å®¹ç»™ä½  } else { // ä¿¡ä¸Šè¯´\u0026#34;æœ‰é—®é¢˜\u0026#34; ElMessage.error(res.message || \u0026#34;è¯·æ±‚å¤±è´¥\u0026#34;); // ç”¨å–‡å­å¹¿æ’­é—®é¢˜ throw new Error(res.message || \u0026#34;è¯·æ±‚å¤±è´¥\u0026#34;); // æŠ›å‡ºé—®é¢˜ } }, (error) =\u0026gt; { // ä¿¡ä½¿è‡ªå·±å‡ºé—®é¢˜äº†ï¼ˆç½‘ç»œé”™è¯¯ï¼‰ const { status } = error.response || {}; switch (status) { case 401: // é—¨ç¦å¡è¿‡æœŸ ElMessage.error(\u0026#34;ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•\u0026#34;); removeToken(); // æ‰”æ‰è¿‡æœŸå¡ if (window.location.pathname !== \u0026#34;/login\u0026#34;) { window.location.href = \u0026#34;/login\u0026#34;; // èµ¶å›ç™»å½•å¤„é‡æ–°åŠå¡ } break; case 403: // æƒé™ä¸è¶³ ElMessage.error(\u0026#34;æ²¡æœ‰æƒé™è®¿é—®\u0026#34;); break; default: ElMessage.error(\u0026#34;ç½‘ç»œé”™è¯¯\u0026#34;); } throw error; // æŠŠé—®é¢˜ç»§ç»­ä¸ŠæŠ¥ } ); ä¿¡ä½¿å·¥ä½œæµç¨‹å›¾ï¼š\n1 2 3 ä½ è¦å‘ä¿¡ â†’ ä¿¡ä½¿å‡ºå‘å‰ï¼ˆæ‹¦æˆªå™¨ï¼‰â†’ æ£€æŸ¥å¸¦æ²¡å¸¦é—¨ç¦å¡ â†’ å‡ºå‘é€ä¿¡ â†“ æœåŠ¡å™¨å›ä¿¡ â†’ ä¿¡ä½¿å›æ¥åï¼ˆæ‹¦æˆªå™¨ï¼‰â†’ æ£€æŸ¥ä¿¡çš„å†…å®¹ â†’ æ­£å¸¸å°±ç»™ä½ ï¼Œå¼‚å¸¸å°±å¹¿æ’­ 3. ç”¨æˆ·æœåŠ¡æ¥å£ - user.jsï¼ˆèƒ½åŠçš„å››ä»¶äº‹ï¼‰ è¿™ä¸ªæ–‡ä»¶å®šä¹‰äº†ä½ èƒ½è®©ä¿¡ä½¿åŠçš„å››ä»¶äº‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 import request from \u0026#34;@/utils/request\u0026#34;; // è°ƒç”¨åˆšæ‰çš„ä¿¡ä½¿ // 1. åŠé—¨ç¦å¡ï¼ˆç™»å½•ï¼‰ export function login(data) { return request({ url: \u0026#34;/user/login\u0026#34;, // å»\u0026#34;åŠå¡å¤„\u0026#34; method: \u0026#34;post\u0026#34;, // ç”¨\u0026#34;ç”³è¯·\u0026#34;çš„æ–¹å¼ data, // å¸¦ä¸Šèº«ä»½è¯æ˜ï¼ˆè´¦å·å¯†ç ï¼‰ }); } // 2. æ³¨å†Œæ–°èº«ä»½ï¼ˆæ³¨å†Œï¼‰ export function register(data) { return request({ url: \u0026#34;/user/register\u0026#34;, // å»\u0026#34;ç™»è®°å¤„\u0026#34; method: \u0026#34;post\u0026#34;, data, }); } // 3. æ›´æ–°ä¸ªäººä¿¡æ¯ï¼ˆä¿®æ”¹èµ„æ–™ï¼‰ export function updateUserInfo(data) { return request({ url: \u0026#34;/user/info\u0026#34;, // å»\u0026#34;èµ„æ–™ä¿®æ”¹å¤„\u0026#34; method: \u0026#34;put\u0026#34;, // ç”¨\u0026#34;ä¿®æ”¹\u0026#34;çš„æ–¹å¼ data, }); } // 4. æ³¨é”€é—¨ç¦å¡ï¼ˆé€€å‡ºç™»å½•ï¼‰ export function logout() { return request({ url: \u0026#34;/user/logout\u0026#34;, // å»\u0026#34;æ³¨é”€å¤„\u0026#34; method: \u0026#34;post\u0026#34;, }); } // 5. æŸ¥çœ‹ä¸ªäººæ¡£æ¡ˆï¼ˆè·å–ç”¨æˆ·ä¿¡æ¯ï¼‰ export function getUserInfo() { return request({ url: `/user/stats`, // å»\u0026#34;æ¡£æ¡ˆå®¤\u0026#34; method: \u0026#34;get\u0026#34;, }); } é€šä¿—ç†è§£ï¼š\næ¯ä¸ªexport functionå°±åƒä¸€å¼ åŠäº‹æŒ‡å— request()å°±æ˜¯è®©ä¿¡ä½¿æŒ‰æŒ‡å—åŠäº‹ è¿”å›å€¼æ˜¯ä¸€ä¸ªPromiseï¼ˆæ‰¿è¯ºä¹¦ï¼‰ï¼Œæ‰¿è¯ºä¼šç»™ä½ ç»“æœ 4. ç”¨æˆ·ç®¡ç†ä¸­å¿ƒ - user.js (store/modules)ï¼ˆæ¥¼é•¿çš„ç™»è®°ç°¿ï¼‰ è¿™é‡Œæ˜¯ Vuex çš„ç”¨æˆ·æ¨¡å—ï¼Œè´Ÿè´£ç®¡ç†æ‰€æœ‰ç”¨æˆ·ç›¸å…³çš„å…¨å±€çŠ¶æ€ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 // ã€çŠ¶æ€ä»“åº“ã€‘æ¥¼é•¿æ‰‹é‡Œçš„ç™»è®°ç°¿ const state = { token: getToken(), // å½“å‰æœ‰æ•ˆçš„é—¨ç¦å¡ userInfo: null, // ä½æˆ·çš„è¯¦ç»†ä¿¡æ¯ }; // ã€ä¿®æ”¹è§„åˆ™ã€‘æ¥¼é•¿èƒ½åšçš„ä¿®æ”¹æ“ä½œ const mutations = { SET_TOKEN: (state, token) =\u0026gt; { state.token = token; // ç™»è®°æ–°å¡ }, SET_USER_INFO: (state, userInfo) =\u0026gt; { state.userInfo = userInfo; // ç™»è®°ä½æˆ·ä¿¡æ¯ }, CLEAR_USER: (state) =\u0026gt; { state.token = \u0026#34;\u0026#34;; // æ³¨é”€å¡ç‰‡ state.userInfo = null; // æ¸…é™¤ä½æˆ·ä¿¡æ¯ removeToken(); // ä»é’±åŒ…é‡Œä¹Ÿæ‰”æ‰ }, }; // ã€åŠäº‹æµç¨‹ã€‘æ¥¼é•¿å¤„ç†äº‹åŠ¡çš„æµç¨‹ const actions = { // åŠç†å…¥ä½ï¼ˆç™»å½•ï¼‰ login({ commit }, userInfo) { return new Promise((resolve, reject) =\u0026gt; { // æƒ…å†µ1ï¼šæ¨¡æ‹Ÿæ¨¡å¼ï¼ˆå¼€å‘æ—¶ç”¨ï¼‰ if (useMock) { if (ç”¨æˆ·åå¯†ç æ­£ç¡®) { commit(\u0026#34;SET_TOKEN\u0026#34;, \u0026#34;ä¸´æ—¶å¡\u0026#34;); // å‘ä¸´æ—¶å¡ commit(\u0026#34;SET_USER_INFO\u0026#34;, { è§’è‰²: \u0026#34;ç®¡ç†å‘˜\u0026#34; }); // ç™»è®°ä¿¡æ¯ resolve(); // åŠå¥½äº†ï¼ } else { reject(\u0026#34;å¯†ç é”™äº†\u0026#34;); // åŠä¸äº† } } // æƒ…å†µ2ï¼šçœŸå®æ¨¡å¼ï¼ˆå®é™…ä¸Šçº¿ç”¨ï¼‰ else { apiLogin(userInfo).then((å“åº”) =\u0026gt; { if (å“åº”.æˆåŠŸ) { commit(\u0026#34;SET_TOKEN\u0026#34;, å“åº”.token); // å‘æ­£å¼å¡ commit(\u0026#34;SET_USER_INFO\u0026#34;, å“åº”.ç”¨æˆ·ä¿¡æ¯); // ç™»è®°ä¿¡æ¯ resolve(); // åŠå¥½äº†ï¼ } }); } }); }, // æŸ¥çœ‹ä½æˆ·æ¡£æ¡ˆï¼ˆè·å–ç”¨æˆ·ä¿¡æ¯ï¼‰ getInfo({ commit, state }) { return new Promise((resolve, reject) =\u0026gt; { if (!state.token) { reject(\u0026#34;ä½ æ²¡å¡å•Šï¼\u0026#34;); // æ²¡å¡çœ‹ä»€ä¹ˆæ¡£æ¡ˆ return; } // ...è·å–ä¿¡æ¯çš„é€»è¾‘ }); }, // åŠç†é€€å®¿ï¼ˆé€€å‡ºç™»å½•ï¼‰ logout({ commit }) { return new Promise((resolve, reject) =\u0026gt; { // 1. é€šçŸ¥æœåŠ¡å™¨æˆ‘è¦èµ°äº† apiLogout().then(() =\u0026gt; { // 2. æœ¬åœ°ä¹Ÿæ¸…ç† commit(\u0026#34;CLEAR_USER\u0026#34;); resolve(); }); }); }, }; Vuex æ ¸å¿ƒæ¦‚å¿µï¼ˆå¿…é¡»ç†è§£ï¼ï¼‰ï¼š\nstate = å½“å‰çš„çŠ¶æ€ï¼ˆç°åœ¨æœ‰ä»€ä¹ˆï¼‰ mutations = èƒ½åšä»€ä¹ˆä¿®æ”¹ï¼ˆåªèƒ½é€šè¿‡è¿™é‡Œæ”¹ï¼ï¼‰ actions = åšäº‹çš„æµç¨‹ï¼ˆå¯ä»¥åŒ…å«å¼‚æ­¥æ“ä½œï¼‰ ä¿®æ”¹çŠ¶æ€çš„æ ‡å‡†æµç¨‹ï¼š\n1 ä½ è¦æ”¹æ•°æ® â†’ è°ƒç”¨action â†’ actionè°ƒç”¨mutation â†’ mutationä¿®æ”¹state 5. å¿«æ·è®¿é—®é—¨ - getters.jsï¼ˆå¿«é€ŸæŸ¥è¯¢é€šé“ï¼‰ è¿™ä¸ªæ–‡ä»¶æä¾›å¿«é€ŸæŸ¥è¯¢çŠ¶æ€çš„æ–¹æ³•ï¼š\n1 2 3 4 5 const getters = { token: (state) =\u0026gt; state.user.token, // \u0026#34;ç»™æˆ‘å½“å‰çš„é—¨ç¦å¡\u0026#34; userInfo: (state) =\u0026gt; state.user.userInfo, // \u0026#34;ç»™æˆ‘ä½æˆ·ä¿¡æ¯\u0026#34; isLogin: (state) =\u0026gt; !!state.user.token, // \u0026#34;å‘Šè¯‰æˆ‘æœ‰æ²¡æœ‰å¡\u0026#34;ï¼ˆ!!è½¬å¸ƒå°”å€¼ï¼‰ }; ä¸ºä»€ä¹ˆéœ€è¦ gettersï¼Ÿ\nå°±åƒå›¾ä¹¦é¦†çš„æŸ¥è¯¢æœºï¼Œä¸ç”¨è‡ªå·±å»ä¹¦åº“ç¿» ç»Ÿä¸€çš„æŸ¥è¯¢æ¥å£ï¼Œé¿å…æ‹¼å†™é”™è¯¯ å¯ä»¥è®¡ç®—è¡ç”Ÿæ•°æ®ï¼ˆå¦‚isLoginï¼‰ 6. Vuex æ€»ä»“åº“ - index.jsï¼ˆæ‰€æœ‰ç™»è®°ç°¿çš„é›†åˆï¼‰ è¿™é‡Œæ˜¯ Vuex çš„å…¥å£æ–‡ä»¶ï¼Œæ•´åˆæ‰€æœ‰æ¨¡å—ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 import { createStore } from \u0026#34;vuex\u0026#34;; import getters from \u0026#34;./getters\u0026#34;; import user from \u0026#34;./modules/user\u0026#34;; export default createStore({ modules: { user, // ç”¨æˆ·ç™»è®°ç°¿ // problem, é¢˜ç›®ç™»è®°ç°¿ï¼ˆå¯ä»¥åç»­æ·»åŠ ï¼‰ // submission, æäº¤è®°å½•ç™»è®°ç°¿ }, getters, // å¿«é€ŸæŸ¥è¯¢é€šé“ }); æ¨¡å—åŒ–è®¾è®¡çš„å¥½å¤„ï¼š\nç”¨æˆ·æ•°æ®æ”¾useræ¨¡å— é¢˜ç›®æ•°æ®æ”¾problemæ¨¡å— æäº¤è®°å½•æ”¾submissionæ¨¡å— äº’ä¸å¹²æ‰°ï¼Œæ¸…æ™°æ˜äº† 7. ç™»å½•é¡µé¢ - AppLogin.vueï¼ˆå‰å°æ¥å¾…å¤„ï¼‰ è¿™æ˜¯ç”¨æˆ·çœ‹åˆ°çš„ç™»å½•ç•Œé¢ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 \u0026lt;template\u0026gt; \u0026lt;div class=\u0026#34;login-container\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;login-card\u0026#34;\u0026gt; \u0026lt;!-- æ ‡é¢˜åŒºåŸŸ --\u0026gt; \u0026lt;div class=\u0026#34;login-header\u0026#34;\u0026gt; \u0026lt;h2\u0026gt;OJå¹³å°ç™»å½•\u0026lt;/h2\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;!-- è¡¨å•åŒºåŸŸ --\u0026gt; \u0026lt;el-form @submit.prevent=\u0026#34;handleLogin\u0026#34;\u0026gt; \u0026lt;el-form-item prop=\u0026#34;username\u0026#34;\u0026gt; \u0026lt;el-input v-model=\u0026#34;formData.username\u0026#34; placeholder=\u0026#34;ç”¨æˆ·å\u0026#34; /\u0026gt; \u0026lt;/el-form-item\u0026gt; \u0026lt;el-form-item prop=\u0026#34;password\u0026#34;\u0026gt; \u0026lt;el-input v-model=\u0026#34;formData.password\u0026#34; type=\u0026#34;password\u0026#34; /\u0026gt; \u0026lt;/el-form-item\u0026gt; \u0026lt;el-form-item\u0026gt; \u0026lt;el-button @click=\u0026#34;handleLogin\u0026#34;\u0026gt;ç™»å½•\u0026lt;/el-button\u0026gt; \u0026lt;/el-form-item\u0026gt; \u0026lt;/el-form\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;script setup\u0026gt; import { ref, reactive } from \u0026#34;vue\u0026#34;; import { useRouter, useRoute } from \u0026#34;vue-router\u0026#34;; import { useStore } from \u0026#34;vuex\u0026#34;; import { ElMessage } from \u0026#34;element-plus\u0026#34;; // è·å–å·¥å…· const router = useRouter(); // å¯¼èˆªå‘˜ï¼ˆè´Ÿè´£è·³è½¬é¡µé¢ï¼‰ const route = useRoute(); // å½“å‰è·¯çº¿ä¿¡æ¯ const store = useStore(); // æ¥¼é•¿ï¼ˆVuexï¼‰ // è¡¨å•æ•°æ® const formData = reactive({ username: \u0026#34;\u0026#34;, password: \u0026#34;\u0026#34;, }); // ç™»å½•å‡½æ•° const handleLogin = async () =\u0026gt; { try { // 1. æ‰¾æ¥¼é•¿åŠå¡ï¼ˆè°ƒç”¨Vuexçš„loginï¼‰ await store.dispatch(\u0026#34;user/login\u0026#34;, { username: formData.username, password: formData.password, }); // 2. åŠå¡åç™»è®°è¯¦ç»†ä¿¡æ¯ï¼ˆè°ƒç”¨getInfoï¼‰ const userInfo = await store.dispatch(\u0026#34;user/getInfo\u0026#34;); // 3. æ¬¢è¿å…¥ä½ï¼ ElMessage.success(`æ¬¢è¿å›æ¥ï¼Œ${userInfo.username}ï¼`); // 4. å¯¼èˆªå‘˜å¸¦ä½ å»æƒ³å»çš„åœ°æ–¹ const redirect = route.query.redirect || \u0026#34;/home\u0026#34;; router.push(redirect); } catch (error) { // å‡ºé”™äº†ï¼Œå–‡å­å¹¿æ’­ ElMessage.error(error.message); } }; \u0026lt;/script\u0026gt; é¡µé¢ç»„ä»¶å…³é”®ç‚¹ï¼š\nuseRouter() - è·å–å¯¼èˆªå‘˜ï¼Œç”¨äºé¡µé¢è·³è½¬ useStore() - è·å–æ¥¼é•¿ï¼Œç”¨äºçŠ¶æ€ç®¡ç† store.dispatch() - è®©æ¥¼é•¿åŠäº‹ï¼ˆå¼‚æ­¥æ“ä½œï¼‰ router.push() - è®©å¯¼èˆªå‘˜å¸¦è·¯ ä¸‰ã€å®Œæ•´ç™»å½•æµç¨‹ï¼ˆæ•…äº‹ç‰ˆï¼‰ è®©æˆ‘ä»¬è·Ÿç€\u0026quot;å°æ˜\u0026quot;èµ°ä¸€éå®Œæ•´æµç¨‹ï¼š\nç¬¬ä¸€å¹•ï¼šæ¥åˆ°ç™»å½•é¡µé¢ å°æ˜æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥ OJ å¹³å°ç½‘å€ï¼Œçœ‹åˆ°ç™»å½•é¡µé¢ï¼ˆAppLogin.vueï¼‰ã€‚\nç¬¬äºŒå¹•ï¼šå¡«å†™ä¿¡æ¯ å°æ˜è¾“å…¥ï¼š\nç”¨æˆ·åï¼šxiaoming å¯†ç ï¼š123456 ç¬¬ä¸‰å¹•ï¼šç‚¹å‡»ç™»å½•æŒ‰é’® 1 2 3 4 5 // å‘ç”Ÿçš„äº‹ï¼š 1. é¡µé¢è°ƒç”¨ handleLogin() 2. æ‰¾æ¥¼é•¿ï¼ˆstoreï¼‰ï¼š\u0026#34;å¸®æˆ‘åŠå¡ï¼\u0026#34; 3. æ¥¼é•¿æŸ¥çœ‹ç™»è®°ç°¿ï¼ˆstateï¼‰ï¼Œå‘ç°æ²¡å¡ 4. æ¥¼é•¿æ´¾ä¿¡ä½¿ï¼ˆrequestï¼‰å»æœåŠ¡å™¨åŠå¡ ç¬¬å››å¹•ï¼šä¿¡ä½¿å‡ºå‘ 1 2 3 4 // request.js çš„å·¥ä½œï¼š 1. ä¿¡ä½¿å‡ºå‘å‰æ£€æŸ¥ï¼š\u0026#34;å¸¦é—¨ç¦å¡äº†å—ï¼Ÿ\u0026#34; â†’ æ²¡å¸¦ï¼ˆç¬¬ä¸€æ¬¡ç™»å½•ï¼‰ 2. å‡ºå‘å»æœåŠ¡å™¨ï¼ˆbaseURL + \u0026#34;/user/login\u0026#34;ï¼‰ 3. å¸¦ä¸Šå°æ˜çš„è´¦å·å¯†ç ï¼ˆdataï¼‰ ç¬¬äº”å¹•ï¼šæœåŠ¡å™¨éªŒè¯ 1 2 3 4 5 // æœåŠ¡å™¨çš„å·¥ä½œï¼š 1. æ£€æŸ¥è´¦å·å¯†ç  2. æ­£ç¡®ï¼šç”Ÿæˆä¸€å¼ é—¨ç¦å¡ï¼ˆtokenï¼‰ 3. è¿”å›ï¼š{ code: 1, data: { token: \u0026#34;abc123\u0026#34;, userInfo: {...} } } 4. é”™è¯¯ï¼šè¿”å› { code: 0, message: \u0026#34;å¯†ç é”™è¯¯\u0026#34; } ç¬¬å…­å¹•ï¼šä¿¡ä½¿å½’æ¥ 1 2 3 4 // request.js çš„å“åº”æ‹¦æˆªå™¨ï¼š 1. æ‰“å¼€ä¿¡å°çœ‹code 2. code=1ï¼šæŠŠdataç»™é¡µé¢ 3. code=0ï¼šç”¨å–‡å­å¹¿æ’­\u0026#34;å¯†ç é”™è¯¯\u0026#34; ç¬¬ä¸ƒå¹•ï¼šæ¥¼é•¿ç™»è®° 1 2 3 4 5 // user.js (store) çš„login actionï¼š 1. æ”¶åˆ°ä¿¡ä½¿å¸¦å›çš„token 2. è°ƒç”¨SET_TOKENç™»è®°åˆ°ç°¿å­ 3. è°ƒç”¨setTokenå­˜åˆ°é’±åŒ…ï¼ˆlocalStorageï¼‰ 4. è°ƒç”¨SET_USER_INFOç™»è®°ç”¨æˆ·ä¿¡æ¯ ç¬¬å…«å¹•ï¼šè·å–å®Œæ•´ä¿¡æ¯ 1 2 3 4 5 // ç™»å½•åè‡ªåŠ¨è°ƒç”¨getInfoï¼š 1. æ¥¼é•¿ï¼š\u0026#34;åˆšåŠäº†å¡ï¼Œç°åœ¨å»æ¡£æ¡ˆå®¤æ‹¿è¯¦ç»†èµ„æ–™\u0026#34; 2. æ´¾ä¿¡ä½¿å»/user/stats 3. æ‹¿å›å®Œæ•´æ¡£æ¡ˆï¼ˆrolesã€permissionsç­‰ï¼‰ 4. ç™»è®°åˆ°ç°¿å­ï¼ˆSET_USER_INFOï¼‰ ç¬¬ä¹å¹•ï¼šé¡µé¢è·³è½¬ 1 2 3 4 5 // AppLogin.vue çš„æœ€åï¼š 1. å–‡å­å¹¿æ’­ï¼š\u0026#34;æ¬¢è¿å›æ¥ï¼Œå°æ˜ï¼\u0026#34; 2. å¯¼èˆªå‘˜æŸ¥çœ‹ï¼š\u0026#34;å°æ˜åŸæ¥æƒ³å»å“ªï¼Ÿ\u0026#34; 3. å‘ç°route.query.redirectæ˜¯\u0026#34;/problems\u0026#34; 4. å¸¦å°æ˜å»é¢˜ç›®åˆ—è¡¨é¡µ ç¬¬åå¹•ï¼šåç»­è®¿é—® å°æ˜ç¬¬äºŒå¤©å†è®¿é—®ï¼š\n1 2 3 4 1. è¿›å¤§é—¨ï¼ˆæ‰“å¼€ç½‘ç«™ï¼‰ 2. ä¿å®‰ï¼ˆè·¯ç”±å®ˆå«ï¼‰æ‹¦æˆªï¼š\u0026#34;è¯·å‡ºç¤ºé—¨ç¦å¡ï¼\u0026#34; 3. å°æ˜ä»é’±åŒ…æ‹¿å‡ºå¡ï¼ˆgetToken()ï¼‰ 4. ä¿å®‰éªŒè¯æœ‰æ•ˆï¼Œæ”¾è¡Œåˆ°é¦–é¡µ å››ã€å…³é”®æ¦‚å¿µç²¾è®² 1. ä»€ä¹ˆæ˜¯ Tokenï¼Ÿ æ¯”å–»ï¼šToken å°±åƒé…’åº—çš„æˆ¿å¡ã€‚\nåŠå…¥ä½æ—¶ï¼ˆç™»å½•ï¼‰ç»™ä½ ä¸€å¼  æ¯æ¬¡è¿›æˆ¿é—´ï¼ˆè®¿é—®é¡µé¢ï¼‰è¦åˆ·å¡ é€€æˆ¿æ—¶ï¼ˆé€€å‡ºç™»å½•ï¼‰æ”¶å› è¿‡æœŸäº†è¦é‡æ–°åŠï¼ˆtoken è¿‡æœŸï¼‰ 2. localStorage vs sessionStorage 1 2 3 4 5 6 7 8 9 localStorageï¼ˆé•¿æœŸé’±åŒ…ï¼‰ï¼š - å…³æµè§ˆå™¨è¿˜åœ¨ - é€‚åˆå­˜tokenè¿™ç§é‡è¦ä¸œè¥¿ - å®¹é‡å¤§ï¼ˆ5MBï¼‰ sessionStorageï¼ˆä¸´æ—¶å£è¢‹ï¼‰ï¼š - å…³æµè§ˆå™¨å°±ä¸¢ - é€‚åˆä¸´æ—¶æ•°æ® - åŒæ ‡ç­¾é¡µå…±äº« 3. Promise å¼‚æ­¥å¤„ç† æ¯”å–»ï¼šå«å¤–å–çš„è¿‡ç¨‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 // ç‚¹å¤–å–ï¼ˆå‘èµ·è¯·æ±‚ï¼‰ const å¤–å– = ç‚¹é¤(\u0026#34;é±¼é¦™è‚‰ä¸\u0026#34;); // thenï¼šå¤–å–åˆ°äº†åšä»€ä¹ˆ å¤–å–.then((é¤) =\u0026gt; { åƒ(é¤); }); // catchï¼šå¤–å–å‡ºé—®é¢˜äº† å¤–å–.catch((é”™è¯¯) =\u0026gt; { æ‰“ç”µè¯æŠ•è¯‰(é”™è¯¯); }); // async/awaitï¼šä¼˜é›…çš„ç­‰å¤–å– async function åƒé¥­() { try { const é¤ = await ç‚¹é¤(\u0026#34;é±¼é¦™è‚‰ä¸\u0026#34;); åƒ(é¤); } catch (é”™è¯¯) { æ‰“ç”µè¯æŠ•è¯‰(é”™è¯¯); } } 4. Vuex æ•°æ®æµ 1 2 3 å•å‘æ•°æ®æµï¼ˆå¿…é¡»éµå®ˆï¼ï¼‰ï¼š ç»„ä»¶ â†’ dispatch Action â†’ commit Mutation â†’ ä¿®æ”¹ State â†’ æ›´æ–°ç»„ä»¶ ï¼ˆåšä»€ä¹ˆäº‹ï¼‰ ï¼ˆæ€ä¹ˆæ”¹ï¼‰ ï¼ˆæ”¹å“ªé‡Œï¼‰ ï¼ˆçœ‹åˆ°å˜åŒ–ï¼‰ äº”ã€å¸¸è§é—®é¢˜è§£ç­” Q1ï¼šä¸ºä»€ä¹ˆç™»å½•åé¡µé¢åˆ·æ–°ï¼Œåˆå˜æœªç™»å½•äº†ï¼Ÿ å¯èƒ½åŸå› ï¼š\ntoken æ²¡å­˜è¿› localStorageï¼ˆæ£€æŸ¥setTokenï¼‰ åˆ·æ–°å Vuex çš„ state é‡ç½®äº†ï¼Œä½† token è¿˜åœ¨ localStorage éœ€è¦åœ¨main.jsæˆ–App.vueåˆå§‹åŒ–æ—¶ä» localStorage è¯» token Q2ï¼šå¦‚ä½•å®ç°\u0026quot;è®°ä½æˆ‘\u0026quot;åŠŸèƒ½ï¼Ÿ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 // auth.js å¢åŠ  export function setToken(token, remember = false) { if (remember) { localStorage.setItem(TOKEN_KEY, token); // é•¿æœŸå­˜å‚¨ } else { sessionStorage.setItem(TOKEN_KEY, token); // ä¼šè¯å­˜å‚¨ } } // ç™»å½•æ—¶ await store.dispatch(\u0026#34;user/login\u0026#34;, { username, password, remember: true, // ä¼ è¿™ä¸ªå‚æ•° }); Q3ï¼šå¤šä¸ªæ ‡ç­¾é¡µåŒæ—¶ç™»å½•æ€ä¹ˆåŠï¼Ÿ 1 2 3 4 5 6 7 // ç›‘å¬storageå˜åŒ– window.addEventListener(\u0026#34;storage\u0026#34;, (event) =\u0026gt; { if (event.key === TOKEN_KEY) { // tokenå˜äº†ï¼ŒåŒæ­¥æ›´æ–°Vuex store.commit(\u0026#34;user/SET_TOKEN\u0026#34;, event.newValue); } }); Q4ï¼šå¦‚ä½•é˜²æ­¢ XSS æ”»å‡»ç›—å– tokenï¼Ÿ å®‰å…¨æªæ–½ï¼š\ntoken è®¾ç½®åˆç†è¿‡æœŸæ—¶é—´ ä½¿ç”¨ HttpOnly Cookieï¼ˆåç«¯è®¾ç½®ï¼‰ é‡è¦æ“ä½œéœ€è¦äºŒæ¬¡éªŒè¯ å®šæœŸæ›´æ¢ token å…­ã€ç™»å½•ç³»ç»Ÿæ¶æ„æ€»ç»“ 1 2 3 4 5 6 7 8 ã€ä¸‰å±‚æ¶æ„ã€‘ 1. å±•ç¤ºå±‚ï¼ˆViewï¼‰ - AppLogin.vue â†“ ç”¨æˆ·äº¤äº’ 2. é€»è¾‘å±‚ï¼ˆViewModelï¼‰ - Vuex (useræ¨¡å—) â†“ çŠ¶æ€ç®¡ç† 3. æœåŠ¡å±‚ï¼ˆServiceï¼‰ - request.js + user.js(api) â†“ ç½‘ç»œé€šä¿¡ 4. æŒä¹…å±‚ï¼ˆPersistenceï¼‰ - localStorage + auth.js 1 2 3 4 5 6 ã€äº”å¤§æ¨¡å—ã€‘ 1. è®¤è¯æ¨¡å—ï¼ˆauth.jsï¼‰- ç®¡å¡ 2. é€šä¿¡æ¨¡å—ï¼ˆrequest.jsï¼‰- ç®¡ä¿¡ä½¿ 3. æ¥å£æ¨¡å—ï¼ˆuser.js apiï¼‰- ç®¡èƒ½åŠä»€ä¹ˆäº‹ 4. çŠ¶æ€æ¨¡å—ï¼ˆuser.js storeï¼‰- ç®¡ç™»è®°ç°¿ 5. ç•Œé¢æ¨¡å—ï¼ˆAppLogin.vueï¼‰- ç®¡ç”¨æˆ·çœ‹åˆ°ä»€ä¹ˆ ä¸ƒã€ç»™æ–°æ‰‹çš„é»„é‡‘æ³•åˆ™ æ³•åˆ™ 1ï¼šå…ˆç†è§£æµç¨‹ï¼Œå†å†™ä»£ç  ç”»ä¸ªæµç¨‹å›¾ï¼Œææ¸…æ¥š\u0026quot;ç‚¹å‡»ç™»å½•\u0026quot;åˆ°\u0026quot;è¿›å…¥é¦–é¡µ\u0026quot;ä¸­é—´å‘ç”Ÿäº†ä»€ä¹ˆã€‚\næ³•åˆ™ 2ï¼šåˆ†å±‚æ€è€ƒï¼Œå„å¸å…¶èŒ auth.jsï¼šåªå…³å¿ƒ token å­˜å“ªã€æ€ä¹ˆå– request.jsï¼šåªå…³å¿ƒæ€ä¹ˆå‘è¯·æ±‚ã€æ€ä¹ˆå¤„ç†å“åº” storeï¼šåªå…³å¿ƒæ•°æ®æ€ä¹ˆå­˜ã€æ€ä¹ˆæ”¹ ç»„ä»¶ï¼šåªå…³å¿ƒç”¨æˆ·æ€ä¹ˆäº¤äº’ã€æ•°æ®æ€ä¹ˆå±•ç¤º æ³•åˆ™ 3ï¼šé”™è¯¯å¤„ç†è¦å…¨é¢ æ¯ä¸ªå¯èƒ½å‡ºé”™çš„åœ°æ–¹éƒ½è¦æœ‰åº”å¯¹æ–¹æ¡ˆï¼š\nç½‘ç»œé”™è¯¯ æœåŠ¡å™¨é”™è¯¯ ç”¨æˆ·è¾“å…¥é”™è¯¯ token è¿‡æœŸé”™è¯¯ æ³•åˆ™ 4ï¼šç”¨æˆ·ä½“éªŒè¦å‹å¥½ ç™»å½•ä¸­æ˜¾ç¤º loading é”™è¯¯æç¤ºè¦æ˜ç¡® æˆåŠŸåæœ‰åé¦ˆ è®°ä½ç”¨æˆ·ä¸Šæ¬¡æ“ä½œ å…«ã€ä¸‹ä¸€æ­¥å­¦ä¹ æ–¹å‘ æŒæ¡äº†ç™»å½•ç³»ç»Ÿåï¼Œä½ å¯ä»¥ç»§ç»­å­¦ä¹ ï¼š\næƒé™ç®¡ç†ï¼šä¸åŒè§’è‰²çœ‹åˆ°ä¸åŒèœå• è·¯ç”±å®ˆå«ï¼šæ›´ç²¾ç»†çš„è®¿é—®æ§åˆ¶ ç¬¬ä¸‰æ–¹ç™»å½•ï¼šå¾®ä¿¡ã€QQ å¿«é€Ÿç™»å½• åŒå› ç´ è®¤è¯ï¼šå¯†ç +æ‰‹æœºéªŒè¯ç  å•ç‚¹ç™»å½•ï¼šä¸€ä¸ªè´¦å·é€šè¡Œæ‰€æœ‰ç³»ç»Ÿ è®°ä½ï¼Œç™»å½•ç³»ç»Ÿæ˜¯ Web åº”ç”¨çš„å¤§é—¨ï¼Œå¤§é—¨è®¾è®¡å¾—å¥½ä¸å¥½ï¼Œç›´æ¥å½±å“ç”¨æˆ·ä½“éªŒå’Œç³»ç»Ÿå®‰å…¨ã€‚ç°åœ¨ä½ ä¸ä»…çŸ¥é“æ€ä¹ˆç”¨ï¼Œè¿˜çŸ¥é“ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Œè¿™å°±æ˜¯æˆä¸ºé«˜çº§å¼€å‘è€…çš„ç¬¬ä¸€æ­¥ï¼\nåŠ æ²¹ï¼Œä½ å·²ç»æŒæ¡äº†ç°ä»£å‰ç«¯ç™»å½•ç³»ç»Ÿçš„æ ¸å¿ƒåŸç†ï¼ğŸš€\n","date":"2025-12-05T18:36:00+08:00","permalink":"https://ye-guan-xing.github.io/p/%E6%A0%A1%E5%9B%ADoj%E9%A1%B9%E7%9B%AE%E7%9A%84%E8%AF%A6%E7%BB%86%E5%BC%80%E5%8F%91%E7%99%BB%E5%BD%95%E7%95%8C%E9%9D%A2/","title":"æ ¡å›­OJé¡¹ç›®çš„è¯¦ç»†å¼€å‘(ç™»å½•ç•Œé¢)"},{"content":"å¼•è¨€ï¼ˆä¸ºä»€ä¹ˆå†™è¿™ä¸ª?ï¼‰ åœ¨å®Œæˆå…¨åŸŸç”Ÿæ´»æœåŠ¡å¹³å°åï¼Œæˆ‘å¯¹å‰åç«¯ååŒå¼€å‘çš„æµç¨‹æœ‰äº†æ›´æ·±å…¥çš„ç†è§£ã€‚ä½†ä¸€ç›´æƒ³æŒ‘æˆ˜ä¸€ä¸ªæ›´è´´è¿‘ç¼–ç¨‹å­¦ä¹ åœºæ™¯çš„é¡¹ç›®â€”â€”åœ¨çº¿åˆ¤é¢˜ç³»ç»Ÿï¼ˆOJï¼ŒOnline Judgeï¼‰ã€‚è¿™ç±»å¹³å°ä¸ä»…éœ€è¦æ¸…æ™°çš„ç”¨æˆ·äº¤äº’è®¾è®¡ï¼Œè¿˜æ¶‰åŠä»£ç æäº¤ã€å®æ—¶åˆ¤é¢˜ã€æ•°æ®ç»Ÿè®¡ç­‰å¤æ‚ä¸šåŠ¡é€»è¾‘ï¼Œéå¸¸é€‚åˆç”¨æ¥å·©å›ºå‰ç«¯å·¥ç¨‹åŒ–æ€æƒ³ã€‚\næœ¬æ¬¡åˆ†äº«å°†èšç„¦å‰ç«¯å¼€å‘ç»†èŠ‚ï¼ŒåŒ…æ‹¬é¡¹ç›®æ¶æ„è®¾è®¡ã€æ ¸å¿ƒåŠŸèƒ½å®ç°åŠä¸šåŠ¡æµç¨‹æ¢³ç†ã€‚åç«¯éƒ¨åˆ†ç”±å¥½å‹ shuimo è´Ÿè´£æ­å»ºï¼Œåç»­è‹¥æœ‰æœºä¼šä¼šé‚€è¯·ä»–è¡¥å……åç«¯æ¶æ„ç»†èŠ‚ã€‚\nå…ˆæ”¾ä¸€å¼ å®Œæ•´çš„é¡¹ç›®æ¶æ„å›¾ï¼Œå¸®åŠ©å¤§å®¶å»ºç«‹æ•´ä½“è®¤çŸ¥ï¼š\nä¸‹é¢æ˜¯æ ¡å›­ OJ å¹³å°å‰ç«¯é¡¹ç›®çš„å®Œæ•´ç›®å½•ç»“æ„ï¼Œè¿™ä¸ªç»“æ„ä½“ç°äº†ç°ä»£ Vue é¡¹ç›®çš„æ¨¡å—åŒ–è®¾è®¡æ€æƒ³ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 src â”œâ”€ api # æ¥å£è¯·æ±‚å±‚ï¼šå°è£…æ‰€æœ‰åç«¯æ¥å£è°ƒç”¨ â”‚ â”œâ”€ admin.js # ç®¡ç†å‘˜ç›¸å…³æ¥å£ï¼ˆé¢˜ç›®ç®¡ç†ã€æƒé™æ“ä½œç­‰ï¼‰ â”‚ â”œâ”€ problem.js # é¢˜ç›®ç›¸å…³æ¥å£ï¼ˆé¢˜ç›®åˆ—è¡¨ã€è¯¦æƒ…ã€æäº¤åˆ¤é¢˜ç­‰ï¼‰ â”‚ â”œâ”€ submission.js # æäº¤è®°å½•ç›¸å…³æ¥å£ï¼ˆæäº¤åˆ—è¡¨ã€åˆ¤é¢˜ç»“æœæŸ¥è¯¢ç­‰ï¼‰ â”‚ â””â”€ user.js # ç”¨æˆ·ç›¸å…³æ¥å£ï¼ˆç™»å½•ã€æ³¨å†Œã€ä¸ªäººä¿¡æ¯ã€è®¾ç½®ç­‰ï¼‰ â”œâ”€ assets # é™æ€èµ„æºå±‚ï¼šå­˜æ”¾æ ·å¼ã€å›¾ç‰‡ç­‰é™æ€æ–‡ä»¶ â”‚ â”œâ”€ css # é€šç”¨CSSæ–‡ä»¶ï¼ˆæœªæ‹†åˆ†åˆ°stylesçš„åŸºç¡€æ ·å¼ï¼‰ â”‚ â”œâ”€ images # é¡¹ç›®å›¾ç‰‡èµ„æºï¼ˆå›¾æ ‡ã€èƒŒæ™¯å›¾ç­‰ï¼‰ â”‚ â””â”€ styles # æ ¸å¿ƒæ ·å¼æ–‡ä»¶ â”‚ â”œâ”€ Applogin.css # ç™»å½•/æ³¨å†Œé¡µé¢ä¸“å±æ ·å¼ â”‚ â”œâ”€ AppNavbar.css # å¯¼èˆªæ ç»„ä»¶ä¸“å±æ ·å¼ â”‚ â”œâ”€ common.css # å…¨å±€é€šç”¨æ ·å¼ï¼ˆé‡ç½®æ ·å¼ã€å…¬å…±ç±»åç­‰ï¼‰ â”‚ â””â”€ variables.scss # SCSSå…¨å±€å˜é‡ï¼ˆé¢œè‰²ã€å­—ä½“ã€é—´è·ç­‰ï¼‰ â”œâ”€ components # é€šç”¨ç»„ä»¶å±‚ï¼šå¯å¤ç”¨çš„Vueç»„ä»¶ï¼ˆæŒ‰ä¸šåŠ¡æ‹†åˆ†ï¼‰ â”‚ â”œâ”€ admin # ç®¡ç†å‘˜ä¸“å±ç»„ä»¶ â”‚ â”‚ â”œâ”€ ProblemForm.vue # é¢˜ç›®æ–°å¢/ç¼–è¾‘è¡¨å•ç»„ä»¶ â”‚ â”‚ â””â”€ ProblemManagement.vue # é¢˜ç›®åˆ—è¡¨ç®¡ç†ç»„ä»¶ï¼ˆæŸ¥è¯¢ã€åˆ é™¤ã€ç¼–è¾‘ï¼‰ â”‚ â”œâ”€ common # å…¨å±€é€šç”¨ç»„ä»¶ â”‚ â”‚ â”œâ”€ AppFooter.vue # é¡µé¢åº•éƒ¨ç‰ˆæƒ/å¯¼èˆªç»„ä»¶ â”‚ â”‚ â””â”€ AppNavbar.vue # é¡µé¢é¡¶éƒ¨å¯¼èˆªæ ï¼ˆå«ç™»å½•æ€ã€èœå•åˆ‡æ¢ï¼‰ â”‚ â”œâ”€ problem # é¢˜ç›®ç›¸å…³ç»„ä»¶ â”‚ â”‚ â”œâ”€ ProblemDetail.vue # é¢˜ç›®è¯¦æƒ…å±•ç¤ºç»„ä»¶ï¼ˆé¢˜å¹²ã€è¾“å…¥è¾“å‡ºç¤ºä¾‹ç­‰ï¼‰ â”‚ â”‚ â”œâ”€ ProblemItem.vue # é¢˜ç›®åˆ—è¡¨é¡¹ç»„ä»¶ï¼ˆå•ä¸ªé¢˜ç›®å¡ç‰‡ï¼‰ â”‚ â”‚ â””â”€ ProblemTags.vue # é¢˜ç›®æ ‡ç­¾ç»„ä»¶ï¼ˆéš¾åº¦ã€é¢˜å‹ç­‰æ ‡ç­¾å±•ç¤ºï¼‰ â”‚ â””â”€ submission # æäº¤è®°å½•ç›¸å…³ç»„ä»¶ â”‚ â”œâ”€ CodeEditor.vue # ä»£ç ç¼–è¾‘ç»„ä»¶ï¼ˆæ”¯æŒè¯­æ³•é«˜äº®ã€ä»£ç æäº¤ï¼‰ â”‚ â”œâ”€ JudgeResult.vue # åˆ¤é¢˜ç»“æœå±•ç¤ºç»„ä»¶ï¼ˆAC/WA/REç­‰çŠ¶æ€+è¯¦æƒ…ï¼‰ â”‚ â”œâ”€ SubmissionItem.vue # æäº¤è®°å½•åˆ—è¡¨é¡¹ç»„ä»¶ï¼ˆå•ä¸ªæäº¤è®°å½•å±•ç¤ºï¼‰ â”‚ â””â”€ SubmissionList.vue # æäº¤è®°å½•åˆ—è¡¨ç»„ä»¶ï¼ˆæŸ¥è¯¢ã€ç­›é€‰æäº¤è®°å½•ï¼‰ â”œâ”€ layouts # å¸ƒå±€ç»„ä»¶å±‚ï¼šé¡µé¢æ•´ä½“å¸ƒå±€å®¹å™¨ â”‚ â””â”€ MainLayout.vue # ä¸»å¸ƒå±€ç»„ä»¶ï¼ˆåŒ…å«Navbar+Footer+å†…å®¹åŒºåŸŸï¼‰ â”œâ”€ router # è·¯ç”±é…ç½®å±‚ï¼šå‰ç«¯è·¯ç”±ç®¡ç† â”‚ â”œâ”€ index.js # è·¯ç”±å…¥å£ï¼ˆåˆ›å»ºè·¯ç”±å®ä¾‹ã€æŒ‚è½½è·¯ç”±å®ˆå«ç­‰ï¼‰ â”‚ â””â”€ routes.js # è·¯ç”±è§„åˆ™å®šä¹‰ï¼ˆæ‰€æœ‰é¡µé¢çš„è·¯ç”±è·¯å¾„ã€ç»„ä»¶æ˜ å°„ï¼‰ â”œâ”€ store # çŠ¶æ€ç®¡ç†å±‚ï¼šVuexå…¨å±€çŠ¶æ€ç®¡ç†ï¼ˆæŒ‰æ¨¡å—æ‹†åˆ†ï¼‰ â”‚ â”œâ”€ modules # Vuexæ¨¡å—æ‹†åˆ† â”‚ â”‚ â”œâ”€ problem.js # é¢˜ç›®ç›¸å…³çŠ¶æ€ï¼ˆé¢˜ç›®åˆ—è¡¨ã€å½“å‰é¢˜ç›®è¯¦æƒ…ç­‰ï¼‰ â”‚ â”‚ â”œâ”€ submission.js # æäº¤ç›¸å…³çŠ¶æ€ï¼ˆæäº¤è®°å½•ã€åˆ¤é¢˜ç»“æœç­‰ï¼‰ â”‚ â”‚ â””â”€ user.js # ç”¨æˆ·ç›¸å…³çŠ¶æ€ï¼ˆç™»å½•æ€ã€ç”¨æˆ·ä¿¡æ¯ã€æƒé™ç­‰ï¼‰ â”‚ â”œâ”€ getters.js # Vuexå…¨å±€gettersï¼ˆç»Ÿä¸€è·å–å„æ¨¡å—çŠ¶æ€ï¼‰ â”‚ â””â”€ index.js # Vuexå…¥å£ï¼ˆåˆ›å»ºstoreå®ä¾‹ã€æ³¨å†Œæ¨¡å—ç­‰ï¼‰ â”œâ”€ utils # å·¥å…·å‡½æ•°å±‚ï¼šé€šç”¨å·¥å…·æ–¹æ³•å°è£… â”‚ â”œâ”€ auth.js # æƒé™ç›¸å…³å·¥å…·ï¼ˆJWTå­˜å‚¨/è§£æã€ç™»å½•æ€æ ¡éªŒç­‰ï¼‰ â”‚ â”œâ”€ constant.js # å…¨å±€å¸¸é‡ï¼ˆæ¥å£åœ°å€ã€çŠ¶æ€ç ã€æšä¸¾å€¼ç­‰ï¼‰ â”‚ â”œâ”€ debounce.js # é˜²æŠ–å‡½æ•°ï¼ˆé˜²æ­¢é‡å¤ç‚¹å‡»ã€é¢‘ç¹è¯·æ±‚ï¼‰ â”‚ â”œâ”€ format.js # æ ¼å¼åŒ–å·¥å…·ï¼ˆæ—¶é—´ã€åˆ¤é¢˜çŠ¶æ€ã€æ–‡ä»¶å¤§å°ç­‰ï¼‰ â”‚ â”œâ”€ mockData.js # æ¨¡æ‹Ÿæ•°æ®ï¼ˆå¼€å‘é˜¶æ®µæ›¿ä»£åç«¯æ¥å£ï¼‰ â”‚ â””â”€ request.js # è¯·æ±‚å°è£…ï¼ˆAxiosæ‹¦æˆªå™¨ã€è¯·æ±‚/å“åº”ç»Ÿä¸€å¤„ç†ï¼‰ â”œâ”€ views # é¡µé¢è§†å›¾å±‚ï¼šå¯¹åº”è·¯ç”±çš„é¡µé¢çº§ç»„ä»¶ â”‚ â”œâ”€ admin # ç®¡ç†å‘˜é¡µé¢ â”‚ â”‚ â”œâ”€ ProblemEdit.vue # é¢˜ç›®ç¼–è¾‘é¡µé¢ï¼ˆå¤ç”¨ProblemFormç»„ä»¶ï¼‰ â”‚ â”‚ â””â”€ ProblemManagement.vue # é¢˜ç›®ç®¡ç†é¡µé¢ï¼ˆå¤ç”¨ProblemManagementç»„ä»¶ï¼‰ â”‚ â”œâ”€ login # ç™»å½•/æ³¨å†Œé¡µé¢ â”‚ â”‚ â”œâ”€ AppLogin.vue # ç™»å½•é¡µé¢ï¼ˆè´¦å·å¯†ç ç™»å½•ã€éªŒè¯ç ç­‰ï¼‰ â”‚ â”‚ â””â”€ AppRegister.vue # æ³¨å†Œé¡µé¢ï¼ˆç”¨æˆ·ä¿¡æ¯å¡«å†™ã€æ ¡éªŒç­‰ï¼‰ â”‚ â”œâ”€ problem # é¢˜ç›®ç›¸å…³é¡µé¢ â”‚ â”‚ â”œâ”€ ProblemDetailView.vue # é¢˜ç›®è¯¦æƒ…é¡µé¢ï¼ˆåŸºäºMainLayout+ProblemDetailï¼‰ â”‚ â”‚ â””â”€ ProblemListView.vue # é¢˜ç›®åˆ—è¡¨é¡µé¢ï¼ˆåŸºäºMainLayout+ProblemItemï¼‰ â”‚ â”œâ”€ submission # æäº¤è®°å½•é¡µé¢ â”‚ â”‚ â””â”€ SubmissionHistory.vue # æäº¤å†å²é¡µé¢ï¼ˆåŸºäºMainLayout+SubmissionListï¼‰ â”‚ â”œâ”€ user # ç”¨æˆ·ä¸­å¿ƒé¡µé¢ â”‚ â”‚ â”œâ”€ UserProfile.vue # ä¸ªäººèµ„æ–™é¡µé¢ï¼ˆå±•ç¤º/ç¼–è¾‘ç”¨æˆ·ä¿¡æ¯ï¼‰ â”‚ â”‚ â””â”€ UserSetting.vue # ç”¨æˆ·è®¾ç½®é¡µé¢ï¼ˆå¯†ç ä¿®æ”¹ã€åå¥½è®¾ç½®ç­‰ï¼‰ â”‚ â”œâ”€ AppHome.vue # é¡¹ç›®é¦–é¡µï¼ˆå±•ç¤ºå¹³å°ä»‹ç»ã€çƒ­é—¨é¢˜ç›®ç­‰ï¼‰ â”‚ â””â”€ NotFound.vue # 404é¡µé¢ï¼ˆè·¯ç”±åŒ¹é…å¤±è´¥æ—¶å±•ç¤ºï¼‰ â”œâ”€ App.vue # æ ¹ç»„ä»¶ï¼ˆæŒ‚è½½è·¯ç”±å‡ºå£ã€å…¨å±€æ ·å¼å¼•å…¥ï¼‰ â””â”€ main.js # é¡¹ç›®å…¥å£æ–‡ä»¶ï¼ˆåˆ›å»ºVueå®ä¾‹ã€æŒ‚è½½è·¯ç”±/storeç­‰ï¼‰ è¿™ä¸ªæ¶æ„æ¸…æ™°åœ°å°†é¡¹ç›®åˆ†ä¸º 10 ä¸ªæ ¸å¿ƒæ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—éƒ½æœ‰æ˜ç¡®çš„èŒè´£è¾¹ç•Œï¼Œç¡®ä¿äº†ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ã€‚\næŠ€æœ¯æ ˆè§£æ æ ¸å¿ƒæŠ€æœ¯æ¡†æ¶ Vue 3 - æ¸è¿›å¼ JavaScript æ¡†æ¶ï¼Œè´Ÿè´£æ•´ä¸ªåº”ç”¨çš„æ ¸å¿ƒé€»è¾‘å’Œ UI æ¸²æŸ“ Vue Router - å®˜æ–¹è·¯ç”±ç®¡ç†å™¨ï¼Œå¤„ç†é¡µé¢å¯¼èˆªå’Œæƒé™æ§åˆ¶ Vuex - çŠ¶æ€ç®¡ç†æ¨¡å¼ï¼Œç®¡ç†å…¨å±€å…±äº«æ•°æ® Element Plus - UI ç»„ä»¶åº“ï¼Œæä¾›ä¸°å¯Œçš„é¢„åˆ¶ç•Œé¢å…ƒç´  å¼€å‘å·¥å…·é“¾ Vue CLI - é¡¹ç›®è„šæ‰‹æ¶ï¼Œå¿«é€Ÿåˆå§‹åŒ–æ ‡å‡†åŒ–é¡¹ç›®ç»“æ„ npm - åŒ…ç®¡ç†å™¨ï¼Œç®¡ç†é¡¹ç›®ä¾èµ–å’Œæ„å»ºè„šæœ¬ SCSS/Sass - CSS é¢„å¤„ç†å™¨ï¼Œæä¾›å˜é‡ã€åµŒå¥—ç­‰é«˜çº§åŠŸèƒ½ ESLint - ä»£ç æ£€æŸ¥å·¥å…·ï¼Œä¿è¯ä»£ç è´¨é‡å’Œé£æ ¼ç»Ÿä¸€ Babel - JavaScript ç¼–è¯‘å™¨ï¼Œç¡®ä¿ä»£ç å…¼å®¹æ€§ è¾…åŠ©å·¥å…·åº“ Axios - HTTP å®¢æˆ·ç«¯ï¼Œå¤„ç†ç½‘ç»œè¯·æ±‚å’Œæ•°æ®äº¤äº’ Vue I18n (å¯é€‰) - å›½é™…åŒ–æ”¯æŒ Vite (å¯é€‰) - ä¸‹ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·ï¼Œæä¾›æ›´å¿«å¼€å‘ä½“éªŒ å„æ¨¡å—æ·±åº¦è§£æ api/ - ç½‘ç»œé€šä¿¡æ¢çº½ è¿™ä¸ªæ¨¡å—æ˜¯å‰ç«¯ä¸åç«¯ä¹‹é—´çš„é€šä¿¡æ¡¥æ¢ã€‚å®ƒå°† HTTP è¯·æ±‚å°è£…æˆè¯­ä¹‰åŒ–çš„å‡½æ•°ï¼Œè®©ä¸šåŠ¡ä»£ç æ— éœ€å…³å¿ƒåº•å±‚ç½‘ç»œç»†èŠ‚ã€‚\nadmin.js - ç®¡ç†å‘˜ä¸“å±æ¥å£ç½‘å…³ï¼Œå¤„ç†é¢˜ç›®ç®¡ç†ã€æƒé™æ§åˆ¶ç­‰é«˜é˜¶æ“ä½œ problem.js - é¢˜ç›®æ•°æ®æ¥å£ï¼Œæä¾›é¢˜ç›®åˆ—è¡¨æŸ¥è¯¢ã€è¯¦æƒ…è·å–ç­‰æœåŠ¡ submission.js - æäº¤è®°å½•æœåŠ¡ï¼Œå¤„ç†ä»£ç æäº¤ã€è¯„æµ‹ç»“æœæŸ¥è¯¢ users.js - ç”¨æˆ·èº«ä»½æœåŠ¡ï¼Œç®¡ç†ç™»å½•ã€æ³¨å†Œå’Œä¸ªäººä¿¡æ¯ è®¾è®¡ç†å¿µï¼šæ¯ä¸ªæ–‡ä»¶å¯¹åº”ä¸€ä¸ªåç«¯æœåŠ¡é¢†åŸŸï¼Œé€šè¿‡ç»Ÿä¸€çš„è¯·æ±‚æ‹¦æˆªå™¨å¤„ç†è®¤è¯ã€é”™è¯¯ç­‰é€šç”¨é€»è¾‘ã€‚\nassets/ - é™æ€èµ„æºä»“åº“ è¿™é‡Œæ˜¯é¡¹ç›®çš„è§†è§‰èµ„äº§åº“ï¼Œå­˜æ”¾æ‰€æœ‰éä»£ç èµ„æºã€‚\ncss/login.css - ç™»å½•é¡µä¸“å±æ ·å¼ï¼Œå®ç°ç‰¹æ®Šè§†è§‰æ•ˆæœ images/ - å›¾ç‰‡èµ„æºä¸­å¿ƒï¼Œç®¡ç† logoã€å›¾æ ‡ã€èƒŒæ™¯å›¾ç­‰ styles/variables.scss - è®¾è®¡ä»¤ç‰Œç³»ç»Ÿï¼Œå®šä¹‰é¢œè‰²ã€é—´è·ã€å­—ä½“ç­‰è®¾è®¡å¸¸é‡ styles/common.scss - å…¨å±€æ ·å¼åŸºç¡€ï¼ŒåŒ…å«é‡ç½®æ ·å¼ã€å·¥å…·ç±»ã€å¸ƒå±€æ¡†æ¶ è®¾è®¡ç†å¿µï¼šé€šè¿‡ CSS å˜é‡å’Œæ··åˆå®å®ç°ä¸»é¢˜å¯é…ç½®æ€§ï¼Œæ”¯æŒç™½å¤©/é»‘å¤œæ¨¡å¼åˆ‡æ¢ã€‚\ncomponents/ - å¯å¤ç”¨ç»„ä»¶å·¥å‚ è¿™ä¸ªæ¨¡å—é‡‡ç”¨ä¹é«˜ç§¯æœ¨å¼çš„è®¾è®¡æ€æƒ³ï¼Œæ¯ä¸ªç»„ä»¶éƒ½æ˜¯ç‹¬ç«‹ã€å¯å¤ç”¨çš„ UI å•å…ƒã€‚\ncommon/ - åŸºç¡€è®¾æ–½ç»„ä»¶\nAppNavbarï¼šå…¨å±€å¯¼èˆªç³»ç»Ÿï¼Œæ ¹æ®ç”¨æˆ·æƒé™åŠ¨æ€æ˜¾ç¤ºèœå• AppFooterï¼šç‰ˆæƒä¿¡æ¯å±•ç¤ºåŒºï¼ŒåŒ…å«ç½‘ç«™ä¿¡æ¯å’Œå¤–éƒ¨é“¾æ¥ problem/ - é¢˜ç›®ç›¸å…³ç»„ä»¶å¥—ä»¶\nProblemDetailï¼šé¢˜ç›®å±•ç¤ºå™¨ï¼Œæ¸²æŸ“é¢˜ç›®æè¿°ã€ç¤ºä¾‹å’Œéš¾åº¦ä¿¡æ¯ ProblemItemï¼šé¢˜ç›®å¡ç‰‡ï¼Œåœ¨åˆ—è¡¨ä¸­å±•ç¤ºé¢˜ç›®çš„æ ¸å¿ƒä¿¡æ¯ ProblemTagsï¼šæ ‡ç­¾ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒæ ‡ç­¾å±•ç¤ºå’Œç­›é€‰ admin/ - ç®¡ç†åå°ç»„ä»¶é›†\nProblemFormï¼šé¢˜ç›®ç¼–è¾‘å™¨ï¼Œæä¾›å¯Œæ–‡æœ¬ç¼–è¾‘å’Œæµ‹è¯•ç”¨ä¾‹é…ç½® ProblemManagementï¼šé¢˜ç›®æ§åˆ¶é¢æ¿ï¼Œæ”¯æŒæ‰¹é‡æ“ä½œå’Œé«˜çº§æœç´¢ submission/ - ä»£ç æäº¤ç»„ä»¶åŒ…\nCodeEditorï¼šä»£ç ç¼–è¾‘å™¨ï¼Œæä¾›è¯­æ³•é«˜äº®å’Œæ™ºèƒ½æç¤º SubmissionItemï¼šæäº¤è®°å½•å¡ç‰‡ï¼Œæ˜¾ç¤ºè¯„æµ‹çŠ¶æ€å’Œæ—¶é—´æ¶ˆè€— SubmissionListï¼šæäº¤å†å²è§†å›¾ï¼Œæ”¯æŒåˆ†é¡µå’Œè¿‡æ»¤ è®¾è®¡ç†å¿µï¼šç»„ä»¶éµå¾ªå•ä¸€èŒè´£åŸåˆ™ï¼Œé€šè¿‡ Props å’Œ Events ä¸çˆ¶ç»„ä»¶é€šä¿¡ï¼Œæ”¯æŒæ·±åº¦å®šåˆ¶ã€‚\nlayouts/ - é¡µé¢å¸ƒå±€æ¡†æ¶ MainLayout.vue æ˜¯åº”ç”¨çš„éª¨æ¶ç³»ç»Ÿï¼Œå®šä¹‰äº†é¡µé¢çš„åŸºæœ¬ç»“æ„ï¼š\né¡¶éƒ¨ï¼šå¯¼èˆªæ åŒºåŸŸ ä¸­éƒ¨ï¼šåŠ¨æ€å†…å®¹åŒºåŸŸ åº•éƒ¨ï¼šé¡µè„šä¿¡æ¯åŒºåŸŸ è¿™ä¸ªå¸ƒå±€è¢«å¤§å¤šæ•°é¡µé¢å¤ç”¨ï¼Œç¡®ä¿ç”¨æˆ·ä½“éªŒçš„ä¸€è‡´æ€§ã€‚\nrouter/ - åº”ç”¨å¯¼èˆªç³»ç»Ÿ è·¯ç”±æ¨¡å—æ˜¯åº”ç”¨çš„GPS å¯¼èˆªç³»ç»Ÿï¼Œç®¡ç†ç€æ‰€æœ‰é¡µé¢çš„è®¿é—®è·¯å¾„ã€‚\nroutes.js - è·¯çº¿å›¾æ•°æ®åº“ï¼Œå®šä¹‰äº† URL åˆ°é¡µé¢çš„æ˜ å°„å…³ç³» index.js - å¯¼èˆªæ§åˆ¶ä¸­å¿ƒï¼ŒåŒ…å«æƒé™å®ˆå«å’Œè·¯ç”±é’©å­ æƒé™åˆ†çº§ï¼š\nå…¬å…±è·¯ç”±ï¼šæ— éœ€ç™»å½•å³å¯è®¿é—®ï¼ˆé¦–é¡µã€é¢˜ç›®åˆ—è¡¨ï¼‰ ç”¨æˆ·è·¯ç”±ï¼šéœ€è¦ç™»å½•å‡­è¯ï¼ˆæäº¤è®°å½•ã€ä¸ªäººä¸­å¿ƒï¼‰ ç®¡ç†å‘˜è·¯ç”±ï¼šéœ€è¦ç®¡ç†å‘˜æƒé™ï¼ˆé¢˜ç›®ç®¡ç†ã€ç”¨æˆ·ç®¡ç†ï¼‰ store/ - å…¨å±€çŠ¶æ€ç®¡ç†ä¸­å¿ƒ è¿™é‡Œæ˜¯åº”ç”¨çš„ä¸­å¤®æ•°æ®ä¸­å¿ƒï¼Œé‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ç®¡ç†å…¨å±€çŠ¶æ€ã€‚\nmodules/user.js - ç”¨æˆ·çŠ¶æ€åº“ï¼Œç®¡ç†ç™»å½•æ€ã€æƒé™ä¿¡æ¯å’Œä¸ªäººæ•°æ® modules/problem.js - é¢˜ç›®çŠ¶æ€åº“ï¼Œç¼“å­˜é¢˜ç›®åˆ—è¡¨å’Œè¯¦æƒ…æ•°æ® modules/submission.js - æäº¤çŠ¶æ€åº“ï¼Œè·Ÿè¸ªæäº¤å†å²å’Œè¯„æµ‹ç»“æœ getters.js - æ•°æ®æŸ¥è¯¢æ¥å£ï¼Œæä¾›ä¾¿æ·çš„çŠ¶æ€è®¿é—®æ–¹æ³• index.js - çŠ¶æ€åº“å…¥å£ï¼Œé›†æˆæ‰€æœ‰æ¨¡å—å¹¶æä¾›æ’ä»¶æ”¯æŒ æ•°æ®æµï¼šç»„ä»¶ â†’ Actions â†’ Mutations â†’ State â†’ ç»„ä»¶\nutils/ - å·¥å…·å‡½æ•°åº“ å·¥å…·åº“æ˜¯é¡¹ç›®çš„ç‘å£«å†›åˆ€ï¼Œæä¾›å„ç§é€šç”¨åŠŸèƒ½ã€‚\nrequest.js - HTTP è¯·æ±‚å¼•æ“ï¼Œå°è£… Axios å¹¶æä¾›æ‹¦æˆªå™¨ auth.js - èº«ä»½éªŒè¯å·¥å…·ï¼Œç®¡ç† Token çš„å­˜å‚¨å’ŒéªŒè¯ constant.js - å¸¸é‡å­—å…¸ï¼Œé›†ä¸­ç®¡ç†æ¥å£åœ°å€ã€çŠ¶æ€ç ç­‰ format.js - æ•°æ®æ ¼å¼åŒ–å™¨ï¼Œç»Ÿä¸€æ—¥æœŸã€æ•°å­—ç­‰å±•ç¤ºæ ¼å¼ mockData.js - æ¨¡æ‹Ÿæ•°æ®ç”Ÿæˆå™¨ï¼Œæ”¯æŒç¦»çº¿å¼€å‘å’Œæµ‹è¯• views/ - é¡µé¢è§†å›¾å±‚ è§†å›¾å±‚æ˜¯ç”¨æˆ·ç›´æ¥äº¤äº’çš„ç•Œé¢ï¼Œæ¯ä¸ªé¡µé¢éƒ½æ˜¯è·¯ç”±çš„ç»ˆç‚¹ã€‚\nlogin/ - èº«ä»½éªŒè¯é—¨æˆ·\nAppLogin.vueï¼šç™»å½•æ³¨å†Œä¸€ä½“åŒ–é¡µé¢ï¼Œæ”¯æŒç¬¬ä¸‰æ–¹ç™»å½• problem/ - é¢˜ç›®æµè§ˆåŒº\nProblemList.vueï¼šé¢˜ç›®ç›®å½•é¡µï¼Œæ”¯æŒæœç´¢å’Œç­›é€‰ ProblemDetailView.vueï¼šé¢˜ç›®è¯¦æƒ…é¡µï¼Œé›†æˆä»£ç ç¼–è¾‘å™¨ submission/ - æäº¤è®°å½•åŒº\nSubmissionHistory.vueï¼šä¸ªäººæäº¤å†å²ï¼Œæ”¯æŒçŠ¶æ€è¿‡æ»¤ admin/ - ç®¡ç†æ§åˆ¶å°\nProblemManagement.vueï¼šé¢˜ç›®ç®¡ç†é¢æ¿ ProblemEdit.vueï¼šé¢˜ç›®ç¼–è¾‘ç•Œé¢ user/ - ä¸ªäººç©ºé—´\nAppHome.vueï¼šä¸ªäººä¸»é¡µï¼Œå±•ç¤ºç»Ÿè®¡ä¿¡æ¯å’Œæ´»åŠ¨è®°å½• NotFound.vue - 404 é”™è¯¯é¡µé¢ï¼Œæä¾›å‹å¥½çš„é”™è¯¯æç¤º\næ ¸å¿ƒå…¥å£æ–‡ä»¶ App.vue - åº”ç”¨æ ¹å®¹å™¨ï¼Œå®šä¹‰å…¨å±€æ ·å¼å’ŒåŸºç¡€ç»“æ„ main.js - åº”ç”¨å¯åŠ¨å™¨ï¼Œé›†æˆæ‰€æœ‰æ’ä»¶å¹¶æŒ‚è½½åˆ° DOM ","date":"2025-12-05T17:36:00+08:00","permalink":"https://ye-guan-xing.github.io/p/%E6%A0%A1%E5%9B%ADoj%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%95%B4%E4%BD%93%E7%BB%93%E6%9E%84/","title":"æ ¡å›­OJé¡¹ç›®çš„æ•´ä½“ç»“æ„"},{"content":"ç”±äºæ²¡æœ‰åç«¯ï¼Œæˆ‘æ¥ä¸ºä½ æ·»åŠ å‰ç«¯æ¨¡æ‹Ÿæ•°æ®å’Œæ¨¡æ‹Ÿ APIï¼Œå¹¶è§£é‡Šä¸ºä»€ä¹ˆä¸éœ€è¦å¤„ç† tokenã€‚\n1. åˆ›å»ºæ¨¡æ‹Ÿæ•°æ®å­˜å‚¨ é¦–å…ˆåœ¨ src/utils/ ä¸‹åˆ›å»ºæ¨¡æ‹Ÿæ•°æ®ç®¡ç†å·¥å…·ï¼š\nsrc/utils/mockData.js 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 // æ¨¡æ‹Ÿæ•°æ®å­˜å‚¨ class MockStorage { constructor() { this.storageKey = \u0026#34;oj_mock_data\u0026#34;; this.initData(); } initData() { if (!localStorage.getItem(this.storageKey)) { const initialData = { problems: [ { id: 1, title: \u0026#34;ä¸¤æ•°ä¹‹å’Œ\u0026#34;, label: \u0026#34;æ•°ç»„,å“ˆå¸Œè¡¨,ç®€å•\u0026#34;, testPointNum: 3, description: \u0026#34;ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªç›®æ ‡å€¼ targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡ºå’Œä¸ºç›®æ ‡å€¼çš„é‚£ä¸¤ä¸ªæ•´æ•°ï¼Œå¹¶è¿”å›å®ƒä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚\\n\\nä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œæ•°ç»„ä¸­åŒä¸€ä¸ªå…ƒç´ ä¸èƒ½ä½¿ç”¨ä¸¤éã€‚\u0026#34;, testPointList: [ { input: \u0026#34;3\\n2 7 11 15\\n9\u0026#34;, output: \u0026#34;0 1\u0026#34;, isSample: 1 }, { input: \u0026#34;2\\n3 2 4\\n6\u0026#34;, output: \u0026#34;1 2\u0026#34;, isSample: 0 }, { input: \u0026#34;2\\n3 3\\n6\u0026#34;, output: \u0026#34;0 1\u0026#34;, isSample: 0 }, ], createTime: \u0026#34;2024-01-15 10:00:00\u0026#34;, }, { id: 2, title: \u0026#34;éªŒè¯å›æ–‡ä¸²\u0026#34;, label: \u0026#34;å­—ç¬¦ä¸²,åŒæŒ‡é’ˆ,ç®€å•\u0026#34;, testPointNum: 6, description: \u0026#34;ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒéªŒè¯å®ƒæ˜¯å¦æ˜¯å›æ–‡ä¸²ï¼Œåªè€ƒè™‘å­—æ¯å’Œæ•°å­—å­—ç¬¦ï¼Œå¯ä»¥å¿½ç•¥å­—æ¯çš„å¤§å°å†™ã€‚\\n\\nè¯´æ˜ï¼šæœ¬é¢˜ä¸­ï¼Œæˆ‘ä»¬å°†ç©ºå­—ç¬¦ä¸²å®šä¹‰ä¸ºæœ‰æ•ˆçš„å›æ–‡ä¸²ã€‚\u0026#34;, testPointList: [ { input: \u0026#39;\u0026#34;A man, a plan, a canal: Panama\u0026#34;\u0026#39;, output: \u0026#34;true\u0026#34;, isSample: 1, }, { input: \u0026#39;\u0026#34;race a car\u0026#34;\u0026#39;, output: \u0026#34;false\u0026#34;, isSample: 1 }, { input: \u0026#39;\u0026#34;\u0026#34;\u0026#39;, output: \u0026#34;true\u0026#34;, isSample: 0 }, ], createTime: \u0026#34;2024-01-16 14:30:00\u0026#34;, }, ], nextProblemId: 3, }; this.saveData(initialData); } } getData() { return JSON.parse(localStorage.getItem(this.storageKey)) || {}; } saveData(data) { localStorage.setItem(this.storageKey, JSON.stringify(data)); } // è·å–æ‰€æœ‰é¢˜ç›® getProblems() { return this.getData().problems || []; } // æ·»åŠ é¢˜ç›® addProblem(problem) { const data = this.getData(); const newProblem = { ...problem, id: data.nextProblemId++, createTime: new Date().toLocaleString(\u0026#34;zh-CN\u0026#34;), }; data.problems.push(newProblem); this.saveData(data); return newProblem; } // æ›´æ–°é¢˜ç›® updateProblem(updatedProblem) { const data = this.getData(); const index = data.problems.findIndex((p) =\u0026gt; p.id === updatedProblem.id); if (index !== -1) { data.problems[index] = { ...data.problems[index], ...updatedProblem, // ä¿ç•™åˆ›å»ºæ—¶é—´ createTime: data.problems[index].createTime, }; this.saveData(data); return data.problems[index]; } return null; } // åˆ é™¤é¢˜ç›® deleteProblem(id) { const data = this.getData(); data.problems = data.problems.filter((p) =\u0026gt; p.id !== id); this.saveData(data); return true; } // åˆ†é¡µæŸ¥è¯¢ getProblemsByPage(pageNum = 1, size = 10) { const problems = this.getProblems(); const start = (pageNum - 1) * size; const end = start + size; const pageData = problems.slice(start, end); return { records: pageData, total: problems.length, pageNum, size, }; } // æ ¹æ®IDæŸ¥è¯¢ getProblemById(id) { const problems = this.getProblems(); return problems.find((p) =\u0026gt; p.id === Number(id)); } } // åˆ›å»ºå•ä¾‹å®ä¾‹ export const mockStorage = new MockStorage(); 2. ä¿®æ”¹ API æ–‡ä»¶æ”¯æŒæ¨¡æ‹Ÿæ•°æ® src/api/admin.js (æ›´æ–°ç‰ˆæœ¬) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 import request from \u0026#34;@/utils/request\u0026#34;; import { mockStorage } from \u0026#34;@/utils/mockData\u0026#34;; // æ˜¯å¦ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ® const USE_MOCK = true; // æ¨¡æ‹Ÿå»¶è¿Ÿ const mockDelay = (ms = 500) =\u0026gt; new Promise((resolve) =\u0026gt; setTimeout(resolve, ms)); // é¢˜ç›®ç®¡ç†æ¥å£ export const problemAdminAPI = { // æ·»åŠ é¢˜ç›® addProblem: async (data) =\u0026gt; { if (USE_MOCK) { await mockDelay(); const result = mockStorage.addProblem(data); return { data: result, code: 200, message: \u0026#34;æ·»åŠ æˆåŠŸ\u0026#34; }; } return request({ url: \u0026#34;/testQuestion/addTestQuestion\u0026#34;, method: \u0026#34;POST\u0026#34;, data, }); }, // åˆ é™¤é¢˜ç›® deleteProblem: async (id) =\u0026gt; { if (USE_MOCK) { await mockDelay(); const success = mockStorage.deleteProblem(id); return { data: null, code: success ? 200 : 400, message: success ? \u0026#34;åˆ é™¤æˆåŠŸ\u0026#34; : \u0026#34;åˆ é™¤å¤±è´¥\u0026#34;, }; } return request({ url: \u0026#34;/testQuestion/deleteTestQuestionById\u0026#34;, method: \u0026#34;DELETE\u0026#34;, data: { id }, }); }, // æ›´æ–°é¢˜ç›® updateProblem: async (data) =\u0026gt; { if (USE_MOCK) { await mockDelay(); const result = mockStorage.updateProblem(data); if (result) { return { data: result, code: 200, message: \u0026#34;æ›´æ–°æˆåŠŸ\u0026#34; }; } else { return { data: null, code: 400, message: \u0026#34;é¢˜ç›®ä¸å­˜åœ¨\u0026#34; }; } } return request({ url: \u0026#34;/testQuestion/updateTestQuestion\u0026#34;, method: \u0026#34;POST\u0026#34;, data, }); }, // é¢˜ç›®åˆ†é¡µæŸ¥è¯¢ getProblemsByPage: async (params) =\u0026gt; { if (USE_MOCK) { await mockDelay(300); const { pageNum = 1, size = 10, keyword } = params; let problems = mockStorage.getProblems(); // æ¨¡æ‹Ÿæœç´¢åŠŸèƒ½ if (keyword) { problems = problems.filter( (p) =\u0026gt; p.title.toLowerCase().includes(keyword.toLowerCase()) || p.label.toLowerCase().includes(keyword.toLowerCase()) ); } const start = (pageNum - 1) * size; const end = start + size; const pageData = problems.slice(start, end); return { data: { records: pageData, total: problems.length, pageNum, size, }, code: 200, message: \u0026#34;æŸ¥è¯¢æˆåŠŸ\u0026#34;, }; } return request({ url: \u0026#34;/testQuestion/getTestQuestionByPage\u0026#34;, method: \u0026#34;GET\u0026#34;, params, }); }, // æ ¹æ®IDæŸ¥è¯¢é¢˜ç›® getProblemById: async (id) =\u0026gt; { if (USE_MOCK) { await mockDelay(); const problem = mockStorage.getProblemById(id); if (problem) { return { data: problem, code: 200, message: \u0026#34;æŸ¥è¯¢æˆåŠŸ\u0026#34; }; } else { return { data: null, code: 404, message: \u0026#34;é¢˜ç›®ä¸å­˜åœ¨\u0026#34; }; } } return request({ url: \u0026#34;/testQuestion/getTestQuestionById\u0026#34;, method: \u0026#34;GET\u0026#34;, params: { id }, }); }, }; 3. æ›´æ–°ç»„ä»¶å¤„ç†æ¨¡æ‹Ÿæ•°æ®å“åº” src/components/admin/ProblemManagement.vue (å…³é”®éƒ¨åˆ†æ›´æ–°) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 // åœ¨ fetchProblems æ–¹æ³•ä¸­æ›´æ–°æ•°æ®å¤„ç†ï¼š const fetchProblems = async () =\u0026gt; { loading.value = true; try { const params = { pageNum: pagination.value.pageNum, size: pagination.value.size, }; if (searchKeyword.value) { params.keyword = searchKeyword.value; } const response = await problemAdminAPI.getProblemsByPage(params); // å¤„ç†æ¨¡æ‹Ÿæ•°æ®å’ŒçœŸå®æ•°æ®çš„å“åº”æ ¼å¼å·®å¼‚ if (USE_MOCK) { problemList.value = response.data.records || []; pagination.value.total = response.data.total || 0; } else { problemList.value = response.data?.records || []; pagination.value.total = response.data?.total || 0; } } catch (error) { ElMessage.error(\u0026#34;è·å–é¢˜ç›®åˆ—è¡¨å¤±è´¥\u0026#34;); console.error(\u0026#34;è·å–é¢˜ç›®åˆ—è¡¨å¤±è´¥:\u0026#34;, error); } finally { loading.value = false; } }; // åœ¨ handleDelete æ–¹æ³•ä¸­ï¼š const handleDelete = async (id) =\u0026gt; { try { await ElMessageBox.confirm(\u0026#34;ç¡®å®šè¦åˆ é™¤è¿™ä¸ªé¢˜ç›®å—ï¼Ÿ\u0026#34;, \u0026#34;è­¦å‘Š\u0026#34;, { type: \u0026#34;warning\u0026#34;, confirmButtonText: \u0026#34;ç¡®å®š\u0026#34;, cancelButtonText: \u0026#34;å–æ¶ˆ\u0026#34;, }); const response = await problemAdminAPI.deleteProblem(id); // æ£€æŸ¥å“åº”æ˜¯å¦æˆåŠŸ if (response.code === 200) { ElMessage.success(\u0026#34;åˆ é™¤æˆåŠŸ\u0026#34;); fetchProblems(); } else { ElMessage.error(response.message || \u0026#34;åˆ é™¤å¤±è´¥\u0026#34;); } } catch (error) { if (error !== \u0026#34;cancel\u0026#34;) { ElMessage.error(\u0026#34;åˆ é™¤å¤±è´¥\u0026#34;); console.error(\u0026#34;åˆ é™¤å¤±è´¥:\u0026#34;, error); } } }; src/components/admin/ProblemForm.vue (å…³é”®éƒ¨åˆ†æ›´æ–°) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 // åœ¨ handleSubmit æ–¹æ³•ä¸­æ›´æ–°ï¼š const handleSubmit = async () =\u0026gt; { try { await formRef.value.validate(); submitting.value = true; // æ›´æ–°æµ‹è¯•ç‚¹æ•°é‡ form.testPointNum = form.testPointList.length; const response = isEdit.value ? await problemAdminAPI.updateProblem(form) : await problemAdminAPI.addProblem(form); // æ£€æŸ¥å“åº”æ˜¯å¦æˆåŠŸ if (response.code === 200) { ElMessage.success(isEdit.value ? \u0026#34;æ›´æ–°æˆåŠŸ\u0026#34; : \u0026#34;åˆ›å»ºæˆåŠŸ\u0026#34;); router.push(\u0026#34;/admin/problem\u0026#34;); } else { ElMessage.error( response.message || (isEdit.value ? \u0026#34;æ›´æ–°å¤±è´¥\u0026#34; : \u0026#34;åˆ›å»ºå¤±è´¥\u0026#34;) ); } } catch (error) { if (error instanceof Error) { ElMessage.error(isEdit.value ? \u0026#34;æ›´æ–°å¤±è´¥\u0026#34; : \u0026#34;åˆ›å»ºå¤±è´¥\u0026#34;); console.error(\u0026#34;æäº¤å¤±è´¥:\u0026#34;, error); } // å¦‚æœæ˜¯éªŒè¯å¤±è´¥ï¼Œä¸æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯ } finally { submitting.value = false; } }; // åœ¨ fetchProblemDetail æ–¹æ³•ä¸­æ›´æ–°ï¼š const fetchProblemDetail = async (id) =\u0026gt; { try { const response = await problemAdminAPI.getProblemById(id); if (response.code === 200 \u0026amp;\u0026amp; response.data) { Object.assign(form, response.data); } else { ElMessage.error(response.message || \u0026#34;è·å–é¢˜ç›®è¯¦æƒ…å¤±è´¥\u0026#34;); } } catch (error) { ElMessage.error(\u0026#34;è·å–é¢˜ç›®è¯¦æƒ…å¤±è´¥\u0026#34;); console.error(\u0026#34;è·å–é¢˜ç›®è¯¦æƒ…å¤±è´¥:\u0026#34;, error); } }; 4. ä¸ºä»€ä¹ˆä¸éœ€è¦å¤„ç† Token åŸå› åˆ†æï¼š æ¨¡æ‹Ÿç¯å¢ƒç‰¹æ€§ï¼š\nåœ¨æ¨¡æ‹Ÿç¯å¢ƒä¸­ï¼Œæ‰€æœ‰æ•°æ®éƒ½å­˜å‚¨åœ¨å‰ç«¯ï¼ˆlocalStorageï¼‰ ä¸éœ€è¦ä¸çœŸå®æœåŠ¡å™¨é€šä¿¡ï¼Œå› æ­¤ä¸éœ€è¦èº«ä»½éªŒè¯ æ•°æ®æ“ä½œå®Œå…¨åœ¨å‰ç«¯å®Œæˆï¼Œæ²¡æœ‰è·¨åŸŸæˆ–å®‰å…¨é™åˆ¶ å¼€å‘é˜¶æ®µä¾¿åˆ©æ€§ï¼š\nç®€åŒ–å¼€å‘æµç¨‹ï¼Œä¸“æ³¨äºåŠŸèƒ½å®ç° é¿å…å› è®¤è¯é—®é¢˜é˜»ç¢å¼€å‘è¿›åº¦ ä¾¿äºæµ‹è¯•å’Œæ¼”ç¤º æ¶æ„è®¾è®¡è€ƒè™‘ï¼š\nä¿æŒ API æ¥å£çš„ä¸€è‡´æ€§ çœŸå®ç¯å¢ƒåˆ‡æ¢ç®€å•ï¼ˆåªéœ€ä¿®æ”¹ USE_MOCK å¸¸é‡ï¼‰ æ¨¡æ‹Ÿæ•°æ®å±‚ä¸ä¸šåŠ¡é€»è¾‘åˆ†ç¦» çœŸå®ç¯å¢ƒåˆ‡æ¢ï¼š å½“éœ€è¦è¿æ¥çœŸå®åç«¯æ—¶ï¼Œåªéœ€ï¼š\nå°† src/api/admin.js ä¸­çš„ USE_MOCK æ”¹ä¸º false ç¡®ä¿ src/utils/request.js ä¸­çš„ token å¤„ç†æ­£å¸¸å·¥ä½œ é…ç½®æ­£ç¡®çš„åç«¯ API åœ°å€ Token å¤„ç†çš„é¢„å¤‡å·¥ä½œï¼š è™½ç„¶åœ¨æ¨¡æ‹Ÿç¯å¢ƒä¸­ä¸éœ€è¦ tokenï¼Œä½†ä½ çš„é¡¹ç›®å·²ç»å…·å¤‡äº† token å¤„ç†èƒ½åŠ›ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 // åœ¨ src/utils/request.js ä¸­å·²ç»æœ‰ç±»ä¼¼çš„ä»£ç ï¼š import store from \u0026#34;@/store\u0026#34;; // è¯·æ±‚æ‹¦æˆªå™¨ - æ·»åŠ  token service.interceptors.request.use( (config) =\u0026gt; { if (store.getters.token) { config.headers[\u0026#34;Authorization\u0026#34;] = `Bearer ${store.getters.token}`; } return config; }, (error) =\u0026gt; { return Promise.reject(error); } ); è¿™æ ·è®¾è®¡ç¡®ä¿äº†ï¼š\nå¼€å‘é˜¶æ®µï¼šå¿«é€ŸåŸå‹å¼€å‘ï¼Œæ— éœ€åç«¯ä¾èµ– ç”Ÿäº§ç¯å¢ƒï¼šæ— ç¼åˆ‡æ¢åˆ°çœŸå® APIï¼Œè‡ªåŠ¨å¤„ç†è®¤è¯ ä»£ç è´¨é‡ï¼šä¿æŒæ¥å£ä¸€è‡´æ€§ï¼Œä¾¿äºç»´æŠ¤ ç°åœ¨ä½ çš„é¢˜ç›®ç®¡ç†åŠŸèƒ½å·²ç»å®Œå…¨å¯ä»¥åœ¨å‰ç«¯ç‹¬ç«‹è¿è¡Œï¼Œæ‰€æœ‰æ•°æ®éƒ½ä¼šæŒä¹…åŒ–ä¿å­˜åœ¨æµè§ˆå™¨çš„ localStorage ä¸­ï¼\n","date":"2025-11-30T12:36:00+08:00","permalink":"https://ye-guan-xing.github.io/p/%E6%A0%A1%E5%9B%ADoj%E5%BC%80%E5%8F%91%E4%B9%8Badmin%E9%A1%B5%E9%9D%A2%E7%9A%84%E5%BC%80%E5%8F%91/","title":"æ ¡å›­OJå¼€å‘ä¹‹adminé¡µé¢çš„å¼€å‘"},{"content":"å‰è¨€ åœ¨å‰åç«¯åˆ†ç¦»å¼€å‘æ¨¡å¼ä¸‹ï¼Œè·¨åŸŸæ˜¯å‰ç«¯å¼€å‘è€…ç»•ä¸å¼€çš„é—®é¢˜ã€‚æµè§ˆå™¨çš„åŒæºç­–ç•¥é™åˆ¶äº†ä¸åŒåŸŸå/ç«¯å£é—´çš„èµ„æºè¯·æ±‚ï¼Œè€Œè§£å†³è·¨åŸŸçš„æ ¸å¿ƒæ–¹æ¡ˆä¸»è¦æœ‰ä¸¤ç§ï¼šCORSï¼ˆè·¨åŸŸèµ„æºå…±äº«ï¼‰ å’Œåå‘ä»£ç†ã€‚æœ¬æ–‡ç»“åˆå…¨åŸŸç”Ÿæ´»å¹³å°çš„ç¤ºä¾‹ï¼Œè¯¦è§£è¿™ä¸¤ç§æ–¹æ¡ˆçš„åŸç†ã€åº”ç”¨åœºæ™¯åŠè¸©å‘è¦ç‚¹ã€‚\næ³¨ï¼šåæ–‡ä¼šè¯¦ç»†è®²è§£ Nginx åå‘ä»£ç†ï¼ˆè¿™æ˜¯å‰ç«¯ç¨‹åºå‘˜çš„å¿…å¤‡çŸ¥è¯†ï¼‰ ä¸€ã€é—®é¢˜èƒŒæ™¯ï¼šä¸ºä»€ä¹ˆä¼šè·¨åŸŸï¼Ÿ å…ˆçœ‹æˆ‘ä»¬çš„é¡¹ç›®ç¯å¢ƒï¼š\nå‰ç«¯ï¼ˆVueï¼‰è¿è¡Œåœ¨ http://localhost:8081ï¼ˆé€šè¿‡vue.config.jsé…ç½®ï¼‰ï¼› åç«¯ï¼ˆExpressï¼‰è¿è¡Œåœ¨ http://localhost:8080ï¼ˆæ¥å£è·¯å¾„å¦‚/api/merchantï¼‰ã€‚ æµè§ˆå™¨çš„åŒæºç­–ç•¥è¦æ±‚â€œåè®®+åŸŸå+ç«¯å£â€å®Œå…¨ä¸€è‡´ï¼Œå› æ­¤å‰ç«¯ç›´æ¥è¯·æ±‚åç«¯æ¥å£ä¼šè§¦å‘è·¨åŸŸé”™è¯¯â€”â€”æ¯”å¦‚æ§åˆ¶å°æç¤ºNo 'Access-Control-Allow-Origin' header is present on the requested resourceã€‚\näºŒã€CORSï¼šåç«¯ä¸»å¯¼çš„è·¨åŸŸè§£å†³æ–¹æ¡ˆ CORS æ˜¯ W3C æ ‡å‡†ï¼Œé€šè¿‡åç«¯è®¾ç½®å“åº”å¤´å…è®¸æŒ‡å®šæºçš„è·¨åŸŸè¯·æ±‚ï¼Œæ˜¯æœ€ç›´æ¥çš„è·¨åŸŸæ–¹æ¡ˆä¹‹ä¸€ã€‚ä»¥ä¸‹æ˜¯ä¸¤ç§å¸¸è§çš„ CORS é…ç½®æ–¹å¼ï¼š\n1. æ–¹æ¡ˆ 1ï¼šä½¿ç”¨corsä¸­é—´ä»¶ï¼ˆä¾¿æ·é«˜æ•ˆï¼‰ Express ç”Ÿæ€æä¾›äº†corsåŒ…ï¼Œå¯ä¸€é”®é…ç½®è·¨åŸŸè§„åˆ™ï¼Œä¹Ÿæ˜¯é¡¹ç›®ä¸­æœ€å¸¸ç”¨çš„æ–¹å¼ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 // ä½¿ç”¨corsä¸­é—´ä»¶çš„Expressä»£ç  const express = require(\u0026#34;express\u0026#34;); const cors = require(\u0026#34;cors\u0026#34;); const app = express(); app.use(express.json()); // å…¨å±€å¯ç”¨corsï¼Œé»˜è®¤å…è®¸æ‰€æœ‰æºï¼ˆç”Ÿäº§ç¯å¢ƒå»ºè®®æŒ‡å®šå…·ä½“æºï¼‰ app.use( cors({ origin: \u0026#34;http://localhost:8081\u0026#34;, // ä»…å…è®¸å‰ç«¯8081ç«¯å£è®¿é—® methods: [\u0026#34;GET\u0026#34;, \u0026#34;POST\u0026#34;, \u0026#34;PUT\u0026#34;, \u0026#34;DELETE\u0026#34;, \u0026#34;OPTIONS\u0026#34;], // å…è®¸çš„è¯·æ±‚æ–¹æ³• allowedHeaders: [\u0026#34;Content-Type\u0026#34;, \u0026#34;Authorization\u0026#34;], // å…è®¸çš„è¯·æ±‚å¤´ }) ); // æ¥å£è·¯ç”± const merchantRouder = require(\u0026#34;./routes/merchant\u0026#34;); const customerRouder = require(\u0026#34;./routes/service\u0026#34;); const orderRouder = require(\u0026#34;./routes/order\u0026#34;); app.use(\u0026#34;/api/merchant\u0026#34;, merchantRouder); app.use(\u0026#34;/api/service\u0026#34;, customerRouder); app.use(\u0026#34;/api/order\u0026#34;, orderRouder); app.listen(8080, () =\u0026gt; { console.log(\u0026#34;æœåŠ¡å™¨å¯åŠ¨æˆåŠŸï¼\u0026#34;); console.log(\u0026#34;http://localhost:8080\u0026#34;); }); è¿™ç§æ–¹å¼æ— éœ€æ‰‹åŠ¨å¤„ç†é¢„æ£€è¯·æ±‚ï¼ŒcorsåŒ…ä¼šè‡ªåŠ¨æ‹¦æˆªOPTIONSè¯·æ±‚å¹¶è¿”å›æ­£ç¡®å“åº”å¤´ã€‚\n2. æ–¹æ¡ˆ 2ï¼šæ‰‹åŠ¨é…ç½® CORSï¼ˆæ·±å…¥åŸç†ï¼‰ è‹¥ä¸æƒ³ä¾èµ–ç¬¬ä¸‰æ–¹åŒ…ï¼Œå¯æ‰‹åŠ¨è®¾ç½®å“åº”å¤´å¹¶å¤„ç†é¢„æ£€è¯·æ±‚ï¼ˆé€‚åˆç†è§£ CORS åº•å±‚é€»è¾‘ï¼‰ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 // æ‰‹åŠ¨å¤„ç†CORSçš„Expressä»£ç  const express = require(\u0026#34;express\u0026#34;); const app = express(); app.use(express.json()); // è‡ªå®šä¹‰è·¨åŸŸä¸­é—´ä»¶ app.use((req, res, next) =\u0026gt; { // å…è®¸å‰ç«¯8081ç«¯å£è®¿é—® res.setHeader(\u0026#34;Access-Control-Allow-Origin\u0026#34;, \u0026#34;http://localhost:8081\u0026#34;); // å…è®¸çš„è¯·æ±‚æ–¹æ³•ï¼ˆè¦†ç›–æ‰€æœ‰å¸¸ç”¨HTTPæ–¹æ³•ï¼‰ res.setHeader( \u0026#34;Access-Control-Allow-Methods\u0026#34;, \u0026#34;GET, POST, PUT, DELETE, OPTIONS\u0026#34; ); // å…è®¸çš„è¯·æ±‚å¤´ï¼ˆæ”¯æŒJSONã€Tokenç­‰ï¼‰ res.setHeader(\u0026#34;Access-Control-Allow-Headers\u0026#34;, \u0026#34;Content-Type, Authorization\u0026#34;); // å¤„ç†OPTIONSé¢„æ£€è¯·æ±‚ï¼ˆéç®€å•è¯·æ±‚å¿…åŠ ï¼‰ if (req.method === \u0026#34;OPTIONS\u0026#34;) { return res.sendStatus(200); // é¢„æ£€è¯·æ±‚ç›´æ¥è¿”å›200ï¼Œä¸è¿›å…¥ä¸šåŠ¡è·¯ç”± } next(); // éé¢„æ£€è¯·æ±‚ï¼Œç»§ç»­æ‰§è¡Œåç»­ä¸­é—´ä»¶/è·¯ç”± }); // æ¥å£è·¯ç”±ä¸å˜ app.use(\u0026#34;/api/merchant\u0026#34;, require(\u0026#34;./routes/merchant\u0026#34;)); app.use(\u0026#34;/api/service\u0026#34;, require(\u0026#34;./routes/service\u0026#34;)); app.use(\u0026#34;/api/order\u0026#34;, require(\u0026#34;./routes/order\u0026#34;)); app.listen(8080, () =\u0026gt; { console.log(\u0026#34;æœåŠ¡å™¨å¯åŠ¨æˆåŠŸï¼http://localhost:8080\u0026#34;); }); 3. CORS çš„å…³é”®ç»†èŠ‚ é¢„æ£€è¯·æ±‚ï¼ˆOPTIONSï¼‰ï¼šå‰ç«¯å‘é€PUT/DELETEæˆ–å¸¦è‡ªå®šä¹‰å¤´çš„è¯·æ±‚æ—¶ï¼Œæµè§ˆå™¨ä¼šå…ˆå‘OPTIONSè¯·æ±‚â€œæ¢è·¯â€ï¼Œåç«¯å¿…é¡»æ­£ç¡®å“åº”æ‰èƒ½è§¦å‘çœŸå®è¯·æ±‚ï¼› Access-Control-Allow-Originï¼šç”Ÿäº§ç¯å¢ƒéœ€æŒ‡å®šå…·ä½“åŸŸåï¼ˆå¦‚https://your-domain.comï¼‰ï¼Œè€Œéé€šé…ç¬¦*ï¼ˆå¦åˆ™å‰ç«¯æ— æ³•æºå¸¦ Cookie/Tokenï¼‰ï¼› ç®€å•è¯·æ±‚è±å…é¢„æ£€ï¼šGET/POST/HEADè¯·æ±‚ä¸”è¯·æ±‚å¤´ä»…å«Accept/Content-Typeç­‰åŸºç¡€å­—æ®µæ—¶ï¼Œæ— éœ€é¢„æ£€ã€‚ ä¸‰ã€devServer åå‘ä»£ç†ï¼šå‰ç«¯å¼€å‘ç¯å¢ƒçš„è·¨åŸŸæ·å¾„ è™½ç„¶ CORS èƒ½è§£å†³è·¨åŸŸï¼Œä½†å¼€å‘é˜¶æ®µé¢‘ç¹ä¿®æ”¹åç«¯é…ç½®æ•ˆç‡ä½ã€‚Vue CLI çš„devServer.proxyé€šè¿‡åå‘ä»£ç†ç»•è¿‡æµè§ˆå™¨è·¨åŸŸé™åˆ¶ï¼Œæ˜¯æ›´ä¼˜é›…çš„å¼€å‘æ–¹æ¡ˆã€‚\n1. åå‘ä»£ç†çš„å·¥ä½œåŸç† devServer.proxyè®©å‰ç«¯å¼€å‘æœåŠ¡å™¨å……å½“â€œä¸­é—´äººâ€ï¼š\nå‰ç«¯è¯·æ±‚åŒæºçš„å¼€å‘æœåŠ¡å™¨ï¼ˆå¦‚http://localhost:8081/api/merchantï¼‰ï¼› å¼€å‘æœåŠ¡å™¨å°†è¯·æ±‚è½¬å‘ç»™åç«¯ï¼ˆhttp://localhost:8080/api/merchantï¼‰ï¼› åç«¯å“åº”ç»“æœç”±å¼€å‘æœåŠ¡å™¨å›ä¼ ç»™å‰ç«¯ã€‚ æ•´ä¸ªè¿‡ç¨‹ä¸­æµè§ˆå™¨ä»…ä¸åŒæºçš„localhost:8081äº¤äº’ï¼Œè‡ªç„¶ä¸ä¼šè§¦å‘è·¨åŸŸé™åˆ¶ã€‚\n2. å‰ç«¯é…ç½®æºç è§£æï¼ˆvue.config.jsï¼‰ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 // web-admin/vue.config.js module.exports = { devServer: { port: 8081, // å‰ç«¯å¼€å‘ç«¯å£ï¼ˆé¿å¼€åç«¯8080ç«¯å£å†²çªï¼‰ open: true, // å¯åŠ¨åè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ proxy: { \u0026#34;/api\u0026#34;: { target: \u0026#34;http://localhost:8080\u0026#34;, // åç«¯æ¥å£çœŸå®åœ°å€ changeOrigin: true, // æ¨¡æ‹Ÿåç«¯æœåŠ¡å™¨çš„Originï¼ˆå…³é”®ï¼é¿å…åç«¯è·¨åŸŸæ‹¦æˆªï¼‰ // pathRewrite: { \u0026#34;^/api\u0026#34;: \u0026#34;\u0026#34; }, // åç«¯æ¥å£æ— /apiå‰ç¼€æ—¶å¯ç”¨ï¼ˆå¦‚åç«¯æ˜¯/merchantï¼‰ }, }, }, }; 3. å…³é”®é…ç½®è¯´æ˜ targetï¼šåç«¯æ¥å£çš„æ ¹åœ°å€ï¼› changeOrigin: trueï¼šè®©åç«¯è¯¯ä»¥ä¸ºè¯·æ±‚æ¥è‡ªlocalhost:8080ï¼ˆåŒæºï¼‰ï¼Œé¿å…åç«¯çš„è·¨åŸŸæ‹¦æˆªé€»è¾‘ï¼› pathRewriteï¼šç¤ºä¾‹ä¸­æ³¨é‡Šæ‰æ˜¯å› ä¸ºåç«¯æ¥å£å¸¦/apiå‰ç¼€ï¼ˆå¦‚/api/merchantï¼‰ï¼Œè‹¥åç«¯æ¥å£æ— /apiï¼Œéœ€é€šè¿‡æ­¤é…ç½®å»æ‰å‰ç¼€ã€‚ 4. è¸©å‘å®å½•ï¼šä¸ºä»€ä¹ˆå»æ‰ CORS ä»æŠ¥é”™ï¼Ÿ å¾ˆå¤šå¼€å‘è€…ç–‘æƒ‘ï¼šâ€œæ˜æ˜é…äº†devServer.proxyï¼Œä¸ºä»€ä¹ˆåç«¯å»æ‰ CORS è¿˜æ˜¯æŠ¥è·¨åŸŸé”™ï¼Ÿâ€\næ ¸å¿ƒåŸå› æ˜¯éç®€å•è¯·æ±‚çš„OPTIONSé¢„æ£€è¯·æ±‚ä¼šè¢«ä»£ç†è½¬å‘åˆ°åç«¯ï¼Œè€Œåç«¯æœªå¤„ç†é¢„æ£€â€”â€”å“ªæ€•å‰ç«¯ç”¨äº†ä»£ç†ï¼Œæµè§ˆå™¨æ”¶åˆ°åç«¯éæ³•çš„é¢„æ£€å“åº”åï¼Œä»ä¼šåˆ¤å®šè·¨åŸŸå¤±è´¥ã€‚\nï¼ˆ1ï¼‰é¢„æ£€è¯·æ±‚çš„â€œè½¬å‘é™·é˜±â€ å‰ç«¯devServer.proxyä¼šè½¬å‘æ‰€æœ‰è¯·æ±‚ï¼ˆåŒ…æ‹¬OPTIONSé¢„æ£€è¯·æ±‚ï¼‰åˆ°åç«¯ã€‚æ¯”å¦‚å‰ç«¯å‘é€POST /api/merchantï¼ˆå¸¦ JSON æ•°æ®ï¼Œå±äºéç®€å•è¯·æ±‚ï¼‰ï¼š\næµè§ˆå™¨å…ˆå‘é€OPTIONS /api/merchantåˆ°å‰ç«¯å¼€å‘æœåŠ¡å™¨ï¼ˆlocalhost:8081ï¼‰ï¼› å¼€å‘æœåŠ¡å™¨æŠŠè¿™ä¸ªOPTIONSè¯·æ±‚è½¬å‘åˆ°åç«¯ï¼ˆlocalhost:8080/api/merchantï¼‰ï¼› è‹¥åç«¯æ²¡é…ç½® CORSã€ä¹Ÿæ²¡æ‰‹åŠ¨å¤„ç†OPTIONSï¼Œä¼šè¿”å›æ— è·¨åŸŸå“åº”å¤´çš„é»˜è®¤å“åº”ï¼ˆç”šè‡³ 404ï¼‰ï¼› æµè§ˆå™¨æ”¶åˆ°è¿™ä¸ªéæ³•å“åº”ï¼Œç›´æ¥æŠ›å‡ºè·¨åŸŸé”™è¯¯ï¼ŒçœŸå®çš„POSTè¯·æ±‚æ ¹æœ¬ä¸ä¼šå‘é€ã€‚ ä½ çš„åç«¯ä»£ç ï¼ˆå»æ‰corsä¸”æ— é¢„æ£€å¤„ç†ï¼‰ï¼š\n1 2 3 4 // åç«¯æœªå¤„ç†OPTIONSé¢„æ£€è¯·æ±‚ app.use(express.json()); // æ— CORSé…ç½®ï¼Œä¹Ÿæ— OPTIONSå¤„ç†é€»è¾‘ app.use(\u0026#34;/api/merchant\u0026#34;, merchantRouder); æ­¤æ—¶åç«¯å¯¹OPTIONSè¯·æ±‚çš„å“åº”é‡Œæ²¡æœ‰Access-Control-Allow-Originç­‰å¤´ï¼Œæµè§ˆå™¨è‡ªç„¶åˆ¤å®šè·¨åŸŸå¤±è´¥ã€‚\nï¼ˆ2ï¼‰å¼€å‘ç¯å¢ƒæœ€ä¼˜è§£ï¼šä¿ç•™ä»£ç†+åç«¯æç®€é¢„æ£€å¤„ç† æ‰€è°“â€œåç«¯æ— éœ€é…ç½® CORSâ€ï¼Œå¹¶éå®Œå…¨ä¸ç”¨å¤„ç†è·¨åŸŸï¼Œè€Œæ˜¯ä¸ç”¨ä¾èµ–corsåŒ…ï¼Œä½†éœ€æ‰‹åŠ¨å¤„ç†é¢„æ£€è¯·æ±‚ï¼ˆä»…éœ€å‡ è¡Œä»£ç ï¼‰ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 const express = require(\u0026#34;express\u0026#34;); const app = express(); app.use(express.json()); // æç®€é¢„æ£€å¤„ç†ï¼ˆå¼€å‘ç¯å¢ƒå¤Ÿç”¨ï¼‰ app.use((req, res, next) =\u0026gt; { // å…è®¸å‰ç«¯æºï¼ˆå¼€å‘ç¯å¢ƒå¯ç›´æ¥ç”¨*ï¼Œç”Ÿäº§ç¯å¢ƒéœ€æŒ‡å®šåŸŸåï¼‰ res.setHeader(\u0026#34;Access-Control-Allow-Origin\u0026#34;, \u0026#34;*\u0026#34;); // å…è®¸çš„è¯·æ±‚æ–¹æ³•å’Œå¤´ï¼ˆè¦†ç›–éç®€å•è¯·æ±‚éœ€æ±‚ï¼‰ res.setHeader( \u0026#34;Access-Control-Allow-Methods\u0026#34;, \u0026#34;GET, POST, PUT, DELETE, OPTIONS\u0026#34; ); res.setHeader(\u0026#34;Access-Control-Allow-Headers\u0026#34;, \u0026#34;Content-Type\u0026#34;); // æ‹¦æˆªOPTIONSé¢„æ£€è¯·æ±‚ï¼Œç›´æ¥è¿”å›200 if (req.method === \u0026#34;OPTIONS\u0026#34;) { return res.sendStatus(200); } next(); }); app.use(\u0026#34;/api/merchant\u0026#34;, merchantRouder); // ...å…¶ä»–è·¯ç”± app.listen(8080); è¿™æ ·åç«¯èƒ½åˆæ³•å“åº”é¢„æ£€è¯·æ±‚ï¼Œå‰ç«¯ä»£ç†å°±èƒ½æ­£å¸¸å·¥ä½œâ€”â€”æ—¢ä¸ç”¨è£…corsåŒ…ï¼Œä¹Ÿèƒ½é¿å…è·¨åŸŸé”™è¯¯ã€‚\nï¼ˆ3ï¼‰ç®€å•è¯·æ±‚çš„â€œä¾‹å¤–æƒ…å†µâ€ å¦‚æœå‰ç«¯åªå‘ç®€å•è¯·æ±‚ï¼ˆæ¯”å¦‚GET /api/merchantï¼Œæ— è‡ªå®šä¹‰å¤´ã€æ— å¤æ‚æ•°æ®ï¼‰ï¼Œå³ä½¿åç«¯æ²¡å¤„ç†é¢„æ£€ï¼Œä¹Ÿå¯èƒ½æˆåŠŸï¼š\nç®€å•è¯·æ±‚ä¸ä¼šè§¦å‘OPTIONSé¢„æ£€ï¼Œå‰ç«¯ä»£ç†ç›´æ¥è½¬å‘GETè¯·æ±‚åˆ°åç«¯ï¼› åç«¯è¿”å›æ•°æ®ç»™å‰ç«¯æœåŠ¡å™¨ï¼Œå‰ç«¯æœåŠ¡å™¨å†è¿”å›ç»™æµè§ˆå™¨ï¼ˆæµè§ˆå™¨åªçœ‹å‰ç«¯æœåŠ¡å™¨çš„åŒæºå“åº”ï¼Œä¸ä¼šæ ¡éªŒåç«¯çš„è·¨åŸŸå¤´ï¼‰ã€‚ ä½†åªè¦æ¶‰åŠPOSTï¼ˆJSON æ•°æ®ï¼‰ã€PUT/DELETEç­‰éç®€å•è¯·æ±‚ï¼Œå¿…é¡»å¤„ç†é¢„æ£€ï¼Œå¦åˆ™å¿…æŠ¥é”™ã€‚\nå››ã€Nginx åå‘ä»£ç†ï¼šç”Ÿäº§ç¯å¢ƒçš„ç»ˆææ–¹æ¡ˆ devServer.proxyä»…é€‚ç”¨äºå¼€å‘ç¯å¢ƒï¼Œç”Ÿäº§ç¯å¢ƒéœ€ç”¨ Nginx åå‘ä»£ç†â€”â€”æ—¢èƒ½è§£å†³è·¨åŸŸï¼Œåˆèƒ½ä¼˜åŒ–èµ„æºåŠ è½½å’Œæ¥å£è½¬å‘ï¼Œæ˜¯å‰ç«¯éƒ¨ç½²çš„æ ‡é…ã€‚\n1. Nginx åå‘ä»£ç†çš„ä¼˜åŠ¿ ç»Ÿä¸€åŸŸåï¼šå°†å‰ç«¯é™æ€èµ„æºå’Œåç«¯æ¥å£ä»£ç†åˆ°åŒä¸€åŸŸåä¸‹ï¼ˆå¦‚https://your-domain.comï¼‰ï¼› æ€§èƒ½ä¼˜åŒ–ï¼šæ”¯æŒç¼“å­˜ã€å‹ç¼©ã€è´Ÿè½½å‡è¡¡ï¼› å®‰å…¨é˜²æŠ¤ï¼šéšè—åç«¯çœŸå®åœ°å€ï¼Œé™ä½æ”»å‡»é£é™©ã€‚ 2. Nginx é…ç½®ç¤ºä¾‹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 # nginx.conf æˆ– conf.d/your-project.conf server { listen 80; # ç›‘å¬80ç«¯å£ï¼ˆHTTPï¼‰ server_name your-domain.com; # ç”Ÿäº§ç¯å¢ƒåŸŸå # å‰ç«¯é™æ€èµ„æºé…ç½®ï¼ˆVueæ‰“åŒ…åçš„distç›®å½•ï¼‰ location / { root /usr/share/nginx/html/your-project; # å‰ç«¯distç›®å½•è·¯å¾„ index index.html index.htm; # é»˜è®¤é¦–é¡µ try_files $uri $uri/ /index.html; # è§£å†³Vue Historyè·¯ç”±åˆ·æ–°404é—®é¢˜ } # åç«¯æ¥å£åå‘ä»£ç† location /api { proxy_pass http://localhost:8080; # è½¬å‘åˆ°åç«¯æœåŠ¡åœ°å€ proxy_set_header Host $host; # ä¼ é€’è¯·æ±‚ä¸»æœºå proxy_set_header X-Real-IP $remote_addr; # ä¼ é€’å®¢æˆ·ç«¯çœŸå®IP proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; # ä¼ é€’ä»£ç†é“¾IP } } 3. HTTPS é…ç½®ï¼ˆç”Ÿäº§ç¯å¢ƒå¿…åŠ ï¼‰ è‹¥éœ€æ”¯æŒ HTTPSï¼Œåªéœ€æ·»åŠ  SSL è¯ä¹¦é…ç½®ï¼š\n1 2 3 4 5 6 7 8 9 10 server { listen 443 ssl; server_name your-domain.com; # SSLè¯ä¹¦è·¯å¾„ ssl_certificate /etc/nginx/ssl/your-domain.crt; ssl_certificate_key /etc/nginx/ssl/your-domain.key; # å‰ç«¯é™æ€èµ„æº+æ¥å£ä»£ç†é…ç½®åŒä¸Š... } äº”ã€æ€»ç»“ å¼€å‘ç¯å¢ƒï¼šä¼˜å…ˆä½¿ç”¨devServer.proxyåå‘ä»£ç†ï¼Œæ— éœ€é¢‘ç¹ä¿®æ”¹åç«¯é…ç½®ï¼› ç”Ÿäº§ç¯å¢ƒï¼šæ¨è Nginx åå‘ä»£ç†ï¼ˆç»Ÿä¸€åŸŸå+æ€§èƒ½ä¼˜åŒ–ï¼‰ï¼Œæˆ–åç«¯é…ç½® CORSï¼ˆä¸å¸¸ç”¨ï¼Œè¿™ç®—é»‘é­”æ³•ï¼‰ï¼› CORS æ ¸å¿ƒï¼šå¤„ç†é¢„æ£€è¯·æ±‚+è®¾ç½®æ­£ç¡®çš„å“åº”å¤´ï¼› åå‘ä»£ç†æ ¸å¿ƒï¼šè®©å‰ç«¯è¯·æ±‚åŒæºåœ°å€ï¼Œç”±ä»£ç†æœåŠ¡å™¨è½¬å‘åˆ°åç«¯ã€‚ ç»“åˆæºç ç†è§£è¿™ä¸¤ç§æ–¹æ¡ˆï¼Œè·¨åŸŸé—®é¢˜å°±èƒ½è¿åˆƒè€Œè§£ï¼\n","date":"2025-11-29T22:36:00+08:00","permalink":"https://ye-guan-xing.github.io/p/%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E8%AE%B2%E8%A7%A3/","title":"è·¨åŸŸé—®é¢˜è®²è§£"},{"content":"è¯´æ˜ æˆ‘è¿™é‡Œå†™ä¸ªæ˜¯ä¸ºäº†åšä¸€ä¸‹æ•´ç† æˆ‘è§‰å¾—æœ‰è¶£ï¼Œå¦‚æœå¼€å‘ç´¯äº†ï¼Œå¯ä»¥æ¢ä¸€æ¢è„‘å­ æ³¨ï¼šé¢˜ç›®å¯ç›´æŠµé¢˜ç›®ï¼Œæ‰€ä»¥ä¸å†™é¢˜ç›®å†…å®¹ é¢˜ç›®è®²è§£ ä¸¤æ•°ä¹‹å’Œ å“ˆå“ˆå“ˆ,è™½ç„¶è¿™æ˜¯è®² hot150,ä½†æ˜¯è¿™é“é¢˜è¿˜æ˜¯ è¦è¯´è¯´çš„ æš´åŠ›æ³• æš´åŠ›æ³•å°±æ˜¯éå†æ‰€æœ‰æ•°ï¼Œç„¶åä¸¤ä¸¤ç›¸åŠ ï¼Œå¦‚æœå’Œç­‰äºç›®æ ‡å€¼ï¼Œåˆ™è¿”å›ç»“æœï¼Œå¦åˆ™è¿”å›-1 1 2 3 4 5 6 7 8 9 10 11 12 13 14 class Solution { public: vector\u0026lt;int\u0026gt; twoSum(std::vector\u0026lt;int\u0026gt;\u0026amp; nums, int target) { int n = nums.size(); for (int i = 0; i \u0026lt; n; i++) { for (int j = i + 1; j \u0026lt; n; j++) { if (nums[i] + nums[j] == target) { return {i, j}; } } } return {}; } }; å“ˆå¸Œè¡¨ å“ˆå¸Œè¡¨å°±æ˜¯å°†æ•°ç»„ä¸­çš„æ•°ä½œä¸ºé”®ï¼Œç´¢å¼•ä½œä¸ºå€¼ï¼Œç„¶åéå†æ•°ç»„ï¼Œå°†æ¯ä¸ªæ•°ä½œä¸ºé”®ï¼Œç´¢å¼•ä½œä¸ºå€¼ï¼Œå¦‚æœå“ˆå¸Œè¡¨ä¸­å­˜åœ¨ç›®æ ‡å€¼ï¼Œåˆ™è¿”å›ç»“æœï¼Œå¦åˆ™è¿”å›-1 æ—¶é—´å¤æ‚åº¦ï¼šO(n) ä¸ºä»€ä¹ˆå¯ä»¥ä¼˜åŒ–æ—¶é—´å‘¢ï¼Ÿ å› ä¸ºå“ˆå¸Œè¡¨çš„æŸ¥æ‰¾æ—¶é—´æ‚åº¦æ˜¯ O(1)ï¼Œè€Œæ•°ç»„çš„æŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ï¼Œæ‰€ä»¥å“ˆå¸Œè¡¨å¯ä»¥æé«˜æŸ¥æ‰¾æ•ˆç‡ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 class Solution { public: vector\u0026lt;int\u0026gt; twoSum(std::vector\u0026lt;int\u0026gt;\u0026amp; nums, int target) { int n = nums.size(); unordered_map\u0026lt;int,int\u0026gt;mp; for(int i=0;i\u0026lt;n;i++){ if(mp.find(target-nums[i])!=mp.end()){ return {i,mp[target-nums[i]]}; } mp[nums[i]]=i; } return {}; } }; åˆ é™¤æœ‰åºæ•°ç»„ä¸­çš„é‡å¤é¡¹ è¿™é‡Œå°† I å’Œ II çš„è§£æ³•éƒ½ç»™å‡ºï¼Œå¹¶ç»™å‡ºè¿‡ç¨‹ é¢˜ç›® I æˆ‘çš„æƒ³æ³•æ˜¯è¿™æ ·çš„ï¼Œæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œstl å¤§æ³•å¥½ 1 2 3 4 5 6 7 class Solution { public: int removeDuplicates(vector\u0026lt;int\u0026gt;\u0026amp; nums) { nums.erase(unique(nums.begin(),nums.end()),nums.end()); return nums.size(); } }; å¦‚æœä¸èƒ½ç”¨å‘¢ï¼Ÿç”¨å¿«æ…¢æŒ‡é’ˆï¼Œæ…¢æŒ‡é’ˆæœ€åçš„ä½ç½®å°±æ˜¯å»é‡åçš„æ•°ç»„é•¿åº¦ï¼Œå¯ä»¥ä¼˜åŒ–ç©ºé—´å¤æ‚åº¦è™½ç„¶ç©ºé—´ä¸å€¼é’± 1 2 3 4 5 6 7 8 9 10 11 12 13 class Solution { public: int removeDuplicates(vector\u0026lt;int\u0026gt;\u0026amp; nums) { int k=0; for(int i=0;i\u0026lt;nums.size();i++){ if(nums[i]!=nums[k]){ k++; nums[k]=nums[i]; } } return k+1;//ä»0å¼€å§‹è®¡æ•° } }; é¢˜ç›® II æˆ‘çš„æ€è·¯ï¼šéå†æ•°ç»„ï¼Œåˆ¤æ–­å½“å‰å…ƒç´ æ˜¯å¦å’Œå‰ä¸¤ä¸ªå…ƒç´ ç›¸åŒï¼Œç›¸åŒåˆ™è·³è¿‡ï¼Œä¸åŒåˆ™èµ‹ç»™ä¸‹ä¸€ä¸ªä½ç½®å¥½åƒä¹Ÿæ˜¯åŒæŒ‡é’ˆ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 class Solution { public: int removeDuplicates(vector\u0026lt;int\u0026gt;\u0026amp; nums) { int n=nums.size(); if(n\u0026lt;=2) return n; int j=2; for(int i=2;i\u0026lt;n;i++){ if(nums[i]!=nums[j-2]){ nums[j]=nums[i]; j++; } //ç›¸åŒåˆ™è·³è¿‡ } return j; } }; åŒæŒ‡é’ˆæ€è·¯ï¼šåŒä¸€çš„å¿«æ…¢æŒ‡é’ˆæ€è·¯ï¼Œåªæ˜¯åˆ¤æ–­æ¡ä»¶ä¸åŒ O(n) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 class Solution { public: int removeDuplicates(vector\u0026lt;int\u0026gt;\u0026amp; nums) { int n=nums.size(); if(n\u0026lt;=2) return n; int j=0; int cnt=1; for(int i=1;i\u0026lt;n;i++){ if(nums[i]==nums[j]){ if(cnt\u0026gt;=2) continue; cnt++; j++; nums[j]=nums[i]; } else{ cnt=1; j++; nums[j]=nums[i]; } } return j+1; } }; O(1) æ—¶é—´æ’å…¥ã€åˆ é™¤å’Œè·å–éšæœºå…ƒç´  è¯´å®è¯æˆ‘ä¸ä¼šï¼Œè¿™æ˜¯æˆ‘æƒ³çš„ï¼Œç®—æš´åŠ›å§ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 class RandomizedSet { public: RandomizedSet() { srand(time(0)); } int find(int val){ for(int i = 0; i \u0026lt; a.size(); i++){ if (a[i] == val){ return i; } } return -1; } bool insert(int val) { int loc=find(val); if(loc==-1){ a.push_back(val); return 1; } return 0; } bool remove(int val) { int loc=find(val); if(loc==-1) return 0; else{ a.erase(a.begin()+loc); return 1; } } int getRandom() { if(a.size()==0) return 0; return a[rand()%a.size()]; } public: vector\u0026lt;int\u0026gt;a; }; è¿‡äº†å¥½ä¸€æ®µæ—¶é—´ï¼Œæ‰æƒ³åˆ°çš„å“ˆå¸Œ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 class RandomizedSet { public: unordered_map\u0026lt;int, int\u0026gt; mp; vector\u0026lt;int\u0026gt; a; RandomizedSet() { srand(time(0)); } int find(int val) { if (mp.count(val)) { return mp[val]; } return -1; } bool insert(int val) { if (find(val) != -1) { return false; } a.push_back(val); mp[val] = a.size() - 1; //è¿™ä¸¤æ­¥å†™å®Œï¼Œæ‰ç®—å®Œæˆã€‚ return true; } bool remove(int val) { int loc = find(val); if (loc == -1) { return false; } int last = a.back(); a[loc] = last; mp[last] = loc; mp.erase(val); a.pop_back(); return true; } int getRandom() { if (a.empty()) return 0; return a[rand() % a.size()]; } }; è®²è§£ä¸€ä¸‹remove()æ–¹æ³•(ä¸å¤ªå¥½æƒ³) å…ˆæ˜ç¡®ä¸¤ä¸ªå‰æï¼š\næ•°ç»„açš„ç‰¹ç‚¹ï¼šå°¾éƒ¨å¢åˆ å…ƒç´ ï¼ˆpush_back/pop_backï¼‰æ˜¯ O (1) æ—¶é—´ï¼Œä½†ä¸­é—´åˆ é™¤å…ƒç´ ï¼ˆeraseï¼‰æ˜¯ O (n) æ—¶é—´ï¼ˆå› ä¸ºåé¢çš„å…ƒç´ è¦æ•´ä½“å‰ç§»ï¼‰ã€‚ å“ˆå¸Œè¡¨mpçš„ä½œç”¨ï¼šè®°å½• â€œå…ƒç´ å€¼â†’æ•°ç»„ç´¢å¼•â€ï¼Œæ¯”å¦‚mp[3]=2è¡¨ç¤ºå…ƒç´  3 åœ¨æ•°ç»„açš„ç´¢å¼• 2 ä½ç½®ã€‚ ä½ å¯èƒ½è§‰å¾— â€œå…ƒç´ è¦ç›¸è¿æ‰åˆç†â€ï¼Œä½†çš„æ ¸å¿ƒéœ€æ±‚æ˜¯ï¼š æ’å…¥ / åˆ é™¤ / éšæœºè®¿é—®éƒ½æ˜¯ O (1)ï¼› å…ƒç´ ä¸é‡å¤ã€‚ å®ƒä¸è¦æ±‚å…ƒç´ ä¿æŒä»»ä½•é¡ºåºï¼Œæ‰€ä»¥å“ªæ€•ç”¨ â€œå…«ç«¿å­æ‰“ä¸ç€çš„æœ€åä¸€ä¸ªå…ƒç´ â€ æ›¿æ¢ï¼Œåªè¦æœ€ç»ˆåˆ æ‰äº†ç›®æ ‡å…ƒç´ ï¼Œä¸”å“ˆå¸Œè¡¨æ˜ å°„æ­£ç¡®ï¼Œå°±å®Œå…¨ç¬¦åˆè¦æ±‚ã€‚ å…¶å®ä½ æƒ³æƒ³è¿™æ˜¯ä¸€ä¸ªè¯¯åŒºï¼Œæ•°ç»„çš„é¡ºåºåè€Œä¸é‡è¦ æ¥é›¨æ°´ ç½‘çº¢é¢˜ç›®,ä¸å¿…å¤šè¨€æ®è¯´å­—èŠ‚çš„æ‰«åœ°é˜¿å§¨éƒ½ä¼šåš æˆ‘çš„æ€è·¯ï¼šå…¶å®æˆ‘ä¸ç†è§£ä¸ºä»€ä¹ˆè¯´éš¾çœ‹ä¸€ä¸ªæŸ±å­èƒ½æ¥å¤šå°‘æ°´ï¼Œåº”è¯¥å°±èƒ½æƒ³åˆ°è´ªå¿ƒ+åŒæŒ‡é’ˆ/å•è°ƒæ ˆ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 class Solution { public: int trap(vector\u0026lt;int\u0026gt;\u0026amp; height) { int lmax=0,rmax=0; int l=0,r=height.size()-1; int n=height.size(); int ans=0; while(l\u0026lt;r){ lmax=max(lmax,height[l]); rmax=max(rmax,height[r]); if(lmax\u0026gt;rmax) { ans+=rmax-height[r]; r--; } else{ ans+=lmax-height[l]; l++; } } return ans; } }; ","date":"2025-11-28T08:36:00+08:00","permalink":"https://ye-guan-xing.github.io/p/%E5%8A%9B%E6%89%A3hot150%E7%B2%BE%E8%AE%B2/","title":"åŠ›æ‰£hot150(ç²¾è®²)"},{"content":"å¤§ä¸€æ–°ç”Ÿ IT å­¦ä¹ è·¯çº¿æŒ‡å— äº²çˆ±çš„å¤§ä¸€æ–°ç”Ÿï¼Œåˆšè¸å…¥å¤§å­¦ï¼Œé¢å¯¹ä¸°å¯Œå¤šå½©çš„ IT é¢†åŸŸæˆ–è®¸ä¼šæœ‰äº›è¿·èŒ«ï¼Œè¿™é‡Œå­¦é•¿ç»™ä¸€äº›è·¯å¾„å»ºè®®ï¼š\nç®—æ³•ç«èµ› -ç®—æ³•ç«èµ› 1970 å¹´ä»£èµ·æ­¥ï¼Œ1990-2000 å¹´ä»£å…´ç››ï¼Œ21 ä¸–çºªåè¶‹ç¨³å®š,å…¶ä¸­ ACM-ICPC ä¸ºè®¡ç®—æœºç«èµ›å«é‡‘é‡ä¹‹æœ€ï¼Œè·å¥–è€…å¤šèƒ½è·å¾—è®¡ç®—æœºå¤§å‚ offerã€‚\né“¾æ¥ï¼šç®—æ³•ç«èµ› PS(å¦‚æœæœ‰å¤©èµ‹ï¼Œæœ‰æ’å¿ƒï¼Œæœ‰æ¯…åŠ›ï¼Œåœ¨ç»è¿‡æµ‹éªŒå(æˆ– Codeforces1200 åˆ†ä»¥ä¸Š)ï¼Œå¯ä»¥æ‰¾æˆ‘ä»¬å‚åŠ æ˜å¹´çš„ HBCPC). ç™½åå•ç«èµ›æ¨è ç«èµ›åç§° å®˜ç½‘é“¾æ¥ ACM-ICPC å›½é™…å¤§å­¦ç”Ÿç¨‹åºè®¾è®¡ç«èµ› https://icpc.global/ ä¸­å›½å¤§å­¦ç”Ÿç¨‹åºè®¾è®¡ç«èµ›ï¼ˆCCPCï¼‰ https://ccpc.io/ ä¸­å›½é«˜æ ¡è®¡ç®—æœºå¤§èµ›ï¼ˆå¤©æ¢¯èµ›ï¼‰ http://www.c4best.cn/ è“æ¡¥æ¯å…¨å›½è½¯ä»¶å’Œä¿¡æ¯æŠ€æœ¯ä¸“ä¸šäººæ‰å¤§èµ› http://dasai.lanqiao.cn/ ç™¾åº¦ä¹‹æ˜Ÿç¨‹åºè®¾è®¡å¤§èµ› https://star.baidu.com/#/ ç è¹„æ¯å…¨å›½èŒä¸šé™¢æ ¡ç¨‹åºè®¾è®¡å¤§èµ› https://matiji.net/matibei ç¿æŠ—æœºå™¨äººå¼€å‘è€…å¤§èµ›(RAICOM) https://www.robocom.com.cn/ äººå·¥æ™ºèƒ½æ–¹å‘ åœ¨ 50-60 å¹´ä»£å…´èµ·ï¼Œäººä»¬ä¸€ç›´åœ¨åŠªåŠ›ï¼Œäº 2012 å¼•çˆ†æ·±åº¦å­¦ä¹ ï¼Œåœ¨ä¹‹åï¼ŒCharGPT å’Œ Deepseekã€GPT3 ç­‰æ¨¡å‹ï¼Œè¢«ç”¨äºå„ç§é¢†åŸŸï¼Œå¦‚å›¾åƒè¯†åˆ«ã€è¯­éŸ³è¯†åˆ«ã€æ–‡æœ¬ç”Ÿæˆã€ä»£ç ç”Ÿæˆã€ç¿»è¯‘ç­‰ï¼Œåˆ°ç°åœ¨å·²æˆä¸ºæœ€çƒ­é—¨çš„æ–¹å‘ï¼Œå…¶å°±ä¸šå²—ä½ï¼Œè–ªèµ„é«˜ã€é—¨æ§›é«˜\u0026ndash;å¤šåœ¨ç ”ç©¶ç”Ÿä¸ºä¸» æœºå™¨å­¦ä¹  å­¦ä¹ è·¯çº¿é“¾æ¥ï¼šæœºå™¨å­¦ä¹  ç®€ä»‹ï¼šæœºå™¨å­¦ä¹ æ˜¯äººå·¥æ™ºèƒ½çš„æ ¸å¿ƒï¼Œé€šè¿‡ç®—æ³•è®©è®¡ç®—æœºä»æ•°æ®ä¸­â€œå­¦ä¹ è§„å¾‹â€ã€‚ä½ å°†å­¦ä¹ å†³ç­–æ ‘ã€æ”¯æŒå‘é‡æœºç­‰å„ç±»æœºå™¨å­¦ä¹ ç®—æ³•ï¼Œå¹¶ç”¨å®ƒä»¬è§£å†³åˆ†ç±»ã€å›å½’ã€èšç±»ç­‰å®é™…é—®é¢˜ã€‚ æ·±åº¦å­¦ä¹  å­¦ä¹ è·¯çº¿é“¾æ¥ï¼šæ·±åº¦å­¦ä¹  ç®€ä»‹ï¼šæ·±åº¦å­¦ä¹ æ˜¯æœºå™¨å­¦ä¹ çš„â€œè¿›é˜¶ç‰ˆâ€ï¼Œé€šè¿‡ç¥ç»ç½‘ç»œæ¨¡æ‹Ÿäººè„‘å­¦ä¹ ã€‚ä½ å°†å­¦ä¹  CNNï¼ˆå·ç§¯ç¥ç»ç½‘ç»œï¼‰ã€RNNï¼ˆå¾ªç¯ç¥ç»ç½‘ç»œï¼‰ç­‰ç½‘ç»œç»“æ„ï¼Œåº”ç”¨äºå›¾åƒè¯†åˆ«ã€è¯­éŸ³è¯†åˆ«ã€è‡ªç„¶è¯­è¨€å¤„ç†ç­‰å¤æ‚åœºæ™¯ã€‚ è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰ å­¦ä¹ è·¯çº¿é“¾æ¥ï¼šè‡ªç„¶è¯­è¨€å¤„ç† NLP ç®€ä»‹ï¼šNLP è®©è®¡ç®—æœºâ€œç†è§£äººç±»è¯­è¨€â€ã€‚å­¦ä¹ åä½ å¯ä»¥æŒæ¡åˆ†è¯ã€è¯­ä¹‰åˆ†æã€æƒ…æ„Ÿè¯†åˆ«ç­‰æŠ€æœ¯ï¼Œå¼€å‘èŠå¤©æœºå™¨äººã€æ™ºèƒ½é—®ç­”ã€æœºå™¨ç¿»è¯‘ç­‰åº”ç”¨ã€‚ è®¡ç®—æœºè§†è§‰ï¼ˆCVï¼‰å·¥ç¨‹å¸ˆ å­¦ä¹ è·¯çº¿é“¾æ¥ï¼šè®¡ç®—æœºè§†è§‰ cv å·¥ç¨‹å¸ˆ ç®€ä»‹ï¼šCV è®©è®¡ç®—æœºâ€œçœ‹è§å¹¶ç†è§£ä¸–ç•Œâ€ã€‚ä½ å°†å­¦ä¹ å›¾åƒå¤„ç†ã€ç›®æ ‡æ£€æµ‹ã€å›¾åƒè¯†åˆ«ç­‰æŠ€æœ¯ï¼Œåº”ç”¨äºè‡ªåŠ¨é©¾é©¶ã€äººè„¸è¯†åˆ«ã€å·¥ä¸šè´¨æ£€ç­‰é¢†åŸŸã€‚ å‰ç«¯å¼€å‘ è·¯çº¿å›¾é“¾æ¥ï¼šå‰ç«¯å¼€å‘çš„è·¯çº¿å›¾ ç®€ä»‹ï¼šå‰ç«¯å¼€å‘èšç„¦äºç½‘é¡µçš„â€œè§†è§‰ä¸äº¤äº’â€ï¼Œä»ç²¾ç¾ç•Œé¢åˆ°çµåŠ¨äº¤äº’æ•ˆæœéƒ½ç”±å‰ç«¯å·¥ç¨‹å¸ˆæ‰“é€ ã€‚å°±ä¸šå¸‚åœºä¸Šï¼Œå‰ç«¯å¼€å‘èµ·æ­¥äº 2000 å¹´åï¼ˆHTML/CSS æ™®åŠã€æ—©æœŸ JavaScript ç®€å•åº”ç”¨è½åœ°ï¼‰ï¼Œ2015 å¹´åéš React/Vue/Angular ç­‰æ¡†æ¶çˆ†å‘è¿›å…¥é¼ç››æœŸï¼ˆä¼ä¸šå¯¹å¤æ‚äº¤äº’ã€å•é¡µåº”ç”¨éœ€æ±‚æ¿€å¢ï¼‰ï¼Œ2020 å¹´åéœ€æ±‚è¶‹äºç¨³å®šï¼ˆæ¡†æ¶ç”Ÿæ€æˆç†Ÿï¼Œä¾§é‡å·¥ç¨‹åŒ–ã€è·¨ç«¯é€‚é…ä¸æ€§èƒ½ä¼˜åŒ–ï¼‰ã€‚è·Ÿç€è¿™ä»½è·¯çº¿å›¾ï¼Œä½ å¯ä»¥ç³»ç»Ÿå­¦ä¹  HTMLã€CSSã€JavaScript åŠå„ç±»å‰ç«¯æ¡†æ¶ï¼Œæˆé•¿ä¸ºèƒ½è®¾è®¡å¹¶å®ç°ç‚«é…·ç½‘é¡µçš„å‰ç«¯å¼€å‘è€…ã€‚ Java åç«¯å¼€å‘ ç®€ä»‹ï¼šJava åç«¯å¼€å‘æ˜¯æ”¯æ’‘ä¼ä¸šä¸šåŠ¡é€»è¾‘çš„â€œæ ¸å¿ƒéª¨æ¶â€ï¼Œè´Ÿè´£æ­å»ºæœåŠ¡å™¨ã€å¤„ç†æ•°æ®äº¤äº’ä¸ä¸šåŠ¡é€»è¾‘å®ç°ã€‚å°±ä¸šå¸‚åœºä¸Šï¼ŒJava åç«¯èµ·æ­¥äº 2000 å¹´å·¦å³ï¼ˆJava EE æ¨å‡ºï¼Œä¼ä¸šçº§åº”ç”¨é€æ­¥é‡‡ç”¨ï¼‰ï¼Œ2010-2020 å¹´éšå¾®æœåŠ¡å…´èµ·ã€Spring ç”Ÿæ€æˆç†Ÿè¿›å…¥é¼ç››æœŸï¼ˆæˆä¸ºå„è¡Œä¸šåç«¯å¼€å‘æ ‡é…ï¼Œéœ€æ±‚çˆ†å‘å¼å¢é•¿ï¼‰ï¼Œ2020 å¹´åè¿›å…¥ç¨³å®šæœŸï¼ˆéœ€æ±‚ä¿æŒé«˜ä½ç¨³å®šï¼Œä¾§é‡é«˜å¹¶å‘ã€äº‘åŸç”Ÿé€‚é…ä¸ç³»ç»Ÿå®‰å…¨æ€§ï¼‰ã€‚å­¦ä¹ è¿™æ¡è·¯çº¿ï¼Œä½ ä¼šæŒæ¡ Java æ ¸å¿ƒè¯­æ³•ã€æ¡†æ¶åº”ç”¨ä¸æœåŠ¡å™¨éƒ¨ç½²ç­‰çŸ¥è¯†ï¼Œæˆé•¿ä¸ºèƒ½æ­å»ºç¨³å®šã€é«˜æ•ˆä¼ä¸šåç«¯ç³»ç»Ÿçš„å¼€å‘å·¥ç¨‹å¸ˆã€‚ æ•°æ®åˆ†æ å­¦ä¹ è·¯çº¿é“¾æ¥ï¼šæ•°æ®åˆ†æå­¦ä¹ è·¯çº¿ ç®€ä»‹ï¼šæ•°æ®åˆ†ææ˜¯ä»æµ·é‡æ•°æ®ä¸­æŒ–æ˜ä»·å€¼çš„â€œé‡‘çŸ¿æŒ–æ˜æœ¯â€ã€‚å°±ä¸šå¸‚åœºä¸Šï¼Œæ•°æ®åˆ†æå²—ä½èµ·æ­¥äº 2010 å¹´å·¦å³ï¼ˆæ•°æ®é‡æ¿€å¢ï¼Œä¼ä¸šéœ€ä¸“èŒäººå‘˜æç‚¼æ•°æ®ä»·å€¼ï¼‰ï¼Œ2018-2023 å¹´éšå¤§æ•°æ®æŠ€æœ¯æˆç†Ÿè¿›å…¥é¼ç››æœŸï¼ˆå„è¡Œä¸šé‡è§†æ•°æ®é©±åŠ¨ï¼Œéœ€æ±‚çˆ†å‘ï¼‰ï¼Œ2023 å¹´åè¿›å…¥ç¨³å®šæœŸï¼ˆéœ€æ±‚å¹³ç¨³ï¼Œä¾§é‡ä¸šåŠ¡ç†è§£ã€æ•°æ®å»ºæ¨¡ä¸å¯è§†åŒ–æ·±åº¦ï¼‰ã€‚é€šè¿‡è¿™æ¡è·¯çº¿ï¼Œä½ å°†æŒæ¡ Pythonã€SQL ç­‰æ•°æ®å¤„ç†å·¥å…·ï¼Œä»¥åŠæ•°æ®åˆ†ææ–¹æ³•å’Œå¯è§†åŒ–æŠ€æœ¯ï¼Œæˆä¸ºèƒ½ä»æ•°æ®ä¸­å‘ç°è§„å¾‹ã€è¾…åŠ©ä¸šåŠ¡å†³ç­–çš„åˆ†æå¸ˆã€‚ ç§»åŠ¨å¼€å‘ å®‰å“å¼€å‘ å­¦ä¹ è·¯çº¿é“¾æ¥ï¼šå®‰å“å¼€å‘è·¯çº¿ ç®€ä»‹ï¼šå®‰å“å¼€å‘ä¸“æ³¨äºå®‰å“æ‰‹æœºåº”ç”¨çš„å¼€å‘ã€‚å°±ä¸šå¸‚åœºä¸Šï¼Œå®‰å“å¼€å‘èµ·æ­¥äº 2008 å¹´ï¼ˆå®‰å“ç³»ç»Ÿå‘å¸ƒåï¼Œæ—©æœŸæ‰‹æœº APP å¼€å‘éœ€æ±‚å‡ºç°ï¼‰ï¼Œ2012-2018 å¹´éšæ™ºèƒ½æ‰‹æœºæ™®åŠè¿›å…¥é¼ç››æœŸï¼ˆç¤¾äº¤ã€å·¥å…·ã€ç”µå•†ç±» APP çˆ†å‘ï¼Œå²—ä½éœ€æ±‚æ—ºç››ï¼‰ï¼Œ2018 å¹´åè¿›å…¥ç¨³å®šæœŸï¼ˆéœ€æ±‚è¶‹äºå¹³ç¨³ï¼Œä¾§é‡è·¨ç«¯é€‚é…ã€æ€§èƒ½ä¼˜åŒ–ä¸é¸¿è’™ç”Ÿæ€å…¼å®¹ï¼‰ã€‚å­¦ä¹ åä½ å¯ä»¥æŒæ¡å®‰å“å¼€å‘æ¡†æ¶ã€UI è®¾è®¡ã€æ€§èƒ½ä¼˜åŒ–ç­‰çŸ¥è¯†ï¼Œæ‰“é€ å„ç±»å®‰å“åº”ç”¨ï¼ˆå¦‚ç¤¾äº¤ APPã€å·¥å…·ç±» APPï¼‰ã€‚ é¸¿è’™å¼€å‘ å­¦ä¹ è·¯çº¿é“¾æ¥ï¼šé¸¿è’™å¼€å‘è·¯çº¿ ç®€ä»‹ï¼šé¸¿è’™æ˜¯é¢å‘å…¨åœºæ™¯çš„åˆ†å¸ƒå¼æ“ä½œç³»ç»Ÿï¼Œå­¦ä¹ é¸¿è’™å¼€å‘å¯ä»¥è®©ä½ æŒæ¡å…¶å¼€å‘æ¡†æ¶å’Œç”Ÿæ€ï¼Œå¼€å‘è·¨æ‰‹æœºã€å¹³æ¿ã€æ™ºèƒ½æ‰‹è¡¨ç­‰è®¾å¤‡çš„åº”ç”¨ã€‚å°±ä¸šå¸‚åœºä¸Šï¼Œé¸¿è’™å¼€å‘èµ·æ­¥äº 2020 å¹´ï¼ˆé¸¿è’™ OS 2.0 å‘å¸ƒï¼Œç”Ÿæ€é€æ­¥æ­å»ºï¼‰ï¼Œå½“å‰å¤„äºå¿«é€Ÿå‘å±•æœŸï¼ˆä¼ä¸šåŠ é€Ÿå¸ƒå±€é¸¿è’™åº”ç”¨ï¼Œéœ€æ±‚é€æ­¥å¢é•¿ï¼Œå°šæœªè¿›å…¥é¼ç››ï¼‰ï¼Œæœªæ¥éšç”Ÿæ€å®Œå–„ï¼ˆè®¾å¤‡è¦†ç›–æ‰©å¤§ã€å¼€å‘å·¥å…·æˆç†Ÿï¼‰å°†è¿›å…¥ç¨³å®šæœŸï¼Œå…·å¤‡é¸¿è’™å¼€å‘èƒ½åŠ›çš„äººæ‰åœ¨ç‰©è”ç½‘ã€æ™ºèƒ½è®¾å¤‡é¢†åŸŸç«äº‰åŠ›çªå‡ºã€‚ ","date":"2025-10-20T16:36:32+08:00","permalink":"https://ye-guan-xing.github.io/p/%E5%A4%A7%E4%B8%80%E7%9A%84%E5%AD%A6%E4%B9%A0%E8%B7%AF%E5%BE%84%E8%BD%AF%E4%BB%B6%E7%AF%87/","title":"å¤§ä¸€çš„å­¦ä¹ è·¯å¾„ï¼ˆè½¯ä»¶ç¯‡ï¼‰"},{"content":"å…¨åŸŸç”Ÿæ´»æœåŠ¡å¹³å° - ä»é›¶å¼€å§‹å®Œæ•´å¼€å‘æŒ‡å— ğŸ¯ é¡¹ç›®æ¦‚è¿° æˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªå®Œæ•´çš„å…¨åŸŸç”Ÿæ´»æœåŠ¡å¹³å°ï¼ŒåŒ…å«ï¼š\nWeb ç®¡ç†åå°ï¼šç®¡ç†å‘˜ç®¡ç†å•†å®¶ã€æœåŠ¡ã€è®¢å• å¾®ä¿¡å°ç¨‹åºï¼šç”¨æˆ·æµè§ˆæœåŠ¡ã€ä¸‹å• åç«¯ APIï¼šNode.js + Express + MySQL æ•°æ®åº“ï¼šMySQLï¼Œä½¿ç”¨ DataGrip ç®¡ç† ğŸ› ï¸ é˜¶æ®µä¸€ï¼šé¡¹ç›®å‡†å¤‡ä¸ç¯å¢ƒæ­å»º ç¬¬ 1 æ­¥ï¼šå®‰è£…å¿…è¦è½¯ä»¶ 1.1 å®‰è£… Node.jsï¼ˆåç«¯è¿è¡Œç¯å¢ƒï¼‰ è®¿é—®ï¼šNode.js ä¸‹è½½ LTS ç‰ˆæœ¬ï¼ˆé•¿æœŸæ”¯æŒç‰ˆï¼‰ åŒå‡»å®‰è£…ï¼Œå…¨éƒ¨ç‚¹\u0026quot;ä¸‹ä¸€æ­¥\u0026quot; éªŒè¯å®‰è£…ï¼šæŒ‰ Win + Rï¼Œè¾“å…¥ cmd å›è½¦ï¼Œè¾“å…¥ï¼š 1 node -v æ˜¾ç¤ºç‰ˆæœ¬å·å¦‚ v18.x.x å³æˆåŠŸï¼\n1.2 å®‰è£… Vue CLIï¼ˆç½‘é¡µç®¡ç†åå°å·¥å…·ï¼‰ åœ¨ cmd ä¸­ç»§ç»­è¾“å…¥ï¼š\n1 npm install -g @vue/cli ç­‰å¾…å®‰è£…å®Œæˆï¼ˆå¯èƒ½éœ€è¦å‡ åˆ†é’Ÿï¼‰\n1.3 å®‰è£…å¾®ä¿¡å¼€å‘è€…å·¥å…·ï¼ˆå°ç¨‹åºå¼€å‘ï¼‰ è®¿é—®ï¼šå¾®ä¿¡å¼€å‘è€…å·¥å…· ä¸‹è½½\u0026quot;ç¨³å®šç‰ˆ\u0026quot;ï¼Œå®‰è£…åç”¨å¾®ä¿¡æ‰«ç ç™»å½• 1.4 å®‰è£… MySQLï¼ˆæ•°æ®åº“ï¼‰ è®¿é—®ï¼šMySQL Community Server ä¸‹è½½ MySQL Community Server å®‰è£…æ—¶è®°ä½è®¾ç½®çš„root å¯†ç ï¼ˆå»ºè®®è®¾ä¸º 123456ï¼‰ 1.5 å®‰è£… DataGripï¼ˆæ•°æ®åº“å¯è§†åŒ–å·¥å…·ï¼‰ è®¿é—®ï¼šDataGrip ä¸‹è½½å®‰è£…ï¼Œå­¦ç”Ÿå¯å…è´¹ä½¿ç”¨ï¼ˆç”¨æ•™è‚²é‚®ç®±æ³¨å†Œï¼‰ æˆ–ä½¿ç”¨ 30 å¤©å…è´¹è¯•ç”¨ ç¬¬ 2 æ­¥ï¼šåˆ›å»ºé¡¹ç›®æ–‡ä»¶å¤¹ç»“æ„ åœ¨ D ç›˜åˆ›å»ºé¡¹ç›®æ–‡ä»¶å¤¹ï¼š\n1 2 3 4 D:/life-service/ â”œâ”€â”€ server/ ï¼ˆåç«¯APIï¼‰ â”œâ”€â”€ web-admin/ ï¼ˆç½‘é¡µç®¡ç†åå°ï¼‰ â””â”€â”€ mini-user/ ï¼ˆå¾®ä¿¡å°ç¨‹åºï¼‰ ç¬¬ 3 æ­¥ï¼šé…ç½® DataGrip è¿æ¥æ•°æ®åº“ 3.1 è¿æ¥ MySQL æ‰“å¼€ DataGripï¼Œç‚¹å‡» \u0026ldquo;New Project\u0026rdquo; é¡¹ç›®åç§°ï¼šlife_service_platform åœ¨å³ä¾§ \u0026ldquo;Database\u0026rdquo; é¢æ¿ï¼Œç‚¹å‡» \u0026quot;+\u0026quot; â†’ \u0026ldquo;Data Source\u0026rdquo; â†’ \u0026ldquo;MySQL\u0026rdquo; å¡«å†™è¿æ¥ä¿¡æ¯ï¼š 1 2 3 4 Host: localhost Port: 3306 User: root Password: 123456 ï¼ˆä½ è®¾ç½®çš„MySQLå¯†ç ï¼‰ ç‚¹å‡» \u0026ldquo;Test Connection\u0026rdquo;ï¼Œçœ‹åˆ° âœ… Success è¡¨ç¤ºæˆåŠŸ ç‚¹å‡» \u0026ldquo;OK\u0026rdquo; 3.2 åˆ›å»ºæ•°æ®åº“ åœ¨ DataGrip ä¸­æ‰§è¡Œ SQL åˆ›å»ºæ•°æ®åº“ï¼š\næŒ‰ Ctrl+Enter æ‰“å¼€æ–°æŸ¥è¯¢çª—å£ è¾“å…¥å¹¶æ‰§è¡Œï¼š 1 2 3 CREATE DATABASE IF NOT EXISTS life_service DEFAULT CHARACTER SET utf8mb4 DEFAULT COLLATE utf8mb4_unicode_ci; 3.3 åˆ›å»ºæ•°æ®è¡¨ åœ¨ DataGrip ä¸­æ‰§è¡Œä»¥ä¸‹ SQL åˆ›å»ºè¡¨ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 -- 1. å•†å®¶è¡¨ CREATE TABLE merchants ( id INT PRIMARY KEY AUTO_INCREMENT COMMENT \u0026#39;å•†å®¶ID\u0026#39;, name VARCHAR(100) NOT NULL COMMENT \u0026#39;å•†å®¶åç§°\u0026#39;, address VARCHAR(200) NOT NULL COMMENT \u0026#39;åœ°å€\u0026#39;, phone VARCHAR(20) NOT NULL COMMENT \u0026#39;è”ç³»æ–¹å¼\u0026#39;, status TINYINT NOT NULL DEFAULT 0 COMMENT \u0026#39;çŠ¶æ€ï¼š0-å®¡æ ¸ä¸­ï¼Œ1-å·²é€šè¿‡\u0026#39;, create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT \u0026#39;åˆ›å»ºæ—¶é—´\u0026#39; ) COMMENT \u0026#39;å•†å®¶è¡¨\u0026#39;; -- 2. æœåŠ¡è¡¨ CREATE TABLE services ( id INT PRIMARY KEY AUTO_INCREMENT COMMENT \u0026#39;æœåŠ¡ID\u0026#39;, merchant_id INT NOT NULL COMMENT \u0026#39;å…³è”å•†å®¶ID\u0026#39;, name VARCHAR(100) NOT NULL COMMENT \u0026#39;æœåŠ¡åç§°\u0026#39;, price DECIMAL(10,2) NOT NULL COMMENT \u0026#39;ä»·æ ¼\u0026#39;, category VARCHAR(50) NOT NULL COMMENT \u0026#39;åˆ†ç±»\u0026#39;, image_url VARCHAR(200) COMMENT \u0026#39;å›¾ç‰‡åœ°å€\u0026#39;, stock INT NOT NULL DEFAULT 0 COMMENT \u0026#39;åº“å­˜\u0026#39;, status TINYINT NOT NULL DEFAULT 0 COMMENT \u0026#39;çŠ¶æ€ï¼š0-ä¸‹æ¶ï¼Œ1-ä¸Šæ¶\u0026#39;, create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT \u0026#39;åˆ›å»ºæ—¶é—´\u0026#39;, FOREIGN KEY (merchant_id) REFERENCES merchants(id) ON DELETE CASCADE ) COMMENT \u0026#39;æœåŠ¡è¡¨\u0026#39;; -- 3. è®¢å•è¡¨ CREATE TABLE orders ( id INT PRIMARY KEY AUTO_INCREMENT COMMENT \u0026#39;è®¢å•ID\u0026#39;, service_id INT NOT NULL COMMENT \u0026#39;å…³è”æœåŠ¡ID\u0026#39;, user_name VARCHAR(50) NOT NULL COMMENT \u0026#39;ç”¨æˆ·å§“å\u0026#39;, user_phone VARCHAR(20) NOT NULL COMMENT \u0026#39;ç”¨æˆ·ç”µè¯\u0026#39;, create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT \u0026#39;ä¸‹å•æ—¶é—´\u0026#39;, status TINYINT NOT NULL DEFAULT 0 COMMENT \u0026#39;çŠ¶æ€ï¼š0-å¾…æ”¯ä»˜ï¼Œ1-å·²å®Œæˆ\u0026#39;, FOREIGN KEY (service_id) REFERENCES services(id) ON DELETE CASCADE ) COMMENT \u0026#39;è®¢å•è¡¨\u0026#39;; 3.4 æ’å…¥æµ‹è¯•æ•°æ® 1 2 3 4 5 6 7 8 9 10 11 12 -- æ’å…¥æµ‹è¯•å•†å®¶ INSERT INTO merchants (name, address, phone, status) VALUES (\u0026#39;é˜³å…‰å®¶æ”¿\u0026#39;, \u0026#39;åŒ—äº¬å¸‚æœé˜³åŒºå»ºå›½è·¯100å·\u0026#39;, \u0026#39;13800138000\u0026#39;, 1), (\u0026#39;å¿«é€Ÿç»´ä¿®\u0026#39;, \u0026#39;ä¸Šæµ·å¸‚æµ¦ä¸œæ–°åŒºå¼ æ±Ÿè·¯200å·\u0026#39;, \u0026#39;13900139000\u0026#39;, 1), (\u0026#39;ä¿æ´ä¸“å®¶\u0026#39;, \u0026#39;å¹¿å·å¸‚å¤©æ²³åŒºä½“è‚²è¥¿è·¯300å·\u0026#39;, \u0026#39;13700137000\u0026#39;, 1); -- æ’å…¥æµ‹è¯•æœåŠ¡ INSERT INTO services (merchant_id, name, price, category, stock, status) VALUES (1, \u0026#39;æ—¥å¸¸ä¿æ´\u0026#39;, 150.00, \u0026#39;å®¶æ”¿\u0026#39;, 10, 1), (1, \u0026#39;æ·±åº¦æ¸…æ´\u0026#39;, 300.00, \u0026#39;å®¶æ”¿\u0026#39;, 5, 1), (2, \u0026#39;ç©ºè°ƒç»´ä¿®\u0026#39;, 200.00, \u0026#39;ç»´ä¿®\u0026#39;, 8, 1), (3, \u0026#39;åŠå…¬å®¤ä¿æ´\u0026#39;, 500.00, \u0026#39;ä¿æ´\u0026#39;, 3, 1); ğŸ’» é˜¶æ®µäºŒï¼šåç«¯ API å¼€å‘ï¼ˆ2-3 å¤©ï¼‰ ç¬¬ 1 æ­¥ï¼šåˆ›å»ºåç«¯é¡¹ç›® æ‰“å¼€ cmdï¼Œè¿›å…¥ server æ–‡ä»¶å¤¹ï¼š 1 cd D:/life-service/server åˆå§‹åŒ–é¡¹ç›®ï¼š 1 npm init -y å®‰è£…ä¾èµ–åŒ…ï¼š 1 npm install express mysql2 cors nodemon ç¬¬ 2 æ­¥ï¼šåˆ›å»ºé¡¹ç›®æ–‡ä»¶ç»“æ„ åœ¨ server æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä»¥ä¸‹æ–‡ä»¶ç»“æ„ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 server/ â”œâ”€â”€ app.js ï¼ˆä¸»å…¥å£æ–‡ä»¶ï¼‰ â”œâ”€â”€ db/ â”‚ â””â”€â”€ index.js ï¼ˆæ•°æ®åº“è¿æ¥ï¼‰ â”œâ”€â”€ routes/ â”‚ â”œâ”€â”€ merchant.js ï¼ˆå•†å®¶æ¥å£ï¼‰ â”‚ â”œâ”€â”€ service.js ï¼ˆæœåŠ¡æ¥å£ï¼‰ â”‚ â””â”€â”€ order.js ï¼ˆè®¢å•æ¥å£ï¼‰ â””â”€â”€ controllers/ â”œâ”€â”€ merchantCtrl.js â”œâ”€â”€ serviceCtrl.js â””â”€â”€ orderCtrl.js ç¬¬ 3 æ­¥ï¼šç¼–å†™åç«¯ä»£ç  3.1 æ•°æ®åº“è¿æ¥é…ç½® (db/index.js) 1 2 3 4 5 6 7 8 9 10 11 const mysql = require(\u0026#34;mysql2/promise\u0026#34;); const pool = mysql.createPool({ host: \u0026#34;localhost\u0026#34;, user: \u0026#34;root\u0026#34;, password: \u0026#34;123456\u0026#34;, database: \u0026#34;life_server\u0026#34;, port: 3306, }); console.log(\u0026#34;æ•°æ®åº“è¿æ¥æˆåŠŸï¼\u0026#34;); module.exports = pool; å»ºè®®å†™ä¸€ä¸ª test.js æ–‡ä»¶ï¼Œæµ‹è¯•æ•°æ®åº“è¿æ¥æ˜¯å¦æˆåŠŸ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 // å¼•å…¥æˆ‘ä»¬åˆ›å»ºçš„è¿æ¥æ±  const pool = require(\u0026#34;./index.js\u0026#34;); // æ‰§è¡Œä¸€æ¡ç®€å•çš„ SQLï¼šæŸ¥è¯¢ MySQL æ•°æ®åº“çš„ç‰ˆæœ¬ï¼ˆä¸éœ€è¦åˆ›å»ºè¡¨ï¼Œé€šç”¨æµ‹è¯•ï¼‰ pool.query(\u0026#34;SELECT VERSION() AS version\u0026#34;, (err, results) =\u0026gt; { // å›è°ƒå‡½æ•°ï¼šSQL æ‰§è¡Œå®Œæˆåä¼šè§¦å‘è¿™ä¸ªå‡½æ•° if (err) { console.error(\u0026#34;æ•°æ®åº“æ“ä½œå¤±è´¥ï¼š\u0026#34;, err.message); return; } console.log(\u0026#34;æ•°æ®åº“è¿æ¥æˆåŠŸï¼MySQL ç‰ˆæœ¬æ˜¯ï¼š\u0026#34;, results[0].version); }); // æµ‹è¯•å®Œæˆåï¼Œå…³é—­è¿æ¥æ± ps(æˆ‘ä¸€èˆ¬ä¸å»ºè®®å…³,é™¤éä½ æœ‰éœ€æ±‚ï¼‰ // pool.end(); 3.2 ä¸»å…¥å£æ–‡ä»¶ (app.js) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 const express = require(\u0026#34;express\u0026#34;); const cors = require(\u0026#34;cors\u0026#34;); const app = express(); //ä¸­é—´ä»¶ app.use(express.json()); app.use(cors()); //è·¯ç”±ï¼ˆæ¯”ä½œä¸€ä¸ªé¤å…çš„è¯ï¼Œåƒæ˜¯æœåŠ¡å‘˜ï¼‰ const merchantRouder = require(\u0026#34;./routes/merchant\u0026#34;); const customerRouder = require(\u0026#34;./routes/service\u0026#34;); const orderRouder = require(\u0026#34;./routes/order\u0026#34;); //ä½¿ç”¨è·¯ç”± app.use(\u0026#34;/api/merchant\u0026#34;, merchantRouder); app.use(\u0026#34;/api/service\u0026#34;, customerRouder); app.use(\u0026#34;/api/order\u0026#34;, orderRouder); //å¯åŠ¨ app.listen(8080, () =\u0026gt; { console.log(\u0026#34;æœåŠ¡å™¨å¯åŠ¨æˆåŠŸï¼\u0026#34;); console.log(\u0026#34;http://localhost:8080\u0026#34;); }); 3.3 å•†å®¶æ§åˆ¶å™¨ (controllers/merchantCtrl.js) æ§åˆ¶å™¨æ˜¯å®é™…å¹²æ´»çš„ï¼ˆåƒæ˜¯é¤å…çš„ä¸»å¨ï¼‰ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 const pool = require(\u0026#34;../db\u0026#34;); //è·å–å•†å®¶åˆ—è¡¨ exports.getMerchantList = async (req, res) =\u0026gt; { try { //æ‰§è¡Œ const [result] = await pool.execute(`SELECT * FROM merchants`); res.json({ code: 200, message: \u0026#34;è·å–æˆåŠŸ\u0026#34;, data: result, }); //æŠ¥é”™ } catch (err) { res.json({ code: 500, message: \u0026#34;è·å–å¤±è´¥\u0026#34;, error: err.message, }); } }; //æ–°å¢ exports.addMerchant = async (req, res) =\u0026gt; { //è·å–æ•°æ® const { name, address, phone } = req.body; try { const [result] = await pool.execute( `INSERT INTO merchants (name,address,phone) VALUES(?,?,?)`, [name, address, phone] ); res.json({ code: 200, message: \u0026#34;æ·»åŠ æˆåŠŸ\u0026#34;, data: { id: result.insertId }, }); //æŠ¥é”™ } catch (err) { res.json({ code: 500, message: \u0026#34;æ·»åŠ å¤±è´¥\u0026#34;, data: err.message, }); console.log(err); } }; // å®¡æ ¸å•†å®¶ï¼ˆæ›´æ–°çŠ¶æ€ï¼‰ exports.approveMerchant = async (req, res) =\u0026gt; { const { id } = req.params; try { const [result] = await pool.execute( \u0026#34;UPDATE merchants SET status = 1 WHERE id = ?\u0026#34;, [id] ); if (result.affectedRows === 1) { res.json({ code: 200, msg: \u0026#34;å•†å®¶å®¡æ ¸é€šè¿‡ï¼\u0026#34;, }); } else { res.json({ code: 404, msg: \u0026#34;å•†å®¶ä¸å­˜åœ¨\u0026#34;, }); } } catch (err) { res.json({ code: 500, msg: \u0026#34;æœåŠ¡å™¨å‡ºé”™\u0026#34;, error: err.message, }); } }; 3.4 å•†å®¶è·¯ç”± (routes/merchant.js) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 const express = require(\u0026#34;express\u0026#34;); const router = express.Router(); //å¼•å…¥æ§åˆ¶å™¨ const merchantCtrl = require(\u0026#34;../controllers/merchantCtrl\u0026#34;); //å‘é€åˆ°/addï¼Œç”¨ä»€ä¹ˆæ–‡ä»¶çš„ä»€ä¹ˆæ–¹æ³•å¤„ç† router.post(\u0026#34;/add\u0026#34;, merchantCtrl.addMerchant); router.get(\u0026#34;/list\u0026#34;, merchantCtrl.getMerchantList); // å®¡æ ¸å•†å®¶ router.put(\u0026#34;/approve/:id\u0026#34;, merchantCtrl.approveMerchant); //å¯¼å‡ºè®©add.jsä½¿ç”¨ module.exports = router; 3.5 æœåŠ¡æ§åˆ¶å™¨ (controllers/serviceCtrl.js) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 const pool = require(\u0026#34;../db\u0026#34;); // å…³è” merchants è¡¨çš„æœ¬è´¨æ˜¯é€šè¿‡æ•°æ®åº“çš„å…³è”æŸ¥è¯¢èƒ½åŠ›ï¼Œ // ä¸€æ¬¡æ€§æ•´åˆ â€œæœåŠ¡â€ å’Œ â€œå•†å®¶â€ çš„å…³è”æ•°æ®ï¼Œ // æ—¢æ»¡è¶³äº†å‰ç«¯å±•ç¤º â€œæœåŠ¡æ‰€å±å•†å®¶â€ çš„ä¸šåŠ¡éœ€æ±‚ // å³ä½¿å³è¡¨ï¼ˆmerchantsï¼‰ä¸­æ²¡æœ‰åŒ¹é…çš„è®°å½• // ï¼ˆæ¯”å¦‚å•†å®¶è¢«åˆ é™¤ï¼Œä½†æœåŠ¡è®°å½•æœªæ¸…ç†ï¼‰ï¼Œå·¦è¡¨ï¼ˆservicesï¼‰çš„è®°å½•ä¾ç„¶ä¼šè¢«è¿”å›ï¼ˆæ­¤æ—¶å•†å®¶åç§°ä¸º NULLï¼‰ exports.getServices = async (req, res) =\u0026gt; { const { category } = req.query; let sql = ` SELECT s.*,m.name AS merchant_name FROM services AS s LEFT JOIN merchants AS m ON s.merchant_id = m.id where 1=1 `; let params = []; // æ ¹æ®å‰ç«¯ä¼ é€’çš„åˆ†ç±»å‚æ•°ï¼ˆcategoryï¼‰ // åŠ¨æ€ä¸º SQL æŸ¥è¯¢æ·»åŠ  â€œæœåŠ¡åˆ†ç±»â€ ç­›é€‰æ¡ä»¶ï¼Œå®ç° â€œæŒ‰åˆ†ç±»ç­›é€‰æœåŠ¡åˆ—è¡¨â€ çš„åŠŸèƒ½ï¼ŒåŒæ—¶å…¼é¡¾çµæ´»æ€§å’Œå®‰å…¨æ€§ã€‚ if (category \u0026amp;\u0026amp; category !== \u0026#34;all\u0026#34;) { sql += ` AND s.category=?`; params.push(category); } try { const [row] = await pool.execute(sql, params); res.json({ code: 200, message: \u0026#34;è·å–æˆåŠŸ\u0026#34;, data: row, }); } catch (err) { res.json({ code: 500, message: \u0026#34;è·å–å¤±è´¥\u0026#34;, error: err.message, }); } }; //æ–°å¢ exports.addService = async (req, res) =\u0026gt; { const { merchant_id, name, price, category, image_url, stock } = req.body; try { const [result] = await pool.execute( `INSERT INTO services (name,price,category, image_url,merchant_id,stock) VALUES(?,?,?,?,?,?)`, [name, price, category, image_url, merchant_id, stock] ); res.json({ code: 200, message: \u0026#34;æ–°å¢æœåŠ¡æˆåŠŸ\u0026#34;, data: { id: result.insertId }, }); } catch (err) { res.json({ code: 500, message: \u0026#34;æ–°å¢æœåŠ¡å¤±è´¥\u0026#34;, data: err.message, }); } }; // æœåŠ¡ä¸Šæ¶ï¼ˆæ›´æ–°çŠ¶æ€ä¸ºâ€œä¸Šæ¶â€ï¼‰ exports.publishService = async (req, res) =\u0026gt; { const { id } = req.params; try { const [result] = await pool.execute( \u0026#34;UPDATE services SET status = 1 WHERE id = ?\u0026#34;, [id] ); if (result.affectedRows === 1) { res.json({ code: 200, msg: \u0026#34;æœåŠ¡ä¸Šæ¶æˆåŠŸï¼\u0026#34; }); } else { res.json({ code: 404, msg: \u0026#34;æœåŠ¡ä¸å­˜åœ¨\u0026#34; }); } } catch (err) { res.json({ code: 500, msg: \u0026#34;æœåŠ¡å™¨å‡ºé”™\u0026#34;, error: err.message }); } }; // æœåŠ¡ä¸‹æ¶ï¼ˆæ›´æ–°çŠ¶æ€ä¸ºâ€œä¸‹æ¶â€ï¼‰ exports.unpublishService = async (req, res) =\u0026gt; { const { id } = req.params; try { const [result] = await pool.execute( \u0026#34;UPDATE services SET status = 0 WHERE id = ?\u0026#34;, [id] ); if (result.affectedRows === 1) { res.json({ code: 200, msg: \u0026#34;æœåŠ¡ä¸‹æ¶æˆåŠŸï¼\u0026#34; }); } else { res.json({ code: 404, msg: \u0026#34;æœåŠ¡ä¸å­˜åœ¨\u0026#34; }); } } catch (err) { res.json({ code: 500, msg: \u0026#34;æœåŠ¡å™¨å‡ºé”™\u0026#34;, error: err.message }); } }; 3.6 æœåŠ¡è·¯ç”± (routes/service.js) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 const express = require(\u0026#34;express\u0026#34;); const router = express.Router(); const serviceCtrl = require(\u0026#34;../controllers/serviceCtrl\u0026#34;); // è·å–æœåŠ¡åˆ—è¡¨ router.get(\u0026#34;/list\u0026#34;, serviceCtrl.getServices); // æ–°å¢æœåŠ¡ router.post(\u0026#34;/add\u0026#34;, serviceCtrl.addService); // æœåŠ¡ä¸Šæ¶ router.put(\u0026#34;/publish/:id\u0026#34;, serviceCtrl.publishService); router.put(\u0026#34;/unpublish/:id\u0026#34;, serviceCtrl.unpublishService); module.exports = router; 3.7 è®¢å•æ§åˆ¶å™¨ (controllers/orderCtrl.js) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 const pool = require(\u0026#34;../db\u0026#34;); //åˆ›å»ºå®šå• exports.createOrder = async (req, res) =\u0026gt; { const { service_id, user_name, user_phone } = req.body; try { const [result] = await pool.execute( `INSERT INTO orders (service_id,user_name,user_phone) VALUES(?,?,?)`, [service_id, user_name, user_phone] ); res.json({ code: 200, message: \u0026#34;åˆ›å»ºå®šå•æˆåŠŸ\u0026#34;, data: { id: result.insertId }, }); } catch (err) { res.json({ code: 500, message: \u0026#34;åˆ›å»ºå®šå•å¤±è´¥\u0026#34;, error: err.message, }); } }; // WHERE 1=1 // è¿™æ˜¯ä¸€ä¸ª â€œæŠ€å·§æ€§å†™æ³•â€ï¼Œæ–¹ä¾¿åç»­åŠ¨æ€æ·»åŠ æ¡ä»¶ã€‚ // æ¯”å¦‚åé¢æœ‰ if (status !== undefined) æ—¶ï¼Œ // ä¼šæ‹¼æ¥ AND o.status = ?ã€‚å¦‚æœæ²¡æœ‰ 1=1ï¼Œåˆå§‹çš„ WHERE å­å¥æ˜¯ç©ºçš„ // ç¬¬ä¸€æ¬¡æ·»åŠ æ¡ä»¶æ—¶éœ€è¦å†™ WHERE o.status = ?ï¼Œç¬¬äºŒæ¬¡æ·»åŠ æ‰å†™ AND ...ï¼Œä»£ç é‡Œå°±è¦åˆ¤æ–­ â€œæ˜¯ä¸æ˜¯ç¬¬ä¸€ä¸ªæ¡ä»¶â€ï¼Œå¾ˆéº»çƒ¦ã€‚ // æœ‰äº† 1=1 åï¼Œä¸ç®¡åé¢åŠ å¤šå°‘æ¡ä»¶ï¼Œç›´æ¥ç”¨ AND ... æ‹¼æ¥å°±è¡Œ // ï¼ˆæ¯”å¦‚ WHERE 1=1 AND o.status=? AND o.user_id=?ï¼‰ï¼Œç®€åŒ–äº†åŠ¨æ€æ¡ä»¶çš„æ‹¼æ¥é€»è¾‘ã€‚ //stayus 0:å¾…å¤„ç† 1:å¤„ç†ä¸­ 2:å®Œæˆ //è·å–å®šå•åˆ—è¡¨ exports.getOrders = async (req, res) =\u0026gt; { const { status } = req.query; try { let sql = `SELECT o.*, s.name AS server_name, m.name AS merchant_name FROM orders AS o LEFT JOIN services AS s ON o.service_id = s.id LEFT JOIN merchants AS m ON s.merchant_id = m.id WHERE 1=1`; let params = []; if (status !== undefined) { sql += ` AND o.status=?`; params.push(status); } //åŠ ä¸€ä¸ªç©ºæ ¼ sql += ` ORDER BY o.create_time DESC`; const [row] = await pool.execute(sql, params); res.json({ code: 200, message: \u0026#34;è·å–æˆåŠŸ\u0026#34;, data: row, }); } catch (err) { res.json({ code: 500, message: \u0026#34;è·å–å¤±è´¥\u0026#34;, error: err.message, }); } }; 3.8 è®¢å•è·¯ç”± (routes/order.js) 1 2 3 4 5 6 7 8 9 10 11 const express = require(\u0026#34;express\u0026#34;); const router = express.Router(); const orderCtrl = require(\u0026#34;../controllers/orderCtrl\u0026#34;); // åˆ›å»ºè®¢å• router.post(\u0026#34;/create\u0026#34;, orderCtrl.createOrder); // è·å–è®¢å•åˆ—è¡¨ router.get(\u0026#34;/list\u0026#34;, orderCtrl.getOrders); module.exports = router; ç¬¬ 4 æ­¥ï¼šé…ç½® package.json è„šæœ¬ ä¿®æ”¹ server/package.json ä¸­çš„ scripts éƒ¨åˆ†ï¼š\n1 2 3 4 5 6 { \u0026#34;scripts\u0026#34;: { \u0026#34;dev\u0026#34;: \u0026#34;nodemon app.js\u0026#34;, \u0026#34;start\u0026#34;: \u0026#34;node app.js\u0026#34; } } ç¬¬ 5 æ­¥ï¼šå¯åŠ¨åç«¯æœåŠ¡ 1 2 cd D:/life-service/server npm run dev çœ‹åˆ° âœ… åç«¯æœåŠ¡å¯åŠ¨æˆåŠŸï¼ è¡¨ç¤ºåç«¯æ­£å¸¸è¿è¡Œã€‚\nç¬¬ 6 æ­¥ï¼šæµ‹è¯•åç«¯ API ä½¿ç”¨ Postman æˆ–æµè§ˆå™¨æµ‹è¯•æ¥å£ï¼š\nGET http://localhost:8080/api/merchant/list - è·å–å•†å®¶åˆ—è¡¨ POST http://localhost:8080/api/merchant/add - æ–°å¢å•†å®¶ ğŸŒ é˜¶æ®µä¸‰ï¼šWeb ç®¡ç†åå°å¼€å‘ï¼ˆ3-4 å¤©ï¼‰ ç¬¬ 1 æ­¥ï¼šåˆ›å»º Vue é¡¹ç›® æ‰“å¼€æ–°çš„ cmd çª—å£ï¼š 1 2 cd D:/life-service vue create web-admin é€‰æ‹©é…ç½®ï¼š\nVue 3 Babel Router å…¶ä»–æŒ‰å›è½¦ç”¨é»˜è®¤é…ç½®ï¼ˆä»”ç»†çœ‹ï¼Œåˆ«é€‰é”™äº†ï¼‰ è¿›å…¥é¡¹ç›®å¹¶å®‰è£…ä¾èµ–ï¼š\n1 2 cd web-admin npm install axios ç¬¬ 2 æ­¥ï¼šé¡¹ç›®ç»“æ„é…ç½® åœ¨ src æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä»¥ä¸‹ç»“æ„ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 src/ â”œâ”€â”€ api/ â”‚ â”œâ”€â”€ merchant.js â”‚ â”œâ”€â”€ service.js â”‚ â””â”€â”€ order.js â”œâ”€â”€ components/ â”œâ”€â”€ views/ â”‚ â”œâ”€â”€ Merchant/ â”‚ â”‚ â””â”€â”€ index.vue â”‚ â”œâ”€â”€ Service/ â”‚ â”‚ â””â”€â”€ index.vue â”‚ â””â”€â”€ Order/ â”‚ â””â”€â”€ index.vue â””â”€â”€ router/ â””â”€â”€ index.js ç¬¬ 3 æ­¥ï¼šé…ç½®è·¯ç”± ä¿®æ”¹ src/router/index.jsï¼š\nè¿™é‡Œè·¯ç”±è¯´çš„è¯¦ç»†ä¸€ç‚¹ï¼Œæ–¹ä¾¿ç†è§£è¿™ä¸ªæ•´ä½“æ¶æ„ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 // 1. å¯¼å…¥åˆ›å»ºè·¯ç”±çš„å·¥å…· import { createRouter, createWebHistory } from \u0026#34;vue-router\u0026#34;; // createRouterï¼šç”¨æ¥åˆ›å»ºè·¯ç”±å®ä¾‹ï¼ˆç›¸å½“äºâ€œæ¥å¾…å‘˜â€æœ¬èº«ï¼‰ // createWebHistoryï¼šè·¯ç”±æ¨¡å¼ï¼ˆç”¨æ— #å·çš„URLï¼Œæ¯”å¦‚ http://localhost:8080/serviceï¼Œæ›´ç¾è§‚ï¼‰ // 2. å¯¼å…¥éœ€è¦è·³è½¬çš„é¡µé¢ç»„ä»¶ï¼ˆâ€œæˆ¿é—´â€æœ¬èº«ï¼‰ import Merchant from \u0026#34;../views/Merchant/index.vue\u0026#34;; import Service from \u0026#34;../views/Service/index.vue\u0026#34;; import Order from \u0026#34;../views/Order/index.vue\u0026#34;; // 3. å®šä¹‰â€œåœ°å€â†’é¡µé¢â€çš„å¯¹åº”è§„åˆ™ï¼ˆâ€œæˆ¿é—´å·â†’æˆ¿é—´â€çš„å¯¹ç…§è¡¨ï¼‰ const routes = [ { path: \u0026#34;/\u0026#34;, redirect: \u0026#34;/merchant\u0026#34;, // æ ¸å¿ƒï¼šè®¿é—® \u0026#34;/\u0026#34; æ—¶è‡ªåŠ¨è·³è½¬åˆ° \u0026#34;/merchant\u0026#34; }, { path: \u0026#34;/merchant\u0026#34;, // åœ°å€ï¼šç½‘ç«™æ ¹è·¯å¾„ï¼ˆhttp://localhost:8080/ï¼‰ component: Merchant, // å¯¹åº”é¡µé¢ï¼šå•†å®¶ç®¡ç†é¡µ name: \u0026#34;å•†å®¶ç®¡ç†\u0026#34;, // ç»™è¿™ä¸ªè·¯ç”±èµ·ä¸ªåå­—ï¼ˆæ–¹ä¾¿åç»­å¼•ç”¨ï¼Œå¯é€‰ï¼‰ }, { path: \u0026#34;/service\u0026#34;, // åœ°å€ï¼š/serviceï¼ˆhttp://localhost:8080/serviceï¼‰ name: \u0026#34;æœåŠ¡ç®¡ç†\u0026#34;, component: Service, // å¯¹åº”é¡µé¢ï¼šæœåŠ¡ç®¡ç†é¡µ }, { path: \u0026#34;/order\u0026#34;, // åœ°å€ï¼š/orderï¼ˆhttp://localhost:8080/orderï¼‰ name: \u0026#34;è®¢å•ç®¡ç†\u0026#34;, component: Order, // å¯¹åº”é¡µé¢ï¼šè®¢å•ç®¡ç†é¡µ }, ]; // 4. åˆ›å»ºè·¯ç”±å®ä¾‹ï¼ˆåˆå§‹åŒ–â€œæ¥å¾…å‘˜â€ï¼Œå‘Šè¯‰ä»–è§„åˆ™å’Œå·¥ä½œæ¨¡å¼ï¼‰ const router = createRouter({ history: createWebHistory(), // ç”¨æ— #å·çš„URLæ¨¡å¼ routes, // åˆšæ‰å®šä¹‰çš„â€œåœ°å€â†’é¡µé¢â€è§„åˆ™ }); // 5. å¯¼å‡ºè·¯ç”±å®ä¾‹ï¼Œè®©æ•´ä¸ªé¡¹ç›®èƒ½ç”¨ï¼ˆæŠŠâ€œæ¥å¾…å‘˜â€å®‰æ’åˆ°é…’åº—å·¥ä½œï¼‰ export default router; ç¬¬ 4 æ­¥ï¼šå°è£… API è¯·æ±‚ åˆ›å»º src/api/merchant.jsï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 import axios from \u0026#34;axios\u0026#34;; axios.defaults.baseURL = \u0026#34;http://localhost:8080\u0026#34;; export const merchantAPI = { addMerchant(merchant) { return axios.post(\u0026#34;/api/merchant/add\u0026#34;, merchant); }, getMerchantList() { return axios.get(\u0026#34;/api/merchant/list\u0026#34;); }, // å®¡æ ¸å•†å®¶ approveMerchant(id) { return axios.put(`/api/merchant/approve/${id}`); }, }; export default merchantAPI; åˆ›å»º src/api/service.jsï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 import axios from \u0026#34;axios\u0026#34;; export const serviceAPI = { getServices: (category = \u0026#34;\u0026#34;) =\u0026gt; { const params = { ...(category ? { category } : {}), t: Date.now(), }; return axios.get(\u0026#34;/api/service/list\u0026#34;, { params }); }, addService: (data) =\u0026gt; { return axios.post(\u0026#34;/api/service/add\u0026#34;, data); }, publishService: (id) =\u0026gt; { axios.put(`/api/service/publish/${id}`); }, unpublishService: (id) =\u0026gt; { axios.put(`/api/service/unpublish/${id}`); }, }; export default serviceAPI; åˆ›å»º src/api/order.jsï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 import axios from \u0026#34;axios\u0026#34;; export const orderAPI = { // è·å–è®¢å•åˆ—è¡¨ getOrders: (status) =\u0026gt; { const params = status !== undefined ? { status } : {}; return axios.get(\u0026#34;/order/list\u0026#34;, { params }); }, // åˆ›å»ºè®¢å• createOrder: (data) =\u0026gt; { return axios.post(\u0026#34;/order/add\u0026#34;, data); }, }; export default orderAPI; ç¬¬ 5 æ­¥ï¼šå¼€å‘å•†å®¶ç®¡ç†é¡µé¢ åˆ›å»º src/views/Merchant/index.vueï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341 342 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359 360 361 362 363 364 365 366 367 \u0026lt;template\u0026gt; \u0026lt;div class=\u0026#34;merchant-page\u0026#34;\u0026gt; \u0026lt;h2\u0026gt;ğŸª å•†å®¶ç®¡ç†\u0026lt;/h2\u0026gt; \u0026lt;!-- æ–°å¢å•†å®¶è¡¨å• --\u0026gt; \u0026lt;div class=\u0026#34;add-form\u0026#34;\u0026gt; \u0026lt;h3\u0026gt;â• æ–°å¢å•†å®¶\u0026lt;/h3\u0026gt; \u0026lt;div class=\u0026#34;form-group\u0026#34;\u0026gt; \u0026lt;input v-model=\u0026#34;newMerchant.name\u0026#34; placeholder=\u0026#34;å•†å®¶åç§°\u0026#34; class=\u0026#34;input\u0026#34; :disabled=\u0026#34;isSubmitting\u0026#34; /\u0026gt; \u0026lt;input v-model=\u0026#34;newMerchant.address\u0026#34; placeholder=\u0026#34;å•†å®¶åœ°å€\u0026#34; class=\u0026#34;input\u0026#34; :disabled=\u0026#34;isSubmitting\u0026#34; /\u0026gt; \u0026lt;input v-model=\u0026#34;newMerchant.phone\u0026#34; placeholder=\u0026#34;è”ç³»ç”µè¯\u0026#34; class=\u0026#34;input\u0026#34; :disabled=\u0026#34;isSubmitting\u0026#34; /\u0026gt; \u0026lt;button @click=\u0026#34;addMerchant\u0026#34; class=\u0026#34;btn btn-primary\u0026#34; :disabled=\u0026#34;isSubmitting\u0026#34; \u0026gt; {{ isSubmitting ? \u0026#34;æäº¤ä¸­...\u0026#34; : \u0026#34;æ·»åŠ å•†å®¶\u0026#34; }} \u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;!-- å•†å®¶åˆ—è¡¨ --\u0026gt; \u0026lt;div class=\u0026#34;merchant-list\u0026#34;\u0026gt; \u0026lt;h3\u0026gt;ğŸ“‹ å•†å®¶åˆ—è¡¨\u0026lt;/h3\u0026gt; \u0026lt;!-- åŠ è½½çŠ¶æ€ --\u0026gt; \u0026lt;div class=\u0026#34;loading\u0026#34; v-if=\u0026#34;isLoading\u0026#34;\u0026gt; \u0026lt;span\u0026gt;åŠ è½½ä¸­...\u0026lt;/span\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;table class=\u0026#34;table\u0026#34; v-else\u0026gt; \u0026lt;thead\u0026gt; \u0026lt;tr\u0026gt; \u0026lt;th\u0026gt;ID\u0026lt;/th\u0026gt; \u0026lt;th\u0026gt;åç§°\u0026lt;/th\u0026gt; \u0026lt;th\u0026gt;åœ°å€\u0026lt;/th\u0026gt; \u0026lt;th\u0026gt;ç”µè¯\u0026lt;/th\u0026gt; \u0026lt;th\u0026gt;çŠ¶æ€\u0026lt;/th\u0026gt; \u0026lt;th\u0026gt;åˆ›å»ºæ—¶é—´\u0026lt;/th\u0026gt; \u0026lt;th\u0026gt;æ“ä½œ\u0026lt;/th\u0026gt; \u0026lt;!-- æ–°å¢æ“ä½œåˆ—ï¼Œæ›´æ¸…æ™° --\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;/thead\u0026gt; \u0026lt;tbody\u0026gt; \u0026lt;!-- ç©ºçŠ¶æ€å¤„ç† --\u0026gt; \u0026lt;tr v-if=\u0026#34;merchants.length === 0\u0026#34;\u0026gt; \u0026lt;td colspan=\u0026#34;7\u0026#34; class=\u0026#34;empty-cell\u0026#34;\u0026gt;æš‚æ— å•†å®¶æ•°æ®\u0026lt;/td\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;tr v-for=\u0026#34;merchant in merchants\u0026#34; :key=\u0026#34;merchant.id\u0026#34;\u0026gt; \u0026lt;td\u0026gt;{{ merchant.id }}\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;{{ merchant.name }}\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;{{ merchant.address }}\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;{{ merchant.phone }}\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt; \u0026lt;span :class=\u0026#34; merchant.status === 0 ? \u0026#39;status-pending\u0026#39; : \u0026#39;status-approved\u0026#39; \u0026#34; \u0026gt; {{ merchant.status === 0 ? \u0026#34;å®¡æ ¸ä¸­\u0026#34; : \u0026#34;å·²é€šè¿‡\u0026#34; }} \u0026lt;/span\u0026gt; \u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;{{ formatTime(merchant.create_time) }}\u0026lt;/td\u0026gt; \u0026lt;td class=\u0026#34;operation-cell\u0026#34;\u0026gt; \u0026lt;!-- å®¡æ ¸æŒ‰é’®ï¼šåªåœ¨\u0026#34;å®¡æ ¸ä¸­\u0026#34;ä¸”éåŠ è½½çŠ¶æ€æ˜¾ç¤º --\u0026gt; \u0026lt;button class=\u0026#34;approve-btn\u0026#34; @click=\u0026#34;handleApprove(merchant.id)\u0026#34; v-if=\u0026#34;merchant.status === 0 \u0026amp;\u0026amp; !isLoading\u0026#34; :disabled=\u0026#34;isApproving[merchant.id]\u0026#34; \u0026gt; {{ isApproving[merchant.id] ? \u0026#34;å®¡æ ¸ä¸­...\u0026#34; : \u0026#34;å®¡æ ¸é€šè¿‡\u0026#34; }} \u0026lt;/button\u0026gt; \u0026lt;!-- å·²é€šè¿‡çŠ¶æ€æç¤º --\u0026gt; \u0026lt;span class=\u0026#34;approved-text\u0026#34; v-else-if=\u0026#34;merchant.status === 1\u0026#34;\u0026gt; å·²å®¡æ ¸ \u0026lt;/span\u0026gt; \u0026lt;/td\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;/tbody\u0026gt; \u0026lt;/table\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;script\u0026gt; import { ref, onMounted } from \u0026#34;vue\u0026#34;; import merchantAPI from \u0026#34;../../api/merchant\u0026#34;; export default { name: \u0026#34;MerchantView\u0026#34;, setup() { // å•†å®¶åˆ—è¡¨æ•°æ® const merchants = ref([]); // æ–°å¢å•†å®¶è¡¨å•æ•°æ® const newMerchant = ref({ name: \u0026#34;\u0026#34;, address: \u0026#34;\u0026#34;, phone: \u0026#34;\u0026#34;, }); // åŠ è½½çŠ¶æ€ï¼ˆåˆ—è¡¨åŠ è½½ä¸­ï¼‰ const isLoading = ref(false); // æäº¤çŠ¶æ€ï¼ˆæ–°å¢å•†å®¶æ—¶ï¼‰ const isSubmitting = ref(false); // å®¡æ ¸çŠ¶æ€ï¼ˆé’ˆå¯¹æ¯ä¸ªå•†å®¶çš„å•ç‹¬åŠ è½½çŠ¶æ€ï¼Œé¿å…é‡å¤ç‚¹å‡»ï¼‰ const isApproving = ref({}); // ç»“æ„ï¼š{ 1: true, 2: false, ... } // è·å–å•†å®¶åˆ—è¡¨ï¼ˆå°è£…ä¸ºç‹¬ç«‹æ–¹æ³•ï¼Œä¾¿äºå¤ç”¨ï¼‰ const getMerchants = async () =\u0026gt; { try { isLoading.value = true; // æ˜¾ç¤ºåŠ è½½çŠ¶æ€ const response = await merchantAPI.getMerchantList(); merchants.value = response.data.data || []; // å…¼å®¹ç©ºæ•°æ® } catch (error) { alert(\u0026#34;è·å–å•†å®¶åˆ—è¡¨å¤±è´¥ï¼š\u0026#34; + (error.message || \u0026#34;ç½‘ç»œé”™è¯¯\u0026#34;)); console.error(\u0026#34;å•†å®¶åˆ—è¡¨åŠ è½½å¤±è´¥ï¼š\u0026#34;, error); } finally { isLoading.value = false; // æ— è®ºæˆåŠŸå¤±è´¥ï¼Œå…³é—­åŠ è½½çŠ¶æ€ } }; // æ–°å¢å•†å®¶ const addMerchant = async () =\u0026gt; { // è¡¨å•éªŒè¯ if (!newMerchant.value.name.trim()) { alert(\u0026#34;è¯·è¾“å…¥å•†å®¶åç§°ï¼\u0026#34;); return; } if (!newMerchant.value.address.trim()) { alert(\u0026#34;è¯·è¾“å…¥å•†å®¶åœ°å€ï¼\u0026#34;); return; } if (!newMerchant.value.phone.trim()) { alert(\u0026#34;è¯·è¾“å…¥è”ç³»ç”µè¯ï¼\u0026#34;); return; } // ç®€å•æ‰‹æœºå·æ ¼å¼éªŒè¯ï¼ˆ11ä½æ•°å­—ï¼‰ if (!/^\\d{11}$/.test(newMerchant.value.phone)) { alert(\u0026#34;è¯·è¾“å…¥æœ‰æ•ˆçš„11ä½æ‰‹æœºå·ï¼\u0026#34;); return; } try { isSubmitting.value = true; // é˜²æ­¢é‡å¤æäº¤ await merchantAPI.addMerchant(newMerchant.value); alert(\u0026#34;å•†å®¶æ·»åŠ æˆåŠŸï¼\u0026#34;); // æ¸…ç©ºè¡¨å• newMerchant.value = { name: \u0026#34;\u0026#34;, address: \u0026#34;\u0026#34;, phone: \u0026#34;\u0026#34; }; // åˆ·æ–°åˆ—è¡¨ getMerchants(); } catch (error) { alert(\u0026#34;æ·»åŠ å•†å®¶å¤±è´¥ï¼š\u0026#34; + (error.message || \u0026#34;æœåŠ¡å™¨é”™è¯¯\u0026#34;)); console.error(\u0026#34;æ–°å¢å•†å®¶å¤±è´¥ï¼š\u0026#34;, error); } finally { isSubmitting.value = false; // æ¢å¤æäº¤çŠ¶æ€ } }; // å®¡æ ¸å•†å®¶ï¼ˆæ ¸å¿ƒè¡¥å……ï¼‰ const handleApprove = async (id) =\u0026gt; { // ç¡®è®¤æ“ä½œï¼ˆé¿å…è¯¯ç‚¹ï¼‰ if (!confirm(\u0026#34;ç¡®å®šè¦é€šè¿‡è¯¥å•†å®¶çš„å®¡æ ¸å—ï¼Ÿ\u0026#34;)) { return; } try { // æ ‡è®°å½“å‰å•†å®¶æ­£åœ¨å®¡æ ¸ä¸­ isApproving.value[id] = true; await merchantAPI.approveMerchant(id); alert(\u0026#34;å•†å®¶å®¡æ ¸é€šè¿‡ï¼\u0026#34;); // åˆ·æ–°åˆ—è¡¨ getMerchants(); } catch (error) { alert(\u0026#34;å®¡æ ¸å¤±è´¥ï¼š\u0026#34; + (error.message || \u0026#34;æœåŠ¡å™¨é”™è¯¯\u0026#34;)); console.error(`å®¡æ ¸å•†å®¶${id}å¤±è´¥ï¼š`, error); } finally { // æ¸…é™¤å®¡æ ¸çŠ¶æ€ isApproving.value[id] = false; } }; // æ ¼å¼åŒ–æ—¶é—´ï¼ˆå…¼å®¹ç©ºå€¼ï¼‰ const formatTime = (timeString) =\u0026gt; { if (!timeString) return \u0026#34;-\u0026#34;; return new Date(timeString).toLocaleString(); }; // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–æ•°æ® onMounted(() =\u0026gt; { getMerchants(); }); return { merchants, newMerchant, isLoading, isSubmitting, isApproving, addMerchant, handleApprove, // å¯¼å‡ºå®¡æ ¸æ–¹æ³•ï¼ˆå…³é”®è¡¥å……ï¼‰ formatTime, }; }, }; \u0026lt;/script\u0026gt; \u0026lt;style scoped\u0026gt; .merchant-page { padding: 20px; max-width: 1200px; margin: 0 auto; } .add-form { margin: 30px 0; padding: 20px; border: 1px solid #e1e1e1; border-radius: 8px; background: #f9f9f9; } .form-group { display: flex; gap: 10px; align-items: end; flex-wrap: wrap; } .input { padding: 8px 12px; border: 1px solid #ccc; border-radius: 4px; flex: 1; min-width: 200px; font-size: 14px; } .input:disabled { background: #f0f0f0; cursor: not-allowed; } .btn { padding: 8px 16px; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; transition: background 0.3s; } .btn:disabled { background: #9e9e9e; cursor: not-allowed; } .btn-primary { background: #4caf50; color: white; } .btn-primary:hover:not(:disabled) { background: #45a049; } .merchant-list { margin-top: 30px; } .table { width: 100%; border-collapse: collapse; margin-top: 10px; background: white; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); } .table th, .table td { border: 1px solid #ddd; padding: 12px; text-align: left; } .table th { background: #f5f5f5; font-weight: bold; white-space: nowrap; /* è¡¨å¤´ä¸æ¢è¡Œ */ } /* ç©ºçŠ¶æ€å•å…ƒæ ¼ */ .empty-cell { text-align: center; padding: 40px 0; color: #999; } /* çŠ¶æ€æ ·å¼ */ .status-pending { color: #ff9800; font-weight: bold; } .status-approved { color: #4caf50; font-weight: bold; } /* æ“ä½œåˆ—æ ·å¼ */ .operation-cell { white-space: nowrap; /* æ“ä½œæŒ‰é’®ä¸æ¢è¡Œ */ } .approve-btn { background: #2196f3; color: white; border: none; border-radius: 4px; padding: 4px 10px; cursor: pointer; font-size: 13px; transition: background 0.3s; } .approve-btn:hover:not(:disabled) { background: #0b7dda; } .approve-btn:disabled { background: #bbdefb; cursor: not-allowed; } .approved-text { color: #666; font-size: 13px; } /* åŠ è½½çŠ¶æ€ */ .loading { text-align: center; padding: 40px 0; color: #666; font-size: 14px; } \u0026lt;/style\u0026gt; ç¬¬ 6 æ­¥ï¼šä¿®æ”¹ App.vue æ›´æ–° src/App.vueï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 \u0026lt;template\u0026gt; \u0026lt;div id=\u0026#34;app\u0026#34;\u0026gt; \u0026lt;nav class=\u0026#34;navbar\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;nav-container\u0026#34;\u0026gt; \u0026lt;h1 class=\u0026#34;nav-title\u0026#34;\u0026gt;å…¨åŸŸç”Ÿæ´»æœåŠ¡å¹³å°\u0026lt;/h1\u0026gt; \u0026lt;div class=\u0026#34;nav-links\u0026#34;\u0026gt; \u0026lt;router-link to=\u0026#34;/merchant\u0026#34; class=\u0026#34;nav-link\u0026#34;\u0026gt;å•†å®¶ç®¡ç†\u0026lt;/router-link\u0026gt; \u0026lt;router-link to=\u0026#34;/service\u0026#34; class=\u0026#34;nav-link\u0026#34;\u0026gt;æœåŠ¡ç®¡ç†\u0026lt;/router-link\u0026gt; \u0026lt;router-link to=\u0026#34;/order\u0026#34; class=\u0026#34;nav-link\u0026#34;\u0026gt;è®¢å•ç®¡ç†\u0026lt;/router-link\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/nav\u0026gt; \u0026lt;main class=\u0026#34;main-content\u0026#34;\u0026gt; \u0026lt;router-view /\u0026gt; \u0026lt;/main\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;script\u0026gt; export default { name: \u0026#34;App\u0026#34;, }; \u0026lt;/script\u0026gt; \u0026lt;style\u0026gt; * { margin: 0; padding: 0; box-sizing: border-box; } body { font-family: \u0026#34;Segoe UI\u0026#34;, Tahoma, Geneva, Verdana, sans-serif; background: #f5f5f5; } .navbar { background: #2c3e50; color: white; padding: 0; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); } .nav-container { max-width: 1200px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; padding: 0 20px; } .nav-title { font-size: 24px; font-weight: bold; } .nav-links { display: flex; gap: 20px; } .nav-link { color: white; text-decoration: none; padding: 15px 20px; border-radius: 4px; transition: background 0.3s; } .nav-link:hover, .nav-link.router-link-active { background: #34495e; } .main-content { min-height: calc(100vh - 60px); padding: 20px; } \u0026lt;/style\u0026gt; ç¬¬ 7 æ­¥ï¼šå¼€å‘æœåŠ¡ç®¡ç†é¡µé¢ åˆ›å»º src/views/Service/index.vueï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 307 308 309 310 311 312 313 314 \u0026lt;template\u0026gt; \u0026lt;div class=\u0026#34;service-page\u0026#34;\u0026gt; \u0026lt;h2\u0026gt;ğŸ›ï¸ æœåŠ¡ç®¡ç†\u0026lt;/h2\u0026gt; \u0026lt;!-- æ–°å¢æœåŠ¡è¡¨å• --\u0026gt; \u0026lt;div class=\u0026#34;add-form\u0026#34;\u0026gt; \u0026lt;h3\u0026gt;â• æ–°å¢æœåŠ¡\u0026lt;/h3\u0026gt; \u0026lt;div class=\u0026#34;form-grid\u0026#34;\u0026gt; \u0026lt;input v-model=\u0026#34;newService.name\u0026#34; placeholder=\u0026#34;æœåŠ¡åç§°\u0026#34; class=\u0026#34;input\u0026#34; /\u0026gt; \u0026lt;select v-model=\u0026#34;newService.merchant_id\u0026#34; class=\u0026#34;input\u0026#34;\u0026gt; \u0026lt;option value=\u0026#34;\u0026#34;\u0026gt;é€‰æ‹©å•†å®¶\u0026lt;/option\u0026gt; \u0026lt;option v-for=\u0026#34;merchant in merchants\u0026#34; :key=\u0026#34;merchant.id\u0026#34; :value=\u0026#34;merchant.id\u0026#34; \u0026gt; {{ merchant.name }} \u0026lt;/option\u0026gt; \u0026lt;/select\u0026gt; \u0026lt;input v-model=\u0026#34;newService.price\u0026#34; type=\u0026#34;number\u0026#34; placeholder=\u0026#34;ä»·æ ¼\u0026#34; class=\u0026#34;input\u0026#34; /\u0026gt; \u0026lt;select v-model=\u0026#34;newService.category\u0026#34; class=\u0026#34;input\u0026#34;\u0026gt; \u0026lt;option value=\u0026#34;\u0026#34;\u0026gt;é€‰æ‹©åˆ†ç±»\u0026lt;/option\u0026gt; \u0026lt;option value=\u0026#34;å®¶æ”¿\u0026#34;\u0026gt;å®¶æ”¿\u0026lt;/option\u0026gt; \u0026lt;option value=\u0026#34;ç»´ä¿®\u0026#34;\u0026gt;ç»´ä¿®\u0026lt;/option\u0026gt; \u0026lt;option value=\u0026#34;ä¿æ´\u0026#34;\u0026gt;ä¿æ´\u0026lt;/option\u0026gt; \u0026lt;/select\u0026gt; \u0026lt;input v-model=\u0026#34;newService.stock\u0026#34; type=\u0026#34;number\u0026#34; placeholder=\u0026#34;åº“å­˜\u0026#34; class=\u0026#34;input\u0026#34; /\u0026gt; \u0026lt;input v-model=\u0026#34;newService.image_url\u0026#34; placeholder=\u0026#34;å›¾ç‰‡URL\u0026#34; class=\u0026#34;input\u0026#34; /\u0026gt; \u0026lt;button @click=\u0026#34;addService\u0026#34; class=\u0026#34;btn btn-primary\u0026#34;\u0026gt;æ·»åŠ æœåŠ¡\u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;!-- æœåŠ¡åˆ—è¡¨ --\u0026gt; \u0026lt;div class=\u0026#34;service-list\u0026#34;\u0026gt; \u0026lt;h3\u0026gt;ğŸ“‹ æœåŠ¡åˆ—è¡¨\u0026lt;/h3\u0026gt; \u0026lt;table class=\u0026#34;table\u0026#34;\u0026gt; \u0026lt;thead\u0026gt; \u0026lt;tr\u0026gt; \u0026lt;th\u0026gt;ID\u0026lt;/th\u0026gt; \u0026lt;th\u0026gt;æœåŠ¡åç§°\u0026lt;/th\u0026gt; \u0026lt;th\u0026gt;å•†å®¶\u0026lt;/th\u0026gt; \u0026lt;th\u0026gt;ä»·æ ¼\u0026lt;/th\u0026gt; \u0026lt;th\u0026gt;åˆ†ç±»\u0026lt;/th\u0026gt; \u0026lt;th\u0026gt;åº“å­˜\u0026lt;/th\u0026gt; \u0026lt;th\u0026gt;çŠ¶æ€\u0026lt;/th\u0026gt; \u0026lt;th\u0026gt;æ“ä½œ\u0026lt;/th\u0026gt; \u0026lt;!-- æ–°å¢æ“ä½œåˆ— --\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;/thead\u0026gt; \u0026lt;tbody\u0026gt; \u0026lt;tr v-for=\u0026#34;service in services\u0026#34; :key=\u0026#34;service.id\u0026#34;\u0026gt; \u0026lt;td\u0026gt;{{ service.id }}\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;{{ service.name }}\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;{{ service.merchant_name }}\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;Â¥{{ service.price }}\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;{{ service.category }}\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;{{ service.stock }}\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt; \u0026lt;span :class=\u0026#34;service.status === 0 ? \u0026#39;status-off\u0026#39; : \u0026#39;status-on\u0026#39;\u0026#34;\u0026gt; {{ service.status === 0 ? \u0026#34;ä¸‹æ¶\u0026#34; : \u0026#34;ä¸Šæ¶\u0026#34; }} \u0026lt;/span\u0026gt; \u0026lt;/td\u0026gt; \u0026lt;td\u0026gt; \u0026lt;!-- ä¸Šæ¶æŒ‰é’®ï¼ˆä¸‹æ¶çŠ¶æ€æ—¶æ˜¾ç¤ºï¼‰ --\u0026gt; \u0026lt;button v-if=\u0026#34;service.status === 0\u0026#34; class=\u0026#34;btn btn-publish\u0026#34; @click=\u0026#34;handlePublish(service.id)\u0026#34; \u0026gt; ä¸Šæ¶ \u0026lt;/button\u0026gt; \u0026lt;!-- ä¸‹æ¶æŒ‰é’®ï¼ˆä¸Šæ¶çŠ¶æ€æ—¶æ˜¾ç¤ºï¼‰ --\u0026gt; \u0026lt;button v-else class=\u0026#34;btn btn-unpublish\u0026#34; @click=\u0026#34;handleUnpublish(service.id)\u0026#34; \u0026gt; ä¸‹æ¶ \u0026lt;/button\u0026gt; \u0026lt;/td\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;/tbody\u0026gt; \u0026lt;/table\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;script\u0026gt; import { ref, onMounted } from \u0026#34;vue\u0026#34;; import serviceAPI from \u0026#34;../../api/service\u0026#34;; import merchantAPI from \u0026#34;../../api/merchant\u0026#34;; export default { name: \u0026#34;ServiceView\u0026#34;, setup() { const services = ref([]); const merchants = ref([]); const newService = ref({ name: \u0026#34;\u0026#34;, merchant_id: \u0026#34;\u0026#34;, price: \u0026#34;\u0026#34;, category: \u0026#34;\u0026#34;, stock: \u0026#34;\u0026#34;, image_url: \u0026#34;\u0026#34;, }); // è·å–æœåŠ¡åˆ—è¡¨ const getServices = async () =\u0026gt; { try { const response = await serviceAPI.getServices(); services.value = response.data.data; } catch (error) { alert(\u0026#34;è·å–æœåŠ¡åˆ—è¡¨å¤±è´¥ï¼\u0026#34;); console.error(error); } }; // è·å–å•†å®¶åˆ—è¡¨ const getMerchants = async () =\u0026gt; { try { const response = await merchantAPI.getMerchantList(); merchants.value = response.data.data; } catch (error) { alert(\u0026#34;è·å–å•†å®¶åˆ—è¡¨å¤±è´¥ï¼\u0026#34;); console.error(error); } }; // æ–°å¢æœåŠ¡ const addService = async () =\u0026gt; { if ( !newService.value.name || !newService.value.merchant_id || !newService.value.price ) { alert(\u0026#34;è¯·å¡«å†™å®Œæ•´ä¿¡æ¯ï¼\u0026#34;); return; } try { await serviceAPI.addService(newService.value); alert(\u0026#34;æœåŠ¡æ·»åŠ æˆåŠŸï¼\u0026#34;); newService.value = { name: \u0026#34;\u0026#34;, merchant_id: \u0026#34;\u0026#34;, price: \u0026#34;\u0026#34;, category: \u0026#34;\u0026#34;, stock: \u0026#34;\u0026#34;, image_url: \u0026#34;\u0026#34;, }; getServices(); } catch (error) { alert(\u0026#34;æ·»åŠ æœåŠ¡å¤±è´¥ï¼\u0026#34;); console.error(error); } }; // ä¸Šæ¶æœåŠ¡ï¼ˆçŠ¶æ€æ›´æ–°ä¸º1ï¼‰ const handlePublish = async (id) =\u0026gt; { try { await serviceAPI.publishService(id); alert(\u0026#34;æœåŠ¡ä¸Šæ¶æˆåŠŸï¼\u0026#34;); getServices(); // åˆ·æ–°åˆ—è¡¨ } catch (error) { alert(\u0026#34;ä¸Šæ¶å¤±è´¥ï¼\u0026#34;); console.error(error); } }; // ä¸‹æ¶æœåŠ¡ï¼ˆçŠ¶æ€æ›´æ–°ä¸º0ï¼‰ const handleUnpublish = async (id) =\u0026gt; { try { await serviceAPI.unpublishService(id); alert(\u0026#34;æœåŠ¡ä¸‹æ¶æˆåŠŸï¼\u0026#34;); getServices(); // åˆ·æ–°åˆ—è¡¨ } catch (error) { alert(\u0026#34;ä¸‹æ¶å¤±è´¥ï¼\u0026#34;); console.error(error); } }; onMounted(() =\u0026gt; { getServices(); getMerchants(); }); return { services, merchants, newService, addService, handlePublish, // å¯¼å‡ºä¸Šæ¶æ–¹æ³• handleUnpublish, // å¯¼å‡ºä¸‹æ¶æ–¹æ³• }; }, }; \u0026lt;/script\u0026gt; \u0026lt;style scoped\u0026gt; .service-page { padding: 20px; max-width: 1200px; margin: 0 auto; } .add-form { margin: 30px 0; padding: 20px; border: 1px solid #e1e1e1; border-radius: 8px; background: #f9f9f9; } .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; align-items: end; } .input { padding: 8px 12px; border: 1px solid #ccc; border-radius: 4px; width: 100%; } .btn { padding: 8px 16px; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; } .btn-primary { background: #4caf50; color: white; grid-column: 1 / -1; justify-self: start; } .btn-primary:hover { background: #45a049; } /* ä¸Šæ¶æŒ‰é’®æ ·å¼ */ .btn-publish { background: #2196f3; color: white; } .btn-publish:hover { background: #0b7dda; } /* ä¸‹æ¶æŒ‰é’®æ ·å¼ */ .btn-unpublish { background: #ff9800; color: white; } .btn-unpublish:hover { background: #e68900; } .service-list { margin-top: 30px; } .table { width: 100%; border-collapse: collapse; margin-top: 10px; background: white; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); } .table th, .table td { border: 1px solid #ddd; padding: 12px; text-align: left; } .table th { background: #f5f5f5; font-weight: bold; } .status-on { color: #4caf50; font-weight: bold; } .status-off { color: #f44336; font-weight: bold; } \u0026lt;/style\u0026gt; ç¬¬ 8 æ­¥ï¼šå¼€å‘è®¢å•ç®¡ç†é¡µé¢ åˆ›å»º src/views/Order/index.vueï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 \u0026lt;template\u0026gt; \u0026lt;div class=\u0026#34;order-page\u0026#34;\u0026gt; \u0026lt;h2\u0026gt;ğŸ“¦ è®¢å•ç®¡ç†\u0026lt;/h2\u0026gt; \u0026lt;!-- ç­›é€‰æ¡ä»¶ --\u0026gt; \u0026lt;div class=\u0026#34;filter-section\u0026#34;\u0026gt; \u0026lt;h3\u0026gt;ç­›é€‰æ¡ä»¶\u0026lt;/h3\u0026gt; \u0026lt;div class=\u0026#34;filter-group\u0026#34;\u0026gt; \u0026lt;label\u0026gt; \u0026lt;input type=\u0026#34;radio\u0026#34; v-model=\u0026#34;filterStatus\u0026#34; value=\u0026#34;\u0026#34; /\u0026gt; å…¨éƒ¨è®¢å• \u0026lt;/label\u0026gt; \u0026lt;label\u0026gt; \u0026lt;input type=\u0026#34;radio\u0026#34; v-model=\u0026#34;filterStatus\u0026#34; value=\u0026#34;0\u0026#34; /\u0026gt; å¾…æ”¯ä»˜ \u0026lt;/label\u0026gt; \u0026lt;label\u0026gt; \u0026lt;input type=\u0026#34;radio\u0026#34; v-model=\u0026#34;filterStatus\u0026#34; value=\u0026#34;1\u0026#34; /\u0026gt; å·²å®Œæˆ \u0026lt;/label\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;!-- è®¢å•åˆ—è¡¨ --\u0026gt; \u0026lt;div class=\u0026#34;order-list\u0026#34;\u0026gt; \u0026lt;h3\u0026gt;è®¢å•åˆ—è¡¨\u0026lt;/h3\u0026gt; \u0026lt;table class=\u0026#34;table\u0026#34;\u0026gt; \u0026lt;thead\u0026gt; \u0026lt;tr\u0026gt; \u0026lt;th\u0026gt;è®¢å•ID\u0026lt;/th\u0026gt; \u0026lt;th\u0026gt;æœåŠ¡åç§°\u0026lt;/th\u0026gt; \u0026lt;th\u0026gt;å•†å®¶\u0026lt;/th\u0026gt; \u0026lt;th\u0026gt;ç”¨æˆ·å§“å\u0026lt;/th\u0026gt; \u0026lt;th\u0026gt;ç”¨æˆ·ç”µè¯\u0026lt;/th\u0026gt; \u0026lt;th\u0026gt;ä»·æ ¼\u0026lt;/th\u0026gt; \u0026lt;th\u0026gt;çŠ¶æ€\u0026lt;/th\u0026gt; \u0026lt;th\u0026gt;ä¸‹å•æ—¶é—´\u0026lt;/th\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;/thead\u0026gt; \u0026lt;tbody\u0026gt; \u0026lt;tr v-for=\u0026#34;order in orders\u0026#34; :key=\u0026#34;order.id\u0026#34;\u0026gt; \u0026lt;td\u0026gt;{{ order.id }}\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;{{ order.service_name }}\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;{{ order.merchant_name }}\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;{{ order.user_name }}\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;{{ order.user_phone }}\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;Â¥{{ order.price }}\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt; \u0026lt;span :class=\u0026#34; order.status === 0 ? \u0026#39;status-pending\u0026#39; : \u0026#39;status-completed\u0026#39; \u0026#34; \u0026gt; {{ order.status === 0 ? \u0026#34;å¾…æ”¯ä»˜\u0026#34; : \u0026#34;å·²å®Œæˆ\u0026#34; }} \u0026lt;/span\u0026gt; \u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;{{ formatTime(order.create_time) }}\u0026lt;/td\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;/tbody\u0026gt; \u0026lt;/table\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;script\u0026gt; import { ref, onMounted, watch } from \u0026#34;vue\u0026#34;; import orderAPI from \u0026#34;../../api/order\u0026#34;; export default { name: \u0026#34;OrderView\u0026#34;, setup() { const orders = ref([]); const filterStatus = ref(\u0026#34;\u0026#34;); // è·å–è®¢å•åˆ—è¡¨ const getOrders = async (status = \u0026#34;\u0026#34;) =\u0026gt; { try { const response = await orderAPI.getOrders(status); orders.value = response.data.data; } catch (error) { alert(\u0026#34;è·å–è®¢å•åˆ—è¡¨å¤±è´¥ï¼\u0026#34;); console.error(error); } }; // æ ¼å¼åŒ–æ—¶é—´ const formatTime = (timeString) =\u0026gt; { return new Date(timeString).toLocaleString(); }; // ç›‘å¬ç­›é€‰æ¡ä»¶å˜åŒ– watch(filterStatus, (newStatus) =\u0026gt; { getOrders(newStatus); }); // é¡µé¢åŠ è½½æ—¶è·å–æ•°æ® onMounted(() =\u0026gt; { getOrders(); }); return { orders, filterStatus, formatTime, }; }, }; \u0026lt;/script\u0026gt; \u0026lt;style scoped\u0026gt; .order-page { padding: 20px; max-width: 1200px; margin: 0 auto; } .filter-section { margin: 30px 0; padding: 20px; border: 1px solid #e1e1e1; border-radius: 8px; background: #f9f9f9; } .filter-group { display: flex; gap: 20px; margin-top: 10px; } .filter-group label { display: flex; align-items: center; gap: 5px; cursor: pointer; } .order-list { margin-top: 30px; } .table { width: 100%; border-collapse: collapse; margin-top: 10px; background: white; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); } .table th, .table td { border: 1px solid #ddd; padding: 12px; text-align: left; } .table th { background: #f5f5f5; font-weight: bold; } .status-pending { color: #ff9800; font-weight: bold; } .status-completed { color: #4caf50; font-weight: bold; } \u0026lt;/style\u0026gt; ç¬¬ 9 æ­¥ï¼šå¯åŠ¨ Web ç®¡ç†åå° æ³¨æ„æ­¤æ—¶ï¼Œè¿˜æœ‰å‰åç«¯è·¨åŸŸé—®é¢˜ï¼ˆç”¨ cores æˆ–è€… nginx ä»£ç†è§£å†³ï¼‰ PSï¼ˆæˆ‘ä¼šåœ¨åç»­çš„æ–‡ç« ä¸­è§£å†³ï¼‰ 1 2 cd D:/life-service/web-admin npm run serve è®¿é—®ï¼šhttp://localhost:8080\nğŸ“± é˜¶æ®µå››ï¼šå¾®ä¿¡å°ç¨‹åºå¼€å‘ï¼ˆ3-4 å¤©ï¼‰ ç¬¬ 1 æ­¥ï¼šåˆ›å»ºå°ç¨‹åºé¡¹ç›® æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…· ç‚¹å‡»\u0026quot;æ–°å»ºé¡¹ç›®\u0026quot; å¡«å†™ä¿¡æ¯ï¼š é¡¹ç›®åç§°ï¼šç”Ÿæ´»æœåŠ¡å¹³å° ç›®å½•ï¼šé€‰æ‹© D:/life-service/mini-user AppIDï¼šç‚¹å‡»\u0026quot;æµ‹è¯•å·\u0026quot; åç«¯æœåŠ¡ï¼šä¸ä½¿ç”¨äº‘æœåŠ¡ ç‚¹å‡»\u0026quot;æ–°å»º\u0026quot; ç¬¬ 2 æ­¥ï¼šé¡¹ç›®ç»“æ„é…ç½® åœ¨å°ç¨‹åºé¡¹ç›®ä¸­åˆ›å»ºä»¥ä¸‹ç»“æ„ï¼š\n1 2 3 4 5 6 7 8 9 10 mini-user/ â”œâ”€â”€ pages/ â”‚ â”œâ”€â”€ index/ï¼ˆé¦–é¡µï¼‰ â”‚ â”œâ”€â”€ serviceList/ï¼ˆæœåŠ¡åˆ—è¡¨ï¼‰ â”‚ â”œâ”€â”€ orderCreate/ï¼ˆåˆ›å»ºè®¢å•ï¼‰ â”‚ â””â”€â”€ orderList/ï¼ˆè®¢å•åˆ—è¡¨ï¼‰ â”œâ”€â”€ utils/ â”‚ â””â”€â”€ request.jsï¼ˆè¯·æ±‚å°è£…ï¼‰ â”œâ”€â”€ images/ï¼ˆå›¾ç‰‡èµ„æºï¼‰ â””â”€â”€ app.jsï¼ˆå°ç¨‹åºå…¥å£ï¼‰ ç¬¬ 3 æ­¥ï¼šå°è£…ç½‘ç»œè¯·æ±‚ åˆ›å»º utils/request.jsï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 const request = (url, method = \u0026#34;GET\u0026#34;, data = {}) =\u0026gt; { return new Promise((resolve, reject) =\u0026gt; { wx.request({ url: \u0026#34;http://localhost:8080/api\u0026#34; + url, method, data, success: (res) =\u0026gt; { if (res.data.code === 200) { resolve(res.data.data); } else { reject(res.data.msg); } }, fail: (err) =\u0026gt; { reject(\u0026#34;ç½‘ç»œè¯·æ±‚å¤±è´¥ï¼š\u0026#34; + err.errMsg); }, }); }); }; module.exports = request; ç¬¬ 4 æ­¥ï¼šé…ç½®å°ç¨‹åºé¡µé¢ ä¿®æ”¹ app.jsonï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 { \u0026#34;pages\u0026#34;: [ \u0026#34;pages/index/index\u0026#34;, \u0026#34;pages/serviceList/serviceList\u0026#34;, \u0026#34;pages/orderCreate/orderCreate\u0026#34;, \u0026#34;pages/orderList/orderList\u0026#34; ], \u0026#34;window\u0026#34;: { \u0026#34;backgroundTextStyle\u0026#34;: \u0026#34;light\u0026#34;, \u0026#34;navigationBarBackgroundColor\u0026#34;: \u0026#34;#2c3e50\u0026#34;, \u0026#34;navigationBarTitleText\u0026#34;: \u0026#34;ç”Ÿæ´»æœåŠ¡å¹³å°\u0026#34;, \u0026#34;navigationBarTextStyle\u0026#34;: \u0026#34;white\u0026#34; }, \u0026#34;style\u0026#34;: \u0026#34;v2\u0026#34;, \u0026#34;sitemapLocation\u0026#34;: \u0026#34;sitemap.json\u0026#34; } ç¬¬ 5 æ­¥ï¼šå¼€å‘é¦–é¡µ åˆ›å»º pages/index/index.jsï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 const request = require(\u0026#34;../../utils/request\u0026#34;); Page({ data: { services: [], categories: [ { name: \u0026#34;å®¶æ”¿\u0026#34;, icon: \u0026#34;ğŸ \u0026#34;, type: \u0026#34;å®¶æ”¿\u0026#34; }, { name: \u0026#34;ç»´ä¿®\u0026#34;, icon: \u0026#34;ğŸ”§\u0026#34;, type: \u0026#34;ç»´ä¿®\u0026#34; }, { name: \u0026#34;ä¿æ´\u0026#34;, icon: \u0026#34;âœ¨\u0026#34;, type: \u0026#34;ä¿æ´\u0026#34; }, ], }, onLoad() { this.getServices(); }, // è·å–æ¨èæœåŠ¡ async getServices() { try { const services = await request(\u0026#34;/service/list\u0026#34;); // åªå–å‰4ä¸ªä½œä¸ºæ¨è this.setData({ services: services.slice(0, 4), }); } catch (err) { wx.showToast({ title: \u0026#34;åŠ è½½å¤±è´¥\u0026#34;, icon: \u0026#34;none\u0026#34;, }); } }, // è·³è½¬åˆ°æœåŠ¡åˆ—è¡¨ toServiceList(e) { const type = e.currentTarget.dataset.type; wx.navigateTo({ url: `/pages/serviceList/serviceList?type=${type}`, }); }, // è·³è½¬åˆ°è®¢å•åˆ—è¡¨ toOrderList() { wx.navigateTo({ url: \u0026#34;/pages/orderList/orderList\u0026#34;, }); }, }); åˆ›å»º pages/index/index.wxmlï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 \u0026lt;view class=\u0026#34;container\u0026#34;\u0026gt; \u0026lt;!-- å¤´éƒ¨ --\u0026gt; \u0026lt;view class=\u0026#34;header\u0026#34;\u0026gt; \u0026lt;text class=\u0026#34;title\u0026#34;\u0026gt;ç”Ÿæ´»æœåŠ¡å¹³å°\u0026lt;/text\u0026gt; \u0026lt;text class=\u0026#34;subtitle\u0026#34;\u0026gt;ä¾¿æ·ç”Ÿæ´»ï¼Œä¸€é”®é€è¾¾\u0026lt;/text\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;!-- æœåŠ¡åˆ†ç±» --\u0026gt; \u0026lt;view class=\u0026#34;category-section\u0026#34;\u0026gt; \u0026lt;view class=\u0026#34;section-title\u0026#34;\u0026gt;æœåŠ¡åˆ†ç±»\u0026lt;/view\u0026gt; \u0026lt;view class=\u0026#34;category-grid\u0026#34;\u0026gt; \u0026lt;view class=\u0026#34;category-item\u0026#34; wx:for=\u0026#34;{{categories}}\u0026#34; wx:key=\u0026#34;type\u0026#34; bindtap=\u0026#34;toServiceList\u0026#34; data-type=\u0026#34;{{item.type}}\u0026#34; \u0026gt; \u0026lt;text class=\u0026#34;category-icon\u0026#34;\u0026gt;{{item.icon}}\u0026lt;/text\u0026gt; \u0026lt;text class=\u0026#34;category-name\u0026#34;\u0026gt;{{item.name}}\u0026lt;/text\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;!-- æ¨èæœåŠ¡ --\u0026gt; \u0026lt;view class=\u0026#34;recommend-section\u0026#34;\u0026gt; \u0026lt;view class=\u0026#34;section-header\u0026#34;\u0026gt; \u0026lt;text class=\u0026#34;section-title\u0026#34;\u0026gt;æ¨èæœåŠ¡\u0026lt;/text\u0026gt; \u0026lt;text class=\u0026#34;more\u0026#34; bindtap=\u0026#34;toServiceList\u0026#34; data-type=\u0026#34;\u0026#34;\u0026gt;æŸ¥çœ‹æ›´å¤š\u0026lt;/text\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;view class=\u0026#34;service-grid\u0026#34;\u0026gt; \u0026lt;view class=\u0026#34;service-card\u0026#34; wx:for=\u0026#34;{{services}}\u0026#34; wx:key=\u0026#34;id\u0026#34; bindtap=\u0026#34;toOrderCreate\u0026#34; data-service=\u0026#34;{{item}}\u0026#34; \u0026gt; \u0026lt;image class=\u0026#34;service-image\u0026#34; src=\u0026#34;{{item.image_url || \u0026#39;/images/default-service.png\u0026#39;}}\u0026#34;\u0026gt;\u0026lt;/image\u0026gt; \u0026lt;view class=\u0026#34;service-info\u0026#34;\u0026gt; \u0026lt;text class=\u0026#34;service-name\u0026#34;\u0026gt;{{item.name}}\u0026lt;/text\u0026gt; \u0026lt;text class=\u0026#34;service-merchant\u0026#34;\u0026gt;{{item.merchant_name}}\u0026lt;/text\u0026gt; \u0026lt;view class=\u0026#34;service-bottom\u0026#34;\u0026gt; \u0026lt;text class=\u0026#34;service-price\u0026#34;\u0026gt;Â¥{{item.price}}\u0026lt;/text\u0026gt; \u0026lt;text class=\u0026#34;service-category\u0026#34;\u0026gt;{{item.category}}\u0026lt;/text\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;!-- åº•éƒ¨å¯¼èˆª --\u0026gt; \u0026lt;view class=\u0026#34;bottom-nav\u0026#34;\u0026gt; \u0026lt;view class=\u0026#34;nav-item\u0026#34; bindtap=\u0026#34;toServiceList\u0026#34; data-type=\u0026#34;\u0026#34;\u0026gt; \u0026lt;text class=\u0026#34;nav-icon\u0026#34;\u0026gt;ğŸ”\u0026lt;/text\u0026gt; \u0026lt;text class=\u0026#34;nav-text\u0026#34;\u0026gt;å…¨éƒ¨æœåŠ¡\u0026lt;/text\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;view class=\u0026#34;nav-item\u0026#34; bindtap=\u0026#34;toOrderList\u0026#34;\u0026gt; \u0026lt;text class=\u0026#34;nav-icon\u0026#34;\u0026gt;ğŸ“¦\u0026lt;/text\u0026gt; \u0026lt;text class=\u0026#34;nav-text\u0026#34;\u0026gt;æˆ‘çš„è®¢å•\u0026lt;/text\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;/view\u0026gt; åˆ›å»º pages/index/index.wxssï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 .container { padding: 20rpx; background: #f5f5f5; min-height: 100vh; } /* å¤´éƒ¨æ ·å¼ */ .header { text-align: center; margin: 40rpx 0 60rpx; } .title { display: block; font-size: 48rpx; font-weight: bold; color: #2c3e50; margin-bottom: 10rpx; } .subtitle { display: block; font-size: 28rpx; color: #7f8c8d; } /* åˆ†ç±»åŒºåŸŸ */ .category-section { margin-bottom: 40rpx; } .section-title { font-size: 36rpx; font-weight: bold; color: #2c3e50; margin-bottom: 30rpx; display: block; } .category-grid { display: flex; justify-content: space-around; background: white; padding: 30rpx; border-radius: 20rpx; box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.1); } .category-item { display: flex; flex-direction: column; align-items: center; } .category-icon { font-size: 60rpx; margin-bottom: 15rpx; } .category-name { font-size: 28rpx; color: #2c3e50; } /* æ¨èæœåŠ¡ */ .recommend-section { margin-bottom: 100rpx; } .section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30rpx; } .more { font-size: 28rpx; color: #3498db; } .service-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20rpx; } .service-card { background: white; border-radius: 20rpx; overflow: hidden; box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.1); } .service-image { width: 100%; height: 200rpx; background: #ecf0f1; } .service-info { padding: 20rpx; } .service-name { display: block; font-size: 30rpx; font-weight: bold; color: #2c3e50; margin-bottom: 10rpx; } .service-merchant { display: block; font-size: 24rpx; color: #7f8c8d; margin-bottom: 15rpx; } .service-bottom { display: flex; justify-content: space-between; align-items: center; } .service-price { color: #e74c3c; font-size: 28rpx; font-weight: bold; } .service-category { font-size: 24rpx; color: #3498db; background: #ecf0f1; padding: 5rpx 15rpx; border-radius: 20rpx; } /* åº•éƒ¨å¯¼èˆª */ .bottom-nav { position: fixed; bottom: 0; left: 0; right: 0; background: white; display: flex; padding: 20rpx; box-shadow: 0 -2rpx 20rpx rgba(0, 0, 0, 0.1); } .nav-item { flex: 1; display: flex; flex-direction: column; align-items: center; } .nav-icon { font-size: 40rpx; margin-bottom: 10rpx; } .nav-text { font-size: 24rpx; color: #2c3e50; } ç¬¬ 6 æ­¥ï¼šå¼€å‘æœåŠ¡åˆ—è¡¨é¡µé¢ åˆ›å»º pages/serviceList/serviceList.jsï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 const request = require(\u0026#34;../../utils/request\u0026#34;); Page({ data: { services: [], categories: [\u0026#34;å…¨éƒ¨\u0026#34;, \u0026#34;å®¶æ”¿\u0026#34;, \u0026#34;ç»´ä¿®\u0026#34;, \u0026#34;ä¿æ´\u0026#34;], activeCategory: \u0026#34;å…¨éƒ¨\u0026#34;, searchKeyword: \u0026#34;\u0026#34;, }, onLoad(options) { if (options.type) { this.setData({ activeCategory: options.type }); } this.getServices(); }, // è·å–æœåŠ¡åˆ—è¡¨ async getServices() { const { activeCategory, searchKeyword } = this.data; try { let category = activeCategory === \u0026#34;å…¨éƒ¨\u0026#34; ? \u0026#34;\u0026#34; : activeCategory; let services = await request(\u0026#34;/service/list\u0026#34;, \u0026#34;GET\u0026#34;, { category }); // å‰ç«¯æœç´¢è¿‡æ»¤ if (searchKeyword) { services = services.filter( (service) =\u0026gt; service.name.includes(searchKeyword) || service.merchant_name.includes(searchKeyword) ); } this.setData({ services }); } catch (err) { wx.showToast({ title: \u0026#34;åŠ è½½å¤±è´¥\u0026#34;, icon: \u0026#34;none\u0026#34;, }); } }, // åˆ‡æ¢åˆ†ç±» switchCategory(e) { const category = e.currentTarget.dataset.category; this.setData({ activeCategory: category, searchKeyword: \u0026#34;\u0026#34;, }); this.getServices(); }, // æœç´¢è¾“å…¥ onSearchInput(e) { this.setData({ searchKeyword: e.detail.value }); }, // æ‰§è¡Œæœç´¢ onSearch() { this.getServices(); }, // è·³è½¬åˆ°ä¸‹å•é¡µé¢ï¼ˆä¿®æ”¹åï¼‰ toOrderCreate(e) { const service = e.currentTarget.dataset.service; wx.navigateTo({ url: `/pages/orderCreate/orderCreate?service=${encodeURIComponent( JSON.stringify(service) )}`, }); }, }); åˆ›å»º pages/serviceList/serviceList.wxmlï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 \u0026lt;view class=\u0026#34;container\u0026#34;\u0026gt; \u0026lt;!-- æœç´¢æ¡† --\u0026gt; \u0026lt;view class=\u0026#34;search-box\u0026#34;\u0026gt; \u0026lt;input class=\u0026#34;search-input\u0026#34; placeholder=\u0026#34;æœç´¢æœåŠ¡æˆ–å•†å®¶...\u0026#34; value=\u0026#34;{{searchKeyword}}\u0026#34; bindinput=\u0026#34;onSearchInput\u0026#34; /\u0026gt; \u0026lt;button class=\u0026#34;search-btn\u0026#34; bindtap=\u0026#34;onSearch\u0026#34;\u0026gt;æœç´¢\u0026lt;/button\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;!-- åˆ†ç±»ç­›é€‰ --\u0026gt; \u0026lt;scroll-view class=\u0026#34;category-scroll\u0026#34; scroll-x\u0026gt; \u0026lt;view class=\u0026#34;category-list\u0026#34;\u0026gt; \u0026lt;view class=\u0026#34;category-item {{activeCategory === item ? \u0026#39;active\u0026#39; : \u0026#39;\u0026#39;}}\u0026#34; wx:for=\u0026#34;{{categories}}\u0026#34; wx:key=\u0026#34;*this\u0026#34; bindtap=\u0026#34;switchCategory\u0026#34; data-category=\u0026#34;{{item}}\u0026#34;\u0026gt; {{item}} \u0026lt;/view\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;/scroll-view\u0026gt; \u0026lt;!-- æœåŠ¡åˆ—è¡¨ --\u0026gt; \u0026lt;view class=\u0026#34;service-list\u0026#34;\u0026gt; \u0026lt;view class=\u0026#34;service-item\u0026#34; wx:for=\u0026#34;{{services}}\u0026#34; wx:key=\u0026#34;id\u0026#34; bindtap=\u0026#34;toOrderCreate\u0026#34; data-service=\u0026#34;{{item}}\u0026#34;\u0026gt; \u0026lt;image class=\u0026#34;service-image\u0026#34; src=\u0026#34;{{item.image_url || \u0026#39;/images/default-service.png\u0026#39;}}\u0026#34;\u0026gt;\u0026lt;/image\u0026gt; \u0026lt;view class=\u0026#34;service-content\u0026#34;\u0026gt; \u0026lt;view class=\u0026#34;service-header\u0026#34;\u0026gt; \u0026lt;text class=\u0026#34;service-name\u0026#34;\u0026gt;{{item.name}}\u0026lt;/text\u0026gt; \u0026lt;text class=\u0026#34;service-price\u0026#34;\u0026gt;Â¥{{item.price}}\u0026lt;/text\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;view class=\u0026#34;service-merchant\u0026#34;\u0026gt;{{item.merchant_name}}\u0026lt;/view\u0026gt; \u0026lt;view class=\u0026#34;service-footer\u0026#34;\u0026gt; \u0026lt;text class=\u0026#34;service-category\u0026#34;\u0026gt;{{item.category}}\u0026lt;/text\u0026gt; \u0026lt;text class=\u0026#34;service-stock\u0026#34;\u0026gt;åº“å­˜: {{item.stock}}\u0026lt;/text\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;!-- ç©ºçŠ¶æ€ --\u0026gt; \u0026lt;view class=\u0026#34;empty-state\u0026#34; wx:if=\u0026#34;{{services.length === 0}}\u0026#34;\u0026gt; \u0026lt;text class=\u0026#34;empty-text\u0026#34;\u0026gt;æš‚æ— æœåŠ¡\u0026lt;/text\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;/view\u0026gt; åˆ›å»º pages/serviceList/serviceList.wxssï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 .container { padding: 20rpx; background: #f5f5f5; min-height: 100vh; } /* æœç´¢æ¡† */ .search-box { display: flex; gap: 20rpx; margin-bottom: 30rpx; } .search-input { flex: 1; background: white; padding: 20rpx; border-radius: 10rpx; font-size: 28rpx; } .search-btn { background: #3498db; color: white; border: none; border-radius: 10rpx; padding: 0 30rpx; font-size: 28rpx; } /* åˆ†ç±»ç­›é€‰ */ .category-scroll { white-space: nowrap; margin-bottom: 30rpx; } .category-list { display: inline-flex; gap: 20rpx; } .category-item { display: inline-block; padding: 15rpx 30rpx; background: white; border-radius: 30rpx; font-size: 28rpx; color: #666; } .category-item.active { background: #3498db; color: white; } /* æœåŠ¡åˆ—è¡¨ */ .service-list { display: flex; flex-direction: column; gap: 20rpx; } .service-item { display: flex; background: white; border-radius: 20rpx; overflow: hidden; box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.1); } .service-image { width: 200rpx; height: 200rpx; background: #ecf0f1; } .service-content { flex: 1; padding: 30rpx; display: flex; flex-direction: column; justify-content: space-between; } .service-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15rpx; } .service-name { font-size: 32rpx; font-weight: bold; color: #2c3e50; flex: 1; margin-right: 20rpx; } .service-price { font-size: 32rpx; color: #e74c3c; font-weight: bold; } .service-merchant { font-size: 26rpx; color: #7f8c8d; margin-bottom: 15rpx; } .service-footer { display: flex; justify-content: space-between; align-items: center; } .service-category { font-size: 24rpx; color: #3498db; background: #ecf0f1; padding: 8rpx 20rpx; border-radius: 20rpx; } .service-stock { font-size: 24rpx; color: #95a5a6; } /* ç©ºçŠ¶æ€ */ .empty-state { text-align: center; padding: 100rpx 0; } .empty-text { font-size: 32rpx; color: #bdc3c7; } ç¬¬ 7 æ­¥ï¼šå¼€å‘åˆ›å»ºè®¢å•é¡µé¢ åˆ›å»º pages/orderCreate/orderCreate.jsï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 const request = require(\u0026#34;../../utils/request\u0026#34;); Page({ data: { service: null, userInfo: { name: \u0026#34;\u0026#34;, phone: \u0026#34;\u0026#34;, }, }, onLoad(options) { if (options.service) { try { const serviceStr = decodeURIComponent(options.service); const service = JSON.parse(serviceStr); this.setData({ service }); } catch (err) { // 3. æ•è·è§£æé”™è¯¯ï¼Œé¿å…é¡µé¢å´©æºƒå¹¶æç¤ºç”¨æˆ· console.error(\u0026#34;æœåŠ¡ä¿¡æ¯è§£æå¤±è´¥ï¼š\u0026#34;, err); wx.showToast({ title: \u0026#34;æœåŠ¡ä¿¡æ¯é”™è¯¯\u0026#34;, icon: \u0026#34;none\u0026#34;, duration: 2000, }); // è§£æå¤±è´¥æ—¶è¿”å›ä¸Šä¸€é¡µ setTimeout(() =\u0026gt; { wx.navigateBack(); }, 2000); } } else { // æ²¡æœ‰ä¼ é€’ service å‚æ•°æ—¶çš„æç¤º wx.showToast({ title: \u0026#34;æœªè·å–åˆ°æœåŠ¡ä¿¡æ¯\u0026#34;, icon: \u0026#34;none\u0026#34;, duration: 2000, }); setTimeout(() =\u0026gt; { wx.navigateBack(); }, 2000); } }, // è¾“å…¥ç”¨æˆ·å§“å onNameInput(e) { this.setData({ \u0026#34;userInfo.name\u0026#34;: e.detail.value, }); }, // è¾“å…¥ç”¨æˆ·ç”µè¯ onPhoneInput(e) { this.setData({ \u0026#34;userInfo.phone\u0026#34;: e.detail.value, }); }, // æäº¤è®¢å• async submitOrder() { const { service, userInfo } = this.data; if (!userInfo.name.trim()) { wx.showToast({ title: \u0026#34;è¯·è¾“å…¥å§“å\u0026#34;, icon: \u0026#34;none\u0026#34;, }); return; } if (!userInfo.phone.trim()) { wx.showToast({ title: \u0026#34;è¯·è¾“å…¥æ‰‹æœºå·\u0026#34;, icon: \u0026#34;none\u0026#34;, }); return; } // ç®€å•çš„æ‰‹æœºå·éªŒè¯ const phoneRegex = /^1[3-9]\\d{9}$/; if (!phoneRegex.test(userInfo.phone)) { wx.showToast({ title: \u0026#34;è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·\u0026#34;, icon: \u0026#34;none\u0026#34;, }); return; } try { wx.showLoading({ title: \u0026#34;æäº¤ä¸­...\u0026#34;, }); await request(\u0026#34;/order/create\u0026#34;, \u0026#34;POST\u0026#34;, { service_id: service.id, user_name: userInfo.name, user_phone: userInfo.phone, }); wx.hideLoading(); wx.showToast({ title: \u0026#34;è®¢å•åˆ›å»ºæˆåŠŸï¼\u0026#34;, icon: \u0026#34;success\u0026#34;, duration: 2000, }); // è·³è½¬åˆ°è®¢å•åˆ—è¡¨ setTimeout(() =\u0026gt; { wx.navigateTo({ url: \u0026#34;/pages/orderList/orderList\u0026#34;, }); }, 2000); } catch (err) { wx.hideLoading(); wx.showToast({ title: \u0026#34;è®¢å•åˆ›å»ºå¤±è´¥\u0026#34;, icon: \u0026#34;none\u0026#34;, }); } }, }); åˆ›å»º pages/orderCreate/orderCreate.wxmlï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 \u0026lt;view class=\u0026#34;container\u0026#34;\u0026gt; \u0026lt;!-- æœåŠ¡ä¿¡æ¯ --\u0026gt; \u0026lt;view class=\u0026#34;service-card\u0026#34; wx:if=\u0026#34;{{service}}\u0026#34;\u0026gt; \u0026lt;view class=\u0026#34;card-title\u0026#34;\u0026gt;æœåŠ¡ä¿¡æ¯\u0026lt;/view\u0026gt; \u0026lt;view class=\u0026#34;service-info\u0026#34;\u0026gt; \u0026lt;image class=\u0026#34;service-image\u0026#34; src=\u0026#34;{{service.image_url || \u0026#39;/images/default-service.png\u0026#39;}}\u0026#34;\u0026gt;\u0026lt;/image\u0026gt; \u0026lt;view class=\u0026#34;service-details\u0026#34;\u0026gt; \u0026lt;text class=\u0026#34;service-name\u0026#34;\u0026gt;{{service.name}}\u0026lt;/text\u0026gt; \u0026lt;text class=\u0026#34;service-merchant\u0026#34;\u0026gt;{{service.merchant_name}}\u0026lt;/text\u0026gt; \u0026lt;text class=\u0026#34;service-price\u0026#34;\u0026gt;Â¥{{service.price}}\u0026lt;/text\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;!-- ç”¨æˆ·ä¿¡æ¯è¡¨å• --\u0026gt; \u0026lt;view class=\u0026#34;form-card\u0026#34;\u0026gt; \u0026lt;view class=\u0026#34;card-title\u0026#34;\u0026gt;å¡«å†™è®¢å•ä¿¡æ¯\u0026lt;/view\u0026gt; \u0026lt;view class=\u0026#34;form-item\u0026#34;\u0026gt; \u0026lt;text class=\u0026#34;form-label\u0026#34;\u0026gt;å§“å\u0026lt;/text\u0026gt; \u0026lt;input class=\u0026#34;form-input\u0026#34; placeholder=\u0026#34;è¯·è¾“å…¥æ‚¨çš„å§“å\u0026#34; value=\u0026#34;{{userInfo.name}}\u0026#34; bindinput=\u0026#34;onNameInput\u0026#34; /\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;view class=\u0026#34;form-item\u0026#34;\u0026gt; \u0026lt;text class=\u0026#34;form-label\u0026#34;\u0026gt;æ‰‹æœºå·\u0026lt;/text\u0026gt; \u0026lt;input class=\u0026#34;form-input\u0026#34; placeholder=\u0026#34;è¯·è¾“å…¥æ‚¨çš„æ‰‹æœºå·\u0026#34; type=\u0026#34;number\u0026#34; value=\u0026#34;{{userInfo.phone}}\u0026#34; bindinput=\u0026#34;onPhoneInput\u0026#34; /\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;!-- æäº¤æŒ‰é’® --\u0026gt; \u0026lt;view class=\u0026#34;submit-section\u0026#34;\u0026gt; \u0026lt;view class=\u0026#34;price-display\u0026#34;\u0026gt; \u0026lt;text class=\u0026#34;price-label\u0026#34;\u0026gt;æ€»è®¡ï¼š\u0026lt;/text\u0026gt; \u0026lt;text class=\u0026#34;price-amount\u0026#34;\u0026gt;Â¥{{service ? service.price : \u0026#39;0\u0026#39;}}\u0026lt;/text\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;button class=\u0026#34;submit-btn\u0026#34; bindtap=\u0026#34;submitOrder\u0026#34;\u0026gt;ç«‹å³ä¸‹å•\u0026lt;/button\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;/view\u0026gt; åˆ›å»º pages/orderCreate/orderCreate.wxssï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 .container { padding: 20rpx; background: #f5f5f5; min-height: 100vh; padding-bottom: 200rpx; } /* å¡ç‰‡æ ·å¼ */ .service-card, .form-card { background: white; border-radius: 20rpx; padding: 30rpx; margin-bottom: 20rpx; box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.1); } .card-title { font-size: 32rpx; font-weight: bold; color: #2c3e50; margin-bottom: 30rpx; } /* æœåŠ¡ä¿¡æ¯ */ .service-info { display: flex; gap: 30rpx; } .service-image { width: 120rpx; height: 120rpx; border-radius: 10rpx; background: #ecf0f1; } .service-details { flex: 1; display: flex; flex-direction: column; justify-content: space-between; } .service-name { font-size: 32rpx; font-weight: bold; color: #2c3e50; } .service-merchant { font-size: 26rpx; color: #7f8c8d; } .service-price { font-size: 36rpx; color: #e74c3c; font-weight: bold; } /* è¡¨å•æ ·å¼ */ .form-item { display: flex; align-items: center; padding: 30rpx 0; border-bottom: 1rpx solid #ecf0f1; } .form-item:last-child { border-bottom: none; } .form-label { font-size: 30rpx; color: #2c3e50; width: 150rpx; } .form-input { flex: 1; font-size: 30rpx; color: #2c3e50; } /* æäº¤åŒºåŸŸ */ .submit-section { position: fixed; bottom: 0; left: 0; right: 0; background: white; padding: 30rpx; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 -2rpx 20rpx rgba(0, 0, 0, 0.1); } .price-display { display: flex; align-items: baseline; } .price-label { font-size: 28rpx; color: #2c3e50; margin-right: 10rpx; } .price-amount { font-size: 40rpx; color: #e74c3c; font-weight: bold; } .submit-btn { background: #e74c3c; color: white; border: none; border-radius: 50rpx; padding: 25rpx 60rpx; font-size: 32rpx; font-weight: bold; } ç¬¬ 8 æ­¥ï¼šå¼€å‘è®¢å•åˆ—è¡¨é¡µé¢ åˆ›å»º pages/orderList/orderList.jsï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 const request = require(\u0026#34;../../utils/request\u0026#34;); Page({ data: { orders: [], }, onLoad() { this.getOrders(); }, onShow() { this.getOrders(); }, // è·å–è®¢å•åˆ—è¡¨ async getOrders() { try { const orders = await request(\u0026#34;/order/list\u0026#34;); this.setData({ orders }); } catch (err) { wx.showToast({ title: \u0026#34;åŠ è½½å¤±è´¥\u0026#34;, icon: \u0026#34;none\u0026#34;, }); } }, // æ ¼å¼åŒ–æ—¶é—´ formatTime(timeString) { const date = new Date(timeString); return `${date.getFullYear()}-${(date.getMonth() + 1) .toString() .padStart(2, \u0026#34;0\u0026#34;)}-${date.getDate().toString().padStart(2, \u0026#34;0\u0026#34;)} ${date .getHours() .toString() .padStart(2, \u0026#34;0\u0026#34;)}:${date.getMinutes().toString().padStart(2, \u0026#34;0\u0026#34;)}`; }, }); åˆ›å»º pages/orderList/orderList.wxmlï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 \u0026lt;view class=\u0026#34;container\u0026#34;\u0026gt; \u0026lt;view class=\u0026#34;header\u0026#34;\u0026gt; \u0026lt;text class=\u0026#34;title\u0026#34;\u0026gt;æˆ‘çš„è®¢å•\u0026lt;/text\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;view class=\u0026#34;order-list\u0026#34;\u0026gt; \u0026lt;view class=\u0026#34;order-item\u0026#34; wx:for=\u0026#34;{{orders}}\u0026#34; wx:key=\u0026#34;id\u0026#34;\u0026gt; \u0026lt;view class=\u0026#34;order-header\u0026#34;\u0026gt; \u0026lt;text class=\u0026#34;order-no\u0026#34;\u0026gt;è®¢å•å·: {{item.id}}\u0026lt;/text\u0026gt; \u0026lt;text class=\u0026#34;order-status {{item.status === 0 ? \u0026#39;pending\u0026#39; : \u0026#39;completed\u0026#39;}}\u0026#34;\u0026gt; {{item.status === 0 ? \u0026#39;å¾…æ”¯ä»˜\u0026#39; : \u0026#39;å·²å®Œæˆ\u0026#39;}} \u0026lt;/text\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;view class=\u0026#34;order-content\u0026#34;\u0026gt; \u0026lt;view class=\u0026#34;service-info\u0026#34;\u0026gt; \u0026lt;text class=\u0026#34;service-name\u0026#34;\u0026gt;{{item.service_name}}\u0026lt;/text\u0026gt; \u0026lt;text class=\u0026#34;merchant-name\u0026#34;\u0026gt;{{item.merchant_name}}\u0026lt;/text\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;text class=\u0026#34;service-price\u0026#34;\u0026gt;Â¥{{item.price}}\u0026lt;/text\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;view class=\u0026#34;order-footer\u0026#34;\u0026gt; \u0026lt;text class=\u0026#34;user-info\u0026#34;\u0026gt;{{item.user_name}} Â· {{item.user_phone}}\u0026lt;/text\u0026gt; \u0026lt;text class=\u0026#34;order-time\u0026#34;\u0026gt;{{formatTime(item.create_time)}}\u0026lt;/text\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;view class=\u0026#34;empty-state\u0026#34; wx:if=\u0026#34;{{orders.length === 0}}\u0026#34;\u0026gt; \u0026lt;text class=\u0026#34;empty-text\u0026#34;\u0026gt;æš‚æ— è®¢å•\u0026lt;/text\u0026gt; \u0026lt;text class=\u0026#34;empty-desc\u0026#34;\u0026gt;å»é¦–é¡µçœ‹çœ‹æœ‰ä»€ä¹ˆæœåŠ¡å§\u0026lt;/text\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;/view\u0026gt; åˆ›å»º pages/orderList/orderList.wxssï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 .container { padding: 20rpx; background: #f5f5f5; min-height: 100vh; } .header { text-align: center; margin: 40rpx 0; } .title { font-size: 48rpx; font-weight: bold; color: #2c3e50; } .order-list { display: flex; flex-direction: column; gap: 20rpx; } .order-item { background: white; border-radius: 20rpx; padding: 30rpx; box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.1); } .order-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20rpx; padding-bottom: 20rpx; border-bottom: 1rpx solid #ecf0f1; } .order-no { font-size: 26rpx; color: #7f8c8d; } .order-status { font-size: 26rpx; font-weight: bold; padding: 8rpx 20rpx; border-radius: 20rpx; } .order-status.pending { background: #fff3cd; color: #856404; } .order-status.completed { background: #d4edda; color: #155724; } .order-content { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20rpx; } .service-info { flex: 1; } .service-name { display: block; font-size: 32rpx; font-weight: bold; color: #2c3e50; margin-bottom: 10rpx; } .merchant-name { font-size: 26rpx; color: #7f8c8d; } .service-price { font-size: 36rpx; color: #e74c3c; font-weight: bold; } .order-footer { display: flex; justify-content: space-between; align-items: center; padding-top: 20rpx; border-top: 1rpx solid #ecf0f1; } .user-info { font-size: 26rpx; color: #2c3e50; } .order-time { font-size: 24rpx; color: #95a5a6; } .empty-state { text-align: center; padding: 100rpx 0; } .empty-text { display: block; font-size: 32rpx; color: #bdc3c7; margin-bottom: 20rpx; } .empty-desc { display: block; font-size: 28rpx; color: #bdc3c7; } ç¬¬ 9 æ­¥ï¼šé…ç½®å°ç¨‹åºå…¥å£ ä¿®æ”¹ app.jsï¼š\n1 2 3 4 5 6 7 8 9 App({ onLaunch() { console.log(\u0026#34;å°ç¨‹åºå¯åŠ¨\u0026#34;); }, globalData: { userInfo: null, }, }); ğŸ§ª é˜¶æ®µäº”ï¼šé›†æˆæµ‹è¯•ä¸ä¸Šçº¿ ç¬¬ 1 æ­¥ï¼šå®Œæ•´æµç¨‹æµ‹è¯• æµ‹è¯•æµç¨‹ï¼š å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼š\n1 2 3 4 5 6 7 # ç»ˆç«¯1 - åç«¯ cd D:/life-service/server npm run dev # ç»ˆç«¯2 - å‰ç«¯ cd D:/life-service/web-admin npm run serve åœ¨ DataGrip ä¸­ç›‘æ§æ•°æ®ï¼š\nå®æ—¶æŸ¥çœ‹è¡¨æ•°æ®å˜åŒ– éªŒè¯å¤–é”®å…³ç³» æµ‹è¯•å®Œæ•´ä¸šåŠ¡æµç¨‹ï¼š\nWeb ç«¯ï¼šæ·»åŠ å•†å®¶ â†’ æ·»åŠ æœåŠ¡ å°ç¨‹åºï¼šæµè§ˆæœåŠ¡ â†’ ä¸‹å• Web ç«¯ï¼šæŸ¥çœ‹è®¢å• ç¬¬ 2 æ­¥ï¼šä»£ç ä¼˜åŒ– åç«¯ä¼˜åŒ–ï¼š æ·»åŠ å‚æ•°éªŒè¯ é”™è¯¯å¤„ç†å®Œå–„ æ·»åŠ æ—¥å¿—è®°å½• å‰ç«¯ä¼˜åŒ–ï¼š åŠ è½½çŠ¶æ€æç¤º é”™è¯¯è¾¹ç•Œå¤„ç† è¡¨å•éªŒè¯åŠ å¼º ç¬¬ 3 æ­¥ï¼šéƒ¨ç½²å‡†å¤‡ æ•´ç†é¡¹ç›®æ–‡æ¡£ï¼š åˆ›å»º README.mdï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 # å…¨åŸŸç”Ÿæ´»æœåŠ¡å¹³å° ## é¡¹ç›®ä»‹ç» ä¸€ä¸ªå®Œæ•´çš„ç”Ÿæ´»æœåŠ¡å¹³å°ï¼ŒåŒ…å« Web ç®¡ç†åå°å’Œå¾®ä¿¡å°ç¨‹åºã€‚ ## æŠ€æœ¯æ ˆ - åç«¯ï¼šNode.js + Express + MySQL - å‰ç«¯ï¼šVue 3 + Vue Router - å°ç¨‹åºï¼šå¾®ä¿¡å°ç¨‹åºåŸç”Ÿå¼€å‘ - æ•°æ®åº“ï¼šMySQL 8.0 - å·¥å…·ï¼šDataGrip ## å¯åŠ¨æ­¥éª¤ ### åç«¯ 1. cd server 2. npm install 3. ä¿®æ”¹ db/index.js ä¸­çš„æ•°æ®åº“å¯†ç  4. npm run dev ### Web ç®¡ç†åå° 1. cd web-admin 2. npm install 3. npm run serve ### å°ç¨‹åº 1. å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­æ‰“å¼€ mini-user æ–‡ä»¶å¤¹ 2. ç‚¹å‡»é¢„è§ˆ ç¬¬ 4 æ­¥ï¼šGit ç‰ˆæœ¬æ§åˆ¶ 1 2 3 4 5 6 7 8 9 10 11 12 13 # åˆå§‹åŒ–Git cd D:/life-service git init # æ·»åŠ æ‰€æœ‰æ–‡ä»¶ git add . # æäº¤ä»£ç  git commit -m \u0026#34;åˆå§‹æäº¤ï¼šå®Œæˆå…¨åŸŸç”Ÿæ´»æœåŠ¡å¹³å°å¼€å‘\u0026#34; # æ¨é€åˆ°GitHub/Gitee git remote add origin ä½ çš„ä»“åº“åœ°å€ git push -u origin main åç»­çš„æ›´æ–°ç»Ÿç®¡ç† 1 2 3 git init git add . git commit -m \u0026#34;update\u0026#34; ğŸ‰ é¡¹ç›®å®Œæˆï¼ ä½ å·²æŒæ¡çš„æŠ€èƒ½ï¼š âœ… å…¨æ ˆå¼€å‘ï¼šå‰ç«¯ + åç«¯ + æ•°æ®åº“\nâœ… å¤šç«¯å¼€å‘ï¼šWeb + å¾®ä¿¡å°ç¨‹åº\nâœ… æ•°æ®åº“è®¾è®¡ï¼šMySQL è¡¨è®¾è®¡ä¸å…³ç³»\nâœ… API å¼€å‘ï¼šRESTful æ¥å£è®¾è®¡\nâœ… å·¥å…·ä½¿ç”¨ï¼šDataGrip æ•°æ®åº“ç®¡ç†\né¢è¯•äº®ç‚¹ï¼š \u0026ldquo;ç‹¬ç«‹å®Œæˆä»æ•°æ®åº“è®¾è®¡åˆ°å‰åç«¯å¼€å‘çš„å…¨æµç¨‹\u0026rdquo; \u0026ldquo;æŒæ¡ Vue + Node.js + MySQL æŠ€æœ¯æ ˆæ•´åˆ\u0026rdquo; \u0026ldquo;å…·å¤‡å¤šç«¯å¼€å‘èƒ½åŠ›ï¼ˆWeb + å°ç¨‹åºï¼‰\u0026rdquo; \u0026ldquo;ä½¿ç”¨ DataGrip è¿›è¡Œä¸“ä¸šçš„æ•°æ®åº“ç®¡ç†\u0026rdquo; ä¸‹ä¸€æ­¥å»ºè®®ï¼š åŠŸèƒ½æ‰©å±•ï¼šæ·»åŠ ç”¨æˆ·ç™»å½•ã€æ”¯ä»˜åŠŸèƒ½ æ€§èƒ½ä¼˜åŒ–ï¼šæ·»åŠ ç¼“å­˜ã€åˆ†é¡µæŸ¥è¯¢ éƒ¨ç½²ä¸Šçº¿ï¼šè´­ä¹°äº‘æœåŠ¡å™¨éƒ¨ç½²é¡¹ç›® æŒç»­å­¦ä¹ ï¼šå­¦ä¹  TypeScriptã€Docker ç­‰è¿›é˜¶æŠ€æœ¯ ","date":"2025-10-20T16:36:00+08:00","permalink":"https://ye-guan-xing.github.io/p/%E5%85%A8%E5%9F%9F%E7%94%9F%E6%B4%BB%E6%9C%8D%E5%8A%A1%E5%B9%B3%E5%8F%B0%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B%E8%AF%A6%E8%A7%A3/","title":"å…¨åŸŸç”Ÿæ´»æœåŠ¡å¹³å°å¼€å‘æµç¨‹è¯¦è§£"}]